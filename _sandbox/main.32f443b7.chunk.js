(this["webpackJsonpcdm-ui"] = this["webpackJsonpcdm-ui"] || []).push([[0], { 17: function (e, t, a) { "use strict"; a.d(t, "b", (function () { return n })), a.d(t, "a", (function () { return c })); var n = function () { return { "Accept-Language": localStorage.getItem("cdm_selected_language") } }, c = { credentials: "same-origin" } }, 21: function (e, t, a) { "use strict"; a.d(t, "a", (function () { return c })); var n = a(0), c = a.n(n).a.createContext() }, 26: function (e, t, a) { "use strict"; a.d(t, "f", (function () { return i })), a.d(t, "d", (function () { return s })), a.d(t, "c", (function () { return d })), a.d(t, "e", (function () { return u })), a.d(t, "a", (function () { return m })), a.d(t, "g", (function () { return f })), a.d(t, "b", (function () { return b })); var n = a(4), c = a(176), r = a.n(c), o = function (e) { return new RegExp("/".concat(e, "/([^/?]+)")) }, l = { collection: "collection", searchterm: "query", field: "field", mode: "mode", conn: "connector", order: "order", ad: "orderDirection", page: "page", facetfield: "facetField", parentid: "parentId", includecompound: "includeCompound" }, i = function (e) { return new Promise((function (t) { for (var a = {}, c = 0, i = Object.entries(l); c < i.length; c++) { var s, d = Object(n.a)(i[c], 2), u = d[0], m = d[1], f = ""; (s = e.pathname.match(o(u))) && s[1] && (f = s[1]), a[m] = r()(f).replace(/%2F/gi, "%252F") } t(a) })) }, s = function (e) { var t = null, a = e.pathname.match(o("collection")); return a && a[1] && (t = a[1]), t && t.split("!") }, d = function (e) { var t = null, a = e.match(o("collection")); return a && a[1] && (t = a[1]), t && t.split("!") }, u = function (e) { var t = null, a = e.pathname.match(o("page")); return a && a[1] && (t = a[1]), t }, m = function (e, t) { var a = e.pathname.replace(o("page"), "/page/".concat(t)); return a.match(o("page")) || (a = "".concat(e.pathname, "/page/").concat(t)), a }, f = function (e) { return e.pathname.replace(o("page"), "") }, b = function (e, t, a) { return { collectionPath: e.collection ? "/collection/".concat(encodeURI(e.collection)) : "", searchterm: e.query ? "/searchterm/".concat(e.query) : "", field: e.field ? "/field/".concat(e.field) : "", mode: e.mode ? "/mode/".concat(e.mode) : "", conn: e.connector ? "/conn/".concat(e.connector) : "", sortOrderAndDirection: e.order ? "/order/".concat(e.order, "/ad/").concat(e.orderDirection) : "", page: a ? "/page/".concat(a) : "", maxRecordsPath: "/maxRecords/".concat(t) } } }, 32: function (e, t, a) { "use strict"; a.d(t, "a", (function () { return c })); var n = a(0), c = a.n(n).a.createContext({ searchRequest: null, updateSearchRequest: function () { } }) }, 40: function (e, t, a) { "use strict"; a.d(t, "b", (function () { return l })); var n = a(0), c = a(80), r = a(26), o = Object(n.createContext)(); t.a = o; var l = function () { var e = Object(c.h)(), t = Object(r.e)(e); return Object(n.useState)(t ? parseInt(t) : null) } }, 452: function (e, t, a) { e.exports = a(799) }, 48: function (e, t, a) { "use strict"; a.d(t, "b", (function () { return s })); var n = a(4), c = a(0), r = a.n(c), o = a(21), l = a(50), i = r.a.createContext(); t.a = i; var s = function () { var e = Object(c.useContext)(l.a), t = Object(n.a)(e, 1)[0], a = t && t.resultsPerPage, r = Object(c.useContext)(o.a).search; return Object(c.useState)(a || (r && r.resultsPerPage ? r.resultsPerPage : 10)) } }, 50: function (e, t, a) { "use strict"; a.d(t, "a", (function () { return c })); var n = a(0), c = a.n(n).a.createContext() }, 554: function (e, t, a) { }, 557: function (e, t, a) { }, 572: function (e, t, a) { }, 574: function (e, t, a) { }, 575: function (e, t, a) { }, 576: function (e, t, a) { }, 598: function (e, t, a) { }, 599: function (e, t, a) { }, 601: function (e, t, a) { }, 602: function (e, t, a) { }, 638: function (e, t, a) { }, 639: function (e, t, a) { }, 640: function (e, t, a) { }, 641: function (e, t, a) { }, 642: function (e, t, a) { }, 643: function (e, t, a) { }, 660: function (e, t, a) { }, 661: function (e, t, a) { }, 662: function (e, t, a) { }, 663: function (e, t, a) { }, 664: function (e, t, a) { }, 665: function (e, t, a) { }, 678: function (e, t, a) { }, 679: function (e, t, a) { }, 680: function (e, t, a) { }, 681: function (e, t, a) { }, 682: function (e, t, a) { }, 683: function (e, t, a) { }, 684: function (e, t, a) { }, 685: function (e, t, a) { }, 686: function (e, t, a) { }, 687: function (e, t, a) { }, 688: function (e, t, a) { }, 689: function (e, t, a) { }, 690: function (e, t, a) { }, 691: function (e, t, a) { }, 692: function (e, t, a) { }, 693: function (e, t, a) { }, 694: function (e, t, a) { }, 721: function (e, t, a) { }, 722: function (e, t, a) { }, 730: function (e, t, a) { }, 731: function (e, t, a) { }, 732: function (e, t, a) { }, 733: function (e, t, a) { }, 734: function (e, t, a) { }, 735: function (e, t, a) { }, 736: function (e, t, a) { }, 737: function (e, t, a) { }, 738: function (e, t, a) { }, 739: function (e, t, a) { }, 752: function (e, t, a) { }, 753: function (e, t, a) { }, 757: function (e, t, a) { }, 758: function (e, t, a) { }, 759: function (e, t, a) { }, 760: function (e, t, a) { }, 761: function (e, t, a) { }, 762: function (e, t, a) { }, 763: function (e, t, a) { }, 764: function (e, t, a) { }, 765: function (e, t, a) { }, 766: function (e, t, a) { }, 767: function (e, t, a) { }, 769: function (e, t, a) { }, 770: function (e, t, a) { }, 771: function (e, t, a) { }, 772: function (e, t, a) { }, 773: function (e, t, a) { }, 774: function (e, t, a) { }, 775: function (e, t, a) { }, 776: function (e, t, a) { }, 777: function (e, t, a) { }, 781: function (e, t, a) { }, 782: function (e, t, a) { }, 783: function (e, t, a) { }, 785: function (e, t, a) { }, 786: function (e, t, a) { }, 787: function (e, t, a) { }, 788: function (e, t, a) { }, 789: function (e, t, a) { }, 790: function (e, t, a) { }, 791: function (e, t, a) { }, 792: function (e, t, a) { }, 793: function (e, t, a) { }, 796: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=" }, 797: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7c3grY3grg8hJo3grY4g7c4g7c3grU0gLI4grY9hrpBi79HkMM2frE0daA0fq82gbROlslbo9Vgp9dcpNZQmcxFjsIwd6QzeKk3gbRfptdepdZcpdY2gLMtd5s3gLNZotVSntNPnNJLmtFImdBZodU1f7A2f7A1frA2f7I2f7FHmNBUnM9Wn9VGmNAydaNYoNJOm9M9hLc0e6w3fa46f7BKmdFFltBVndE1fK1Els82fq41fK1Dlc89g7RClc9XoNVUndQ0eqxClM9Jl9FRms81eqo0eqpHltFBk89Fi75Qm9M/k89KkcYzealSjbadvdPH2ufz9/r4+vzP3+qlxNljmL08gLNSnNQzeKgydqUzeKg/ks6NtM/////+/v8+kc/f6fFAgK1CiLwydKIzd6c8kM6Tt9C1zd5OmdNBh7pTjLRzn78xdKIydqU7j86jwdbM3egxdKIydaQydaMydKNGlNE6js5OiLAxc6FKkshDk9E5jc09e6Zekrcxc6I4jc03eagyc6FIldI3jM0wcaBMl9J+psNKltIwcZ82i83k7fMubJhLlc81is1Lg6pklbZNl9I/j9AvbJlEjcVdkLPt8/cwcZ4ubZkwcJ00icy0y9swcJwvb5wzicxHkcpTh60ubZhCkNAyiMwvbpoxh8xAicBHj8hGk9FHks0+jdAubJcubJdEkdEwhsw6i88ubJgta5cvhswxapgubJcuhcstbJcubZcuhMsubJcvbJZBjMgthMsubJcvbZkubJcrg8stbJctbZcubJgrgssua5gubJc6is8qgcs8i9A9iMYtg8spgcoogMo7hcMrbZcubJcngMonf8olfsoubJc4gr8kfckua5g5iM8jfMk4iM8he8k1froua5g7itAgeskubJc2hs8eecgzfLcofssdeMg0hc4ubJccd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqjbZ8obAAAA7HRSTlMAHDdTb4yPA+L/7ZxE/////yYLgvb///////8SYf/////qB/////////+1wNHd//////8s////r/////////+O/P///////////8f///////////////////////+P2P///////////3f//////////5j/////tczn//////L///////////////////////8+////////R/////Ww////tf////9q////////////4P/////Yd/8W+P/xov+UNv///STN/7hc1P/AUv//////////MMT///+m//+e//////+M//+C////////6cqo94AAAAXmSURBVHgBrNKDoipBGADgbHMRpjuKi2xOdu//MHe2Y6tvOdZvuhGzxWqzO2xWi9lp+g6L3eV+5PH6vmpltrv8nDsQDIWCAbef83jDpo9FojFeJxhPJO8JosQzYnb5oxYpVzodiCcyhiwA2esPEAPpdM727vT+eSH0x7McwoTmOUpxIcvF/RAWI29byCUIpUQ2m8A0/xwx8kIQls2vW4QrihIHQMDqGyQBgAiVnOXVTuWUtAaAnq++I48B0PxKrPZiq8qKvy4IpPqBhiDUm0rl+ca12h1NQN3eh7pI6MN26WnfooNBPIHU4SdUlBAHg9Hj0seDEEJ08pxKqfoio4tQaDAOP0xrMEWIzB4NCWaIK8xJ7ymXItQcFO/jcLGIF+bLRytW4LS18Wbd5SNcEBcLn8mw2TYZ2+3vLRuMaYdme7sdTA8iY8flQ0mPscC2fB1ku12z4+necs7YebDlri9JZ3rvoazB1tutxdiuy1TXl4/Zer95ufzneq7524qBAIBr61TmtxXX/MK4FC6cKIwvViozXMDMzLbCTF+1JBn/4/EtLi2vrK6tbywsbE506vVxnZ3fF7YIIQamdX7dVqb/RtnCr1X+n3F9gA2MdA7Vsl87nzEDId2MTUCHSdr+As/Y1DKvM1uYFWBGpTtggrFuYrMPApgc0jhMTNmdvInLbn8NqNImgEG7jWzZnwB1KAg79t1V3mzPvgm6Q+n9m98n/e5ZQI+iw6Dby1v43AzApPIIs24/Cbg1GFcRE+h29xpvseJ2v4cxjzQOmjtAgqF5PRyRZvTXIfcqbxUNPdOnI1JYnw8FSSwUp4mklKDzoRRvkw7N0vF6QTwUI4aMRsNZyUQnMhkzb2HMZeJ0RhUMUy1jIP68lRaKUpLSXN7FW5jz+QnqKEoFas37yX6pD8tFpYybpQpv4S3lEGv5KvaV9olNDPwNHUhh1ETex5scpsQOVg8UxAFhI0dCHKPjRIogDorT1aZPzkTuHC9U2oPnQlySRzFxhYkTJYHHIXFt5srNnhBxLDSyV+L2IyF395vnhQflpHCuifv80g3/a+UPIXWNEDEAQEE0HR23weEk6XGnwR1iH3eJu7udbt26fe30I17x/PYH+9iv+CB5qT1v+YhlL5WeS5ZV72RZftvlNF6Wj75Zdn2kHcl6e5Sy/A3D7DsBMP0gd/DkC/Bp9l3gW5Y7a5asWVCm3WcaAFSHnFtxAXivwwAsWf9E25dl+TiwhwIKPVRgD33Ct6wvom0ijKapOBllpkEcf6ZCMsqjyCgjuvKIoajXYgya8vhIJ7rKKnKOP+sxjOPJZmV0DRRHGIZx/KW6npaOvor3M/G+pqalS00TT5q4G7qzPGe4O+wu7mxw59wt8p3LCre//pn/J+iupIwe1HKcpVdXI8c9QB9l9QMDnHVQF8+9xdAw5YzgBmfuHdVh4bj7GKO8cZYxW/UmvHkAeEl5pgncMJt7JzVZzOYaTFGh6WRGEDVJ5pniCDOCWw0Ns3MaLA0NdRijYm+AmQZhXoO1YQFYpBJLqGloGF1W1ZuMfKRSL1OZFVXJyNBlUhhD7evXk6sqZl+/rscaKfUDC68FtYn19Xr64xU+oo7nxQ2FWZ6vxyapuTyEdV5WTgR+HZ3DpGoN9Szzu8Qkzz9CH6kbZhlpa7uELO2gs4I0bOKRJInFC1GyPsMuaanoxPre1n6hbXlvB90dpKkPj4Q9sXAi7gnfcEDaOjqxIxwe5e1vCcforiIdu/gkyyenOSeyrBthqrpxvHV2lF0cHW4d47ySdB3g29bWiSPjZMvZBDvpqzxPZk7Ti9PDLZcyomBHk/PwxJ1ycsgiv4guzrgOz9wexn126EVbNV3oVzLj8zBaEYXqNnjP/G4W8Z8F0GYiKisTPGMZ31kQGKdymGwIhMIeTzgUgM1EZRkHgmGfL8wi01Qe0wQCYSaAESrXNBCJRiN6EYURxKLRmF5E4Q0QjwNvyIAlJBKYIiNegnlJhowBY2RMP9BPBn38SEYtLpKG/+tgQe8M5cY7AAAAAElFTkSuQmCC" }, 798: function (e, t) { e.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC" }, 799: function (e, t, a) { "use strict"; a.r(t); a(181), a(251), a(255), a(256), a(257), a(258), a(259), a(260), a(262), a(263), a(193), a(267), a(268), a(104), a(272), a(273), a(275), a(276), a(277), a(278), a(279), a(280), a(281), a(282), a(283), a(284), a(285), a(286), a(288), a(290), a(291), a(292), a(293), a(294), a(295), a(296), a(297), a(298), a(299), a(300), a(301), a(302), a(303), a(304), a(199), a(305), a(306), a(307), a(308), a(310), a(311), a(312), a(313), a(314), a(316), a(318), a(201), a(320), a(322), a(135), a(323), a(202), a(329), a(204), a(330), a(331), a(332), a(333), a(334), a(136), a(335), a(336), a(339), a(340), a(341), a(342), a(343), a(345), a(346), a(347), a(348), a(349), a(350), a(351), a(352), a(353), a(354), a(355), a(356), a(357), a(358), a(359), a(360), a(361), a(362), a(211), a(459), a(467); var n = a(0), c = a.n(n), r = a(44), o = a.n(r), l = (a(554), a(5)), i = a.n(l), s = a(9), d = a(4), u = a(227), m = c.a.createContext(), f = function (e) { var t = { isLoading: e.isLoading, messages: e.messages, changeLanguage: e.changeLanguage }; return c.a.createElement(u.a, Object.assign({}, e, { onError: function () { } }), c.a.createElement(m.Provider, { value: t }, e.children)) }, b = c.a.createContext(), p = a(2), g = a(17), h = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a, n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return a = t && t.enabled ? "/digital/tmx.json?_preview=true" : "/digital/tmx.json", e.prev = 2, e.next = 5, fetch(a, Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 5: return n = e.sent, e.next = 8, n.json(); case 8: return e.abrupt("return", e.sent); case 11: return e.prev = 11, e.t0 = e.catch(2), e.abrupt("return", e.t0); case 14: case "end": return e.stop() } }), e, null, [[2, 11]]) }))); return function (t) { return e.apply(this, arguments) } }(), E = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a, n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return a = "/digital/tmx/".concat(t, ".json"), e.prev = 2, e.next = 5, fetch(a, Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 5: return n = e.sent, e.next = 8, n.json(); case 8: return e.abrupt("return", e.sent); case 11: return e.prev = 11, e.t0 = e.catch(2), e.abrupt("return", e.t0); case 14: case "end": return e.stop() } }), e, null, [[2, 11]]) }))); return function (t) { return e.apply(this, arguments) } }(), v = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, fetch("/digital/login", { method: "POST", cache: "no-cache", headers: Object(p.a)({}, Object(g.b)()), credentials: "include", body: t }); case 3: return a = e.sent, e.abrupt("return", a); case 7: return e.prev = 7, e.t0 = e.catch(0), e.abrupt("return", e.t0); case 10: case "end": return e.stop() } }), e, null, [[0, 7]]) }))); return function (t) { return e.apply(this, arguments) } }(), I = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/logout", { method: "GET", cache: "no-cache", headers: Object(p.a)({}, Object(g.b)()) }); case 2: return t = e.sent, e.abrupt("return", t); case 4: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), O = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/auth", Object(p.a)({ method: "GET", cache: "no-cache", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 2: return t = e.sent, e.next = 5, t.json(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), S = a(16), j = a.n(S), _ = !1, y = !1, C = (a(557), a(558), a(49)), k = a(398), x = a(80), M = Object.freeze({ HEADER: "".concat("cdm", "-header"), FOOTER: "".concat("cdm", "-footer"), CONTENT: "".concat("cdm", "-main-content"), CONTENT_HEADER: "".concat("cdm", "-content-header"), COLLECTION_CARD: "".concat("cdm", "-collection-card"), ITEM_CARD: "".concat("cdm", "-item-card"), HOME_PAGE: "".concat("cdm", "-home-page"), ABOUT_PAGE: "".concat("cdm", "-about-page"), LOGIN_PAGE: "".concat("cdm", "-login-page"), SEARCH_PAGE: "".concat("cdm", "-search-page"), NOTFOUND_PAGE: "".concat("cdm", "-notfound-page"), ADVANCED_SEARCH_PAGE: "".concat("cdm", "-advanced-search-page"), COLLECTION_PAGE: "".concat("cdm", "-collection-page"), COLLECTION_LANDING: "".concat("cdm", "-collection-landing-page"), COLLECTION_SEARCH: "".concat("cdm", "-collection-search-page"), ITEM_LANDING: "".concat("cdm", "-item-page"), CUSTOM_PAGE: "".concat("cdm", "-custom-page"), SAVED_ITEMS_PAGE: "".concat("cdm", "-saved-items-page"), SHARED_ITEMS_PAGE: "".concat("cdm", "-shared-items-page"), collection: function (e) { return "".concat(M.COLLECTION_PAGE, " ").concat(M.COLLECTION_PAGE, "-").concat(e) }, item: function (e) { return "".concat(M.ITEM_LANDING, " ").concat(M.ITEM_LANDING, "-").concat(e) } }), T = M, w = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, n = t ? t.toString() : null; return { collectionId: e, itemId: n, filename: a } }, N = function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null, c = Object(n.useRef)(e), r = e ? e[t] : null, o = e ? e[a] : null, l = null; o && (l = o.toString()); var i = Object(n.useState)({ collectionId: r, itemId: l || void 0, filename: e ? e.filename : void 0 }), s = Object(d.a)(i, 2), u = s[0], m = s[1]; return Object(n.useEffect)((function () { e && Object.keys(e).find((function (t) { return e[t] !== c.current[t] })) && m(Object(p.a)(Object(p.a)({}, e), {}, { collectionId: r, itemId: l || void 0 })), c.current = e }), [e, r, t, l]), u }, A = Object.freeze({ appReady: function () { return A.ready("cdm-app") }, enter: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "".concat(e, ":enter") }, ready: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "".concat(e, ":ready") }, update: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "".concat(e, ":update") }, leave: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ""; return "".concat(e, ":leave") } }), F = ["collectionId", "itemId", "filename"], L = function (e) { var t = e || {}; return F.reduce((function (e, a) { return t.hasOwnProperty(a) && (e[a] = t[a]), e }), {}) }, P = function (e, t) { if (e) { var a = function (e, t) { if ("function" === typeof CustomEvent) return new CustomEvent(e, { detail: t, cancelable: !0, bubbles: !0 }); var a = document.createEvent("CustomEvent"); return a.initCustomEvent(e, !0, !0, t), a }(e, t); document.dispatchEvent(a) } }, R = function (e, t, a, c) { var r = Object(n.useRef)(!1), o = Object(n.useRef)(!1), l = Object(n.useRef)(a), i = Object(n.useRef)(!1), s = Object(n.useRef)(!1), u = Object(n.useState)(e), m = Object(d.a)(u, 1)[0], f = Object(n.useState)(t), b = Object(d.a)(f, 1)[0]; Object(n.useEffect)((function () { o.current || (P(A.enter(m), L(b)), o.current = !0) })), Object(n.useEffect)((function () { r.current || (r.current = !0) })), Object(n.useEffect)((function () { if (r) if (c && !i.current) P(A.ready(m), L(b)), i.current = !0; else if (c && i.current) { Object.keys(a).find((function (e) { return a[e] !== l.current[e] })) && P(A.update(m), L(a)), l.current = a } }), [m, a, b, c]), Object(n.useEffect)((function () { return function () { s.current = !0 } }), []), Object(n.useEffect)((function () { return function () { s.current && P(A.leave(m), L(a)) } }), [m, a]) }, K = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0; R(e, w(), N(), void 0 === t || t) }, B = a(68), D = a.n(B), Y = a(1), H = a.n(Y), U = function (e, t) { var a = e.formatMessage({ id: t, defaultMessage: " " }); return D()(H.a.decode(H.a.decode(a))) }, V = function (e) { var t = document.createElement("p"); return t.innerHTML = H.a.decode(e), t.innerText }, G = (a(572), function (e) { var t = e.setMainClass; K(T.ABOUT_PAGE); var a = Object(k.a)(), r = H.a.decode(a.formatMessage({ id: "SITE_CONFIG_aboutPageTitle", defaultMessage: " " })), o = V(r); return Object(n.useEffect)((function () { t("cdm-about-page") })), c.a.createElement("div", { className: "About-maincontainer shared-box", "data-id": "aboutContainer" }, c.a.createElement("div", { className: "About-maincontentAbout shared-contentContainer ".concat(T.ABOUT_PAGE) }, c.a.createElement("div", { className: "About-maincontentAboutTitle" }, c.a.createElement("h1", { "data-id": "aboutTitle", tabIndex: 0 }, o)), c.a.createElement("div", null, c.a.createElement("div", { className: "grayDividerLine" }), c.a.createElement("div", { "data-id": "aboutBody", tabIndex: 0 }, U(a, "SITE_CONFIG_aboutPageHtml"))))) }), q = a(32), z = a(801), W = a(172), Q = a(11), J = a.n(Q), X = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/api/collections/all/simple", Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 2: return t = e.sent, e.next = 5, t.json(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), Z = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/api/collections/all/search/advanced/settings", Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 2: return t = e.sent, e.next = 5, t.json(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), $ = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/api/collections/".concat(t, "/search/advanced/settings"), Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 2: return a = e.sent, e.next = 5, a.json(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), ee = { mode: "all", searchTerm: "", field: "all", connector: "and" }, te = { mode: "on", searchTerm: "", searchTerm2: "" }, ae = "setLoading", ne = "setSingleCollectionSettings", ce = "setSettings", re = "setQueries", oe = "addQuery", le = "updateQuery", ie = "updateDateQuery", se = "resetDateQuery", de = { setLoading: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { isLoading: t.payload }) }, setCollections: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { filters: { collections: t.payload } }) }, setSettings: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { searchTermFields: t.payload }) }, setSingleCollectionSettings: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { searchTermFields: t.payload }) }, setQueries: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { queries: t.payload }) }, addQuery: function (e, t) { var a = e.queries; return a.push(t.payload), Object(p.a)(Object(p.a)({}, e), {}, { queries: a }) }, updateQuery: function (e, t) { var a = e.queries; return a[t.payload.index][t.payload.fieldName] = t.payload.value, Object(p.a)(Object(p.a)({}, e), {}, { queries: a }) }, setNumberOfCollectionsSelected: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { numberOfCollectionsSelected: t.payload }) }, updateFilterChanges: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { filters: { collections: t.payload } }) }, saveCollectionFilterString: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { collection: t.payload }) }, setHasFilterChanges: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { hasFilterChanges: t.payload }) }, updateDateQuery: function (e, t) { var a = e.dateQuery; return a[t.payload.fieldName] = t.payload.value, Object(p.a)(Object(p.a)({}, e), {}, { dateQuery: a }) }, resetDateQuery: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { dateQuery: Object(p.a)({}, te) }) } }, ue = function (e, t) { return de[t.type](e, t) }, me = (a(574), function (e) { var t = e.disabled, a = e.query, r = e.dispatch, o = Object(k.a)(), l = { on: H.a.decode(o.formatMessage({ id: "SITE_KEY_onDate", defaultMessage: " " })), after: H.a.decode(o.formatMessage({ id: "SITE_KEY_after", defaultMessage: " " })), before: H.a.decode(o.formatMessage({ id: "SITE_KEY_before", defaultMessage: " " })), between: H.a.decode(o.formatMessage({ id: "SITE_cdm_advanced_search_KEY_between", defaultMessage: " " })) }, i = Object(n.useCallback)((function (e) { r({ type: ie, payload: { fieldName: "mode", value: e.target.value } }) }), [r]), s = Object(n.useCallback)((function (e) { r({ type: ie, payload: { fieldName: "searchTerm", value: e.target.value } }) }), [r]), d = Object(n.useCallback)((function (e) { r({ type: ie, payload: { fieldName: "searchTerm2", value: e.target.value } }) }), [r]), u = "between" === a.mode; return c.a.createElement("div", { className: "well well-sm DateSearch-container" }, c.a.createElement("h2", null, H.a.decode(o.formatMessage({ id: "SITE_cdm_advanced_search_KEY_enter_date", defaultMessage: " " })), ":"), c.a.createElement("div", { className: "DateSearch-flexContainer" }, c.a.createElement("div", { className: "DateSearch-input" }, c.a.createElement("select", { "aria-label": H.a.decode(o.formatMessage({ id: "SITE_cdm_advanced_search_KEY_date_modifier", defaultMessage: " " })), className: "form-control", disabled: t, value: a.mode, onChange: i, "data-id": "dateModeField" }, Object.keys(l).map((function (e, t) { return c.a.createElement("option", { key: t, value: e }, l[e]) })))), c.a.createElement("div", { className: "DateSearch-input" }, c.a.createElement("input", { "aria-label": H.a.decode(o.formatMessage({ id: "SITE_cdm_advanced_search_KEY_enter_date", defaultMessage: " " })), type: "text", disabled: t, className: "form-control", value: a.searchTerm, onChange: s, "data-id": "firstDateField" })), u ? c.a.createElement("div", { className: "DateSearch-input" }, c.a.createElement("label", null, c.a.createElement("span", null, H.a.decode(o.formatMessage({ id: "SITE_KEY_fromDateToDate", defaultMessage: "to" }))), c.a.createElement("input", { "aria-label": H.a.decode(o.formatMessage({ id: "SITE_cdm_advanced_search_KEY_enter_date_2", defaultMessage: " " })), type: "text", disabled: t, className: "form-control", value: a.searchTerm2, onChange: d, "data-id": "secondDateField" }))) : null), c.a.createElement("div", { className: "DateSearch-footer" }, c.a.createElement("div", null), c.a.createElement("div", null, c.a.createElement("span", null, H.a.decode(o.formatMessage({ id: "SITE_cdm_advanced_search_KEY_date_format_help_text", defaultMessage: " " })))), u ? c.a.createElement("div", null) : null), c.a.createElement("div", { className: "clearfix" })) }), fe = (a(575), function (e) { var t = Object(k.a)(), a = e.showBooleanFields, r = e.disabled, o = e.connector, l = e.query, i = e.fields, s = e.index, d = e.dispatch, u = { all: H.a.decode(t.formatMessage({ id: "SITE_KEY_allofthewords", defaultMessage: " " })), any: H.a.decode(t.formatMessage({ id: "SITE_KEY_anyofthewords", defaultMessage: " " })), exact: H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_exact_phrase", defaultMessage: " " })), none: H.a.decode(t.formatMessage({ id: "SITE_KEY_noneofthewords", defaultMessage: " " })) }, m = { and: H.a.decode(t.formatMessage({ id: "SITE_KEY_and", defaultMessage: " " })), or: H.a.decode(t.formatMessage({ id: "SITE_KEY_or", defaultMessage: " " })) }, f = Object(n.useCallback)((function (e) { d({ type: le, payload: { index: s, fieldName: "connector", value: e.target.value } }) }), [d, s]), b = Object(n.useCallback)((function (e) { d({ type: le, payload: { index: s, fieldName: "field", value: e.target.value } }) }), [d, s]), p = Object(n.useCallback)((function (e) { d({ type: le, payload: { index: s, fieldName: "searchTerm", value: e.target.value } }) }), [d, s]), g = Object(n.useCallback)((function (e) { d({ type: le, payload: { index: s, fieldName: "mode", value: e.target.value } }) }), [d, s]), h = "".concat(a ? "col-xs-8" : "", " col-md-4"), E = "row form-group ".concat(a ? "FieldSearch-adjustGutter" : ""); return c.a.createElement("div", { className: "well well-sm FieldSearch-container" }, a ? null : c.a.createElement("h2", null, H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_cdm_advanced_search_KEY_enter_search_term" })), ":"), c.a.createElement("div", { className: E }, a ? c.a.createElement("div", { className: "col-md-2 col-xs-4" }, c.a.createElement("select", { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_cdm_advanced_search_KEY_search_connector", defaultMessage: " " })), className: "form-control", disabled: r, onChange: f, value: o }, c.a.createElement("option", { value: "and" }, m.and), c.a.createElement("option", { value: "or" }, m.or))) : null, c.a.createElement("div", { className: h }, c.a.createElement("select", { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_cdm_advanced_search_KEY_field_name", defaultMessage: " " })), className: "form-control", disabled: r, onChange: b, value: l.field }, Object.keys(i).map((function (e, t) { return c.a.createElement("option", { key: t, value: e }, i[e]) }))))), c.a.createElement("div", { className: "row form-group FieldSearch-adjustGutter2" }, c.a.createElement("div", { className: "col-md-8" }, c.a.createElement("input", { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_please_enter_another_search_term", defaultMessage: " " })), type: "text", disabled: r, onChange: p, className: "form-control", placeholder: H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_please_enter_another_search_term", defaultMessage: " " })), value: l.searchTerm })), c.a.createElement("div", { className: "col-md-4" }, c.a.createElement("select", { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_cdm_advanced_search_KEY_search_modifier", defaultMessage: " " })), className: "form-control", disabled: r, onChange: g, value: l.mode }, Object.keys(u).map((function (e, t) { return c.a.createElement("option", { key: t, value: e }, u[e]) })))))) }), be = (a(576), function () { var e = Object(k.a)(); return c.a.createElement(z.a, { bsStyle: "info" }, c.a.createElement(J.a, { name: "info-circle" }), c.a.createElement("span", { "data-id": "FetchingNotification", tabIndex: 0 }, H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_KEY_loadingTransition" }))), c.a.createElement(J.a, { className: "FetchingNotification-spinner", name: "refresh", "aria-hidden": "true" })) }), pe = be, ge = a(101), he = function () { var e = Object(s.a)(i.a.mark((function e(t, a) { var n, c, r, o, l, s, d; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = a.query ? "/searchterm/".concat(a.query) : "", c = a.field ? "/field/".concat(a.field) : "", r = a.mode ? "/mode/".concat(a.mode) : "", o = a.connector ? "/conn/".concat(a.connector) : "", l = a.order ? "/order/".concat(a.order, "/ad/").concat(a.orderDirection) : "", s = a.collection ? "/collection/".concat(a.collection) : "", e.prev = 6, e.next = 9, fetch("/digital/api/facet/facetfield/".concat(t).concat(s).concat(n).concat(c).concat(r).concat(o).concat(l), Object(p.a)({ method: "GET", headers: Object(p.a)(Object(p.a)({}, Object(g.b)()), {}, { "Content-Type": "application/json" }) }, g.a)); case 9: return d = e.sent, e.next = 12, d.json(); case 12: return e.abrupt("return", e.sent); case 15: return e.prev = 15, e.t0 = e.catch(6), e.abrupt("return", { error: e.t0 }); case 18: case "end": return e.stop() } }), e, null, [[6, 15]]) }))); return function (t, a) { return e.apply(this, arguments) } }(), Ee = function (e) { var t, a = Object(k.a)(), r = Object(n.useState)(!0), o = Object(d.a)(r, 2), l = o[0], u = o[1], m = Object(n.useContext)(q.a), f = Object(d.a)(m, 1)[0], b = Object(n.useRef)(null), p = e.entities, g = e.actions, h = e.showMoreMessageKey, E = e.render, v = e.buttonClass, I = e.facetField, O = e.initialShowCount, S = Object(n.useState)((t = {}, Object(ge.a)(t, I, p), Object(ge.a)(t, "additionalFacetsLoaded", !1), t)), j = Object(d.a)(S, 2), _ = j[0], y = j[1], C = _[I], x = C.length > O; l && (C = p.slice(0, O)), Object(n.useEffect)((function () { (function () { var e = Object(s.a)(i.a.mark((function e() { var t, a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!1 !== l || _.additionalFacetsLoaded || "collection_filter" === I) { e.next = 5; break } return e.next = 3, he(I, f); case 3: a = e.sent, y((t = {}, Object(ge.a)(t, I, a.facets[I]), Object(ge.a)(t, "additionalFacetsLoaded", !0), t)); case 5: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } })()() }), [l, _.additionalFacetsLoaded, I, f]); var M = function () { var e = b.children[0].querySelector("input"); e && e.focus() }, T = function () { var e = Object(s.a)(i.a.mark((function e() { return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: u(!l), M(); case 2: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), w = function () { T() }, N = function () { T() }; return c.a.createElement(c.a.Fragment, null, c.a.createElement("div", { className: "ShowMoreLess-container", ref: function (e) { return b = e } }, c.a.createElement("div", null, C.map((function (e, t) { return E(t, e, g) }))), x ? function () { var e = l ? { text: H.a.decode(a.formatMessage({ id: h || "SITE_cdm_search_KEY_show_more", defaultMessage: " " })), onClickHandler: w } : { text: H.a.decode(a.formatMessage({ id: "SITE_cdm_search_KEY_show_less", defaultMessage: " " })), onClickHandler: N }; return c.a.createElement("div", { className: v }, c.a.createElement(W.a, { className: "cdm-btn btn-see-more-less", block: !0, onClick: e.onClickHandler }, e.text)) }() : null)) }, ve = function () { var e = window.matchMedia && window.matchMedia("only screen and (max-width: 767px)").matches; return { isMobile: e, isDesktop: !e } }, Ie = c.a.createContext(), Oe = function () { var e = ve().isMobile, t = Object(n.useContext)(Ie); return e ? t : function () { } }, Se = "setNumberOfCollectionsSelected", je = "updateFilterChanges", _e = "saveCollectionFilterString", ye = "setHasFilterChanges", Ce = (a(598), function (e) { var t = e.getSelectedCollections, a = e.updateButtonText, r = e.afterSave, o = Object(k.a)(), l = Object(n.useContext)(q.a), i = Object(d.a)(l, 2), s = i[0], u = i[1], m = Oe(), f = Object(n.useState)(!0), b = Object(d.a)(f, 2), g = b[0], h = b[1], E = Object(n.useState)(!0), v = Object(d.a)(E, 2), I = v[0], O = v[1], S = t(), j = null === S || void 0 === S ? void 0 : S.every((function (e) { return !e.selected })), _ = Object(n.useState)(S), y = Object(d.a)(_, 2), C = y[0], x = y[1], M = function (e) { var t = e.every((function (e) { return !!S.find((function (t) { return t.alias === e.alias && t.selected === e.selected })) })); u({ type: ye, payload: !t }), O(t || e.every((function (e) { return !1 === e.selected }))), h(t) }, T = function (e) { A(e) ? u({ type: Se, payload: 0 }) : u({ type: Se, payload: C.map((function (e) { return e.alias })).length }) }, w = function () { x(S), u({ type: je, payload: S }), u({ type: Se, payload: S.filter((function (e) { return e.selected })).length }), u({ type: ye, payload: !1 }), h(!0), O(!0) }, N = function () { s.collection = C.filter((function (e) { return e.selected ? e.alias : "" })).map((function (e) { return e.alias })).join("!"), s.page = "", F() && (s.collection = ""), m(), u({ type: je, payload: C }), u({ type: _e, payload: s.collection }), u({ type: ye, payload: !1 }), O(!0), r && r(s) }, A = function (e) { return e.every((function (e) { return !e.selected })) }, F = function () { return C.every((function (e) { return e.selected })) }, L = function (e) { var t = C.find((function (t) { return t.alias === e.alias })); return t && t.selected }; return c.a.createElement("div", { className: "SearchCollectionFilter-container" }, c.a.createElement("div", { className: "checkbox SearchCollectionFilter-allCollectionsCheckbox" }, c.a.createElement("label", null, c.a.createElement("input", { type: "checkbox", name: "selectAll", checked: F(), onChange: function (e) { var t = C.map((function (t) { return Object(p.a)(Object(p.a)({}, t), {}, { selected: e.target.checked }) })); x(t), T(t), M(t) } }), H.a.decode(o.formatMessage({ defaultMessage: " ", id: "SITE_KEY_selectallcollections" })))), c.a.createElement(Ee, { initialShowCount: 5, showMoreCount: null === S || void 0 === S ? void 0 : S.length, entities: C, showMoreMessageKey: "SITE_cdm_search_KEY_show_all", facetField: "collection_filter", actions: { handleOnClick: function (e) { var t = e.target.checked, a = e.target.name, n = C.map((function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { selected: a === e.alias ? t : e.selected }) })); x(n), T(n), M(n) } }, render: function (e, t, a) { return c.a.createElement("div", { className: "checkbox", key: e }, c.a.createElement("label", null, c.a.createElement("input", { type: "checkbox", name: t.alias, checked: L(t), onChange: a.handleOnClick }), t.name)) } }), c.a.createElement("div", { className: "SearchCollectionFilter-btnContainer" }, c.a.createElement("div", { className: "col-xs-6 SearchCollectionFilter-btnWrapper" }, c.a.createElement(W.a, { bsstyle: "link", disabled: g, className: "cdm-btn", block: !0, onClick: w, name: "cancelBtn" }, H.a.decode(o.formatMessage({ defaultMessage: " ", id: "SITE_KEY_cancel" })))), c.a.createElement("div", { className: "col-xs-6 SearchCollectionFilter-btnWrapper" }, function (e) { return c.a.createElement(W.a, { bsstyle: "primary", disabled: I || j, className: "cdm-btn", "data-id": "updateBtn", block: !0, onClick: N, name: "updateBtn" }, e || H.a.decode(o.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_update" }))) }(a)))) }), ke = function (e) { var t = "/digital/search", a = function (t) { return e[t] ? "/".concat(t, "/").concat(e[t]) : "" }; return ["collection", "query", "field", "mode", "connector", "order", "orderDirection", "page", "facetField", "parentId", "includeCompound"].forEach((function (n) { "collection" === n && e[n] ? e.collection.split("!").length > 1 ? t += "".concat(a(n)) : (t = t.replace("/search", ""), t += "".concat(a(n), "/search")) : "orderDirection" === n && e[n] ? t += "/ad/".concat(e[n]) : "connector" !== n && "query" !== n || !e[n] ? t += a(n) : "connector" === n ? t += "/conn/".concat(e[n]) : t = (t += "/searchterm/".concat(e[n])).replace(/%2F/gi, "%25252F").replace(/%252F/gi, "%25252F") })), "/digital" === t && (t += "/search"), t.includes("/digital/searchterm/") && (t = t.replace("/searchterm", "/search/searchterm")), t }, xe = a(103), Me = a.n(xe); function Te(e, t) { var a = e.mode, n = e.searchTerm, c = e.searchTerm2, r = { searchTerm: { presence: function () { return "between" === a && "" !== c && { message: t.enterFirstDate } }, datetime: { message: t.wrongFormat } }, searchTerm2: function () { return "between" === a ? { presence: { allowUndefined: "" === n, message: t.enterSecondDate }, datetime: { tooEarly: t.tooEarly, message: t.wrongFormat, earliest: n } } : null } }; return Me.a.validators.presence = function (e, t) { t = Me.a.extend({}, this.options, t); var a = Me.a, n = []; if (t.allowUndefined) { if (t.allowUndefined && !a.isDefined(e)) return } else n.push((function (e) { return !a.isDefined(e) })); if (t.allowEmpty || n.push(a.isEmpty), n.some((function (t) { return t.call(null, e) }))) return t.message || this.message || "can't be blank" }, Me.a.extend(Me.a.validators.datetime, { parse: function (e) { return /^(\d{4}|\d{4}[-/]\d{2}|\d{4}[-/]\d{2}[-/]\d{2})$/.test(e) ? function (e) { var t = e.split(/[/-]/), a = Object(d.a)(t, 3), n = a[0], c = a[1], r = a[2]; return n && c && r ? new Date(n, c - 1, r) : n && c ? new Date(n, c - 1, 1) : n ? new Date(n, 0, 1) : NaN }(e) : NaN }, format: function () { return null } }), Me()({ mode: a, searchTerm: "" === n ? void 0 : n, searchTerm2: "" === c ? void 0 : c }, r, { fullMessages: !1 }) } a(599); var we = { collection: "", query: "", field: "", mode: "", connector: "" }, Ne = function (e) { K(T.ADVANCED_SEARCH_PAGE), Object(n.useEffect)((function () { e.setMainClass("cdm-advanced-search-page") })); var t = Object(k.a)(), a = Object(x.g)(), r = Object(n.useContext)(q.a), o = Object(d.a)(r, 2), l = o[0], u = o[1], m = Object(n.useState)([]), f = Object(d.a)(m, 2), b = f[0], g = f[1], h = Object(n.useState)(!1), E = Object(d.a)(h, 2), v = E[0], I = E[1]; Object(n.useEffect)((function () { v || function () { var e = Object(s.a)(i.a.mark((function e() { var t, a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, X(); case 2: t = e.sent, a = t.map((function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { selected: !0 }) })), g(a), I(!0); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }()() }), [v]); var O = l.searchTermFields.fields.reduce((function (e, t) { return e[t.nick] = t.name, e }), {}), S = Object(p.a)({ all: H.a.decode(t.formatMessage({ id: "SITE_KEY_allfields", defaultMessage: " " })) }, O), j = Object(n.useCallback)((function () { var e; if (l.searchTermFields.dateSearchEnabled && (e = Te(l.dateQuery, { tooEarly: H.a.decode(t.formatMessage({ id: "SITE_error_KEY_theseconddatecannotbeearlierthanthefirstdate", defaultMessage: " " })), wrongFormat: H.a.decode(t.formatMessage({ id: "SITE_cdm_advanced_search_KEY_wrong_format_validation_error", defaultMessage: " " })), enterSecondDate: H.a.decode(t.formatMessage({ id: "SITE_cdm_advanced_search_KEY_please_enter_a_second_date", defaultMessage: " " })), enterFirstDate: H.a.decode(t.formatMessage({ id: "SITE_cdm_advanced_search_KEY_please_enter_a_first_date", defaultMessage: " " })) })), e) { var a = Object.values(e).map((function (e) { return e.join() })).filter((function (e, t, a) { return a.indexOf(e) === t })).join("\n"); return alert(a), e } }), [l, t]), _ = Object(n.useCallback)((function () { if (!j()) { var e; if (l.queries && l.queries.length > 0) { var t = l.queries.filter((function (e) { return e.searchTerm.length > 0 })), n = t.map((function (e) { return e.searchTerm })).filter(Boolean).join("!"), c = encodeURIComponent(n.replace("%", "%25")); e = Object(p.a)(Object(p.a)({}, we), {}, { collection: l.collection, query: c, mode: c ? t.map((function (e) { return e.mode })).filter(Boolean).join("!") : "", connector: c ? t.map((function (e) { return e.connector })).filter(Boolean) : "", field: c ? t.map((function (e) { return e.field })).filter(Boolean).join("!") : "" }), c && (e.connector.push(e.connector.shift()), e.connector = e.connector.join("!")) } var r = l.dateQuery, o = r.mode, i = r.searchTerm, s = r.searchTerm2; if (i || s) { var d = i.split("-").join(""), u = s.split("-").join(""), m = l.searchTermFields && l.searchTermFields.dateField ? l.searchTermFields.dateField : "date", f = ""; switch (o) { case "after": f = "".concat(parseInt(d, 10) + 1, "-99999999"); break; case "before": f = "00000000-".concat(parseInt(d, 10) - 1); break; case "between": f = "".concat(d, "-").concat(u); break; case "on": default: f = d }e = Object(p.a)(Object(p.a)({}, e), {}, { query: e.query ? "".concat(e.query, "!").concat(f) : f, field: e.field && e.query ? "".concat(e.field, "!").concat(m) : "".concat(m), mode: e.mode && e.query ? "".concat(e.mode, "!exact") : "exact", connector: e.connector && e.query ? "".concat(e.connector, "!and") : "and" }) } i.includes("%") ? window.location.href = ke(e) : a.push(ke(e)) } }), [j, a, l.collection, l.dateQuery, l.queries, l.searchTermFields]), y = Object(n.useCallback)((function () { u({ type: oe, payload: Object(p.a)({}, ee) }) }), [u]), M = Object(n.useCallback)((function () { u({ type: re, payload: [Object(p.a)({}, ee)] }), u({ type: se }) }), [u]), w = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(t) { var a, n, c; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (a = "" === t.collection || t.collection.split("!").length > 1 ? "all" : t.collection, n = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, Z(); case 2: t = e.sent, u({ type: ce, payload: t }); case 4: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), c = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, $(a); case 2: t = e.sent, u({ type: ne, payload: t }); case 4: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), "all" !== a) { e.next = 8; break } return e.next = 6, n(); case 6: e.next = 10; break; case 8: return e.next = 10, c(); case 10: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), [u]), N = Object(n.useCallback)((function () { var e, t; return (null === l || void 0 === l || null === (e = l.filters) || void 0 === e || null === (t = e.collections) || void 0 === t ? void 0 : t.length) > 0 ? l.filters.collections : b }), [b, l]); return l && l.isLoading ? c.a.createElement(pe, null) : c.a.createElement(c.a.Fragment, null, function () { var e = c.a.createElement(c.a.Fragment, null); return v && 0 === (null === l || void 0 === l ? void 0 : l.numberOfCollectionsSelected) && (e = c.a.createElement(z.a, { bsStyle: "danger" }, c.a.createElement(J.a, { name: "ban" }), H.a.decode(t.formatMessage({ id: "SITE_cdm_search_KEY_youmustselectonecollection", defaultMessage: " " })))), e }(), c.a.createElement("div", { className: "AdvancedSearch-container shared-box", id: "advancedSearchDiv" }, c.a.createElement(C.b, { title: H.a.decode(t.formatMessage({ id: "SITE_KEY_advancedsearch", defaultMessage: " " })) }), c.a.createElement("div", { className: "AdvancedSearch-sectionWrapper" }, c.a.createElement("div", { className: "col-md-10 AdvancedSearch-content" }, c.a.createElement("h1", null, H.a.decode(t.formatMessage({ id: "SITE_KEY_advancedsearch", defaultMessage: " " }))), c.a.createElement("hr", null), v && c.a.createElement(c.a.Fragment, null, c.a.createElement("h1", { tabIndex: 0 }, H.a.decode(t.formatMessage({ id: "SITE_KEY_collections", defaultMessage: " " }))), c.a.createElement(Ce, { getSelectedCollections: N, updateButtonText: H.a.decode(t.formatMessage({ id: "SITE_cdm_search_KEY_save", defaultMessage: " " })), afterSave: w })))), c.a.createElement("div", { className: "AdvancedSearch-sectionWrapper" }, c.a.createElement("div", { className: "col-md-10 AdvancedSearch-content" }, l.queries.map((function (e, t) { return c.a.createElement(fe, { key: t, index: t, showBooleanFields: t > 0, query: e, connector: l.queries[t].connector, fields: S, dispatch: u, disabled: 0 === (null === b || void 0 === b ? void 0 : b.length) || l.hasFilterChanges ? "disabled" : "" }) })), c.a.createElement("div", { className: "AdvancedSearch-addMoreButtonContainer row" }, c.a.createElement("div", { className: "col-xs-12 col-sm-2 col-sm-offset-10" }, c.a.createElement(W.a, { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_add_row", defaultMessage: " " })), title: H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_add_row", defaultMessage: " " })), bsStyle: "default", className: "cdm-btn", "data-id": "addMoreBtn", block: !0, disabled: 0 === (null === b || void 0 === b ? void 0 : b.length) || l.hasFilterChanges || l.queries.length > 3, onClick: y }, c.a.createElement("span", { className: "fa fa-plus-circle" }, "\xa0"), H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_add_row", defaultMessage: " " }))))))), c.a.createElement("div", { className: "AdvancedSearch-sectionWrapper" }, c.a.createElement("div", { className: "col-md-10 AdvancedSearch-content" }, l.searchTermFields.dateSearchEnabled ? c.a.createElement(me, { query: l.dateQuery, dispatch: u, disabled: 0 === (null === b || void 0 === b ? void 0 : b.length) || l.hasFilterChanges ? "disabled" : "" }) : null, c.a.createElement("div", { className: "AdvancedSearch-buttonsBox row" }, c.a.createElement("div", { className: "col-xs-6 col-sm-2 col-sm-offset-8" }, c.a.createElement(W.a, { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_clear", defaultMessage: " " })), title: H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_clear", defaultMessage: " " })), bsStyle: "link", block: !0, className: "cdm-btn", onClick: M }, H.a.decode(t.formatMessage({ id: "SITE_cdm_advance_search_KEY_clear", defaultMessage: " " })))), c.a.createElement("div", { className: "col-xs-6 col-sm-2" }, c.a.createElement(W.a, { "aria-label": H.a.decode(t.formatMessage({ id: "SITE_KEY_search", defaultMessage: " " })), title: H.a.decode(t.formatMessage({ id: "SITE_KEY_search", defaultMessage: " " })), bsStyle: "primary", block: !0, className: "cdm-btn", disabled: 0 === (null === b || void 0 === b ? void 0 : b.length) || l.hasFilterChanges, onClick: _, "data-id": "searchBtn" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_search", defaultMessage: " " }))))))))) }, Ae = a(10); function Fe(e) { return e ? H.a.decode(H.a.decode(e)) : e } var Le = Fe, Pe = (a(601), function (e) { var t = Object(k.a)(), a = H.a.decode(t.formatMessage({ id: "SITE_error_KEY_error_1", defaultMessage: " " })).replace("~CDMERRORCOLLECTION~", e.collectionId), n = D()(H.a.decode(a)); return c.a.createElement("div", { className: "CollectionNotFound-maincontainer shared-box" }, c.a.createElement("div", { className: "CollectionNotFound-maincontentCollectionNotFound shared-contentContainer" }, c.a.createElement(z.a, { bsStyle: "danger", className: " center-block" }, c.a.createElement(J.a, { name: "ban" }), " ", n))) }), Re = c.a.createContext(), Ke = function (e) { return [["collectionId", "collectionAlias", "alias"].find((function (t) { return e.hasOwnProperty(t) })), ["itemId", "id"].find((function (t) { return e.hasOwnProperty(t) }))] }, Be = function (e, t) { var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, n = Object(x.i)(), c = Ke(n), r = Object(d.a)(c, 1), o = r[0], l = w(n[o]), i = Ke(t), s = Object(d.a)(i, 1), u = s[0], m = N(t, u), f = void 0 === a ? !!t[u] : a; R(e, l, m, f) }, De = a(21), Ye = function (e, t, a) { var n = e.enabled ? "_working?v=".concat(e.version) : t && t.body ? "?v=".concat(t.body.version) : "", c = "/customizations/collection/".concat(a, "/").concat(a, "Styles.css"); return ["".concat(c).concat(n), c] }, He = function (e) { return "/customizations/collection".concat(e) }, Ue = Object.freeze({ PAGEVIEW: "pageview", SCREENVIEW: "screenview", EVENT: "event", TRANSACTION: "transaction", ITEM: "item", SOCIAL: "social", EXCEPTION: "exception", TIMING: "timing" }), Ve = function (e, t, a, n, c, r) { e.trackEvent(function (e, t, a, n, c, r) { return { hitType: e, eventCategory: t, eventAction: a, eventLabel: n, eventName: c, params: r } }(Ue.EVENT, t, a, n, c, r)) }, Ge = document.createElement("a"), qe = function (e) { return Ge.href = e, Ge.href }; a(602); var ze = /^https?:\/\//i, We = function (e) { var t = Object(x.i)().collectionAlias; t && (t = encodeURIComponent(t)); var a = Object(x.h)(), r = Object(S.useTracking)(), o = function () { var e, t, a = Object(x.i)().collectionAlias, r = Object(n.useContext)(Re), o = Object(n.useContext)(De.a).preview, l = a && 1 === a.split("!").length ? a : null; if (l) { var i = Ye(o, r, a), s = Object(d.a)(i, 2); e = s[0], t = s[1] } var u = document.querySelector("#collectionCSS"); return u && u.getAttribute("href").includes(t) ? null : l ? c.a.createElement("link", { rel: "stylesheet", href: e, id: "collectionCSS" }) : null }(); Be(T.COLLECTION_LANDING, { collectionAlias: t }); var l = Object(k.a)(), i = Object(n.useContext)(Re), s = H.a.decode(l.formatMessage({ id: "SITE_cdm_landingepage_KEY_aboutthiscollection", defaultMessage: " " })), u = D()(H.a.decode(s)), m = function () { return "/customizations/collection/".concat(i.body.id, "/") }, f = function (e) { return ze.test(e.url) ? c.a.createElement("a", { href: e.url, rel: "noopener noreferrer", target: "_blank" }, Fe(e.text)) : c.a.createElement(Ae.b, { to: e.url }, Fe(e.text)) }, b = i && 200 !== i.status; return Object(n.useEffect)((function () { e.setMainClass("cdm-collection-page cdm-collection-page-".concat(t, " cdm-collection-landing-page")) })), i && i.body ? c.a.createElement("div", { className: "CollectionLayout-container" }, c.a.createElement("div", { className: "CollectionLanding-maincontainer shared-box", "data-id": "collectionLandingContainer" }, c.a.createElement(C.b, { title: Fe(i.body.pageTitle) }), b ? c.a.createElement(Pe, { collectionId: t }) : c.a.createElement("div", { className: "CollectionLanding-maincontentLanding shared-contentContainer" }, o, function () { var e = Fe(i.body.pageTitle); return i.body.pageTitle ? c.a.createElement("h1", { "data-id": "collectionPageTitle", className: "CollectionLanding-pageTitle", tabIndex: 0, title: e }, e) : void 0 }(), c.a.createElement("div", { className: "grayDividerLine" }), "noImage" !== i.body.landingPageImagePreferences && i.body.landingPageImage ? c.a.createElement("div", { className: "CollectionLanding-mainLandingImage" }, c.a.createElement("img", { "data-id": "collectionLandingImage", tabIndex: 0, alt: H.a.decode(i.body.landingPageImage.imageAltText), src: m() + i.body.landingPageImage.smallImagePath, srcSet: "".concat(m() + i.body.landingPageImage.smallImagePath, " 768w,\n                                 ").concat(m() + i.body.landingPageImage.mediumImagePath, " 1199w,\n                                 ").concat(m() + i.body.landingPageImage.largeImagePath, " 1280w") })) : void 0, c.a.createElement("div", { className: "CollectionLanding-aboutCollection" }, c.a.createElement("h1", { tabIndex: 0 }, u)), i.body.pageText ? c.a.createElement("div", { "data-id": "collectionPageText", tabIndex: 0 }, D()(Fe(i.body.pageText))) : void 0, "" !== i.body.browseButtonText && i.body.browseButtonEnabled ? c.a.createElement("div", { className: "text-center" }, c.a.createElement(Ae.b, { "data-id": "browseButton", to: { pathname: "/digital/collection/".concat(i.body.id, "/search"), state: Object(p.a)(Object(p.a)({}, a.state), {}, { collectionScope: a.pathname }) }, onClick: function () { return Ve(r, "collection landing", "click", "browse", "browse collection", { collection_alias: t }) }, className: "CollectionLanding-landingBrowseButton cdm-btn btn btn-lg btn-primary" }, Fe(i.body.browseButtonText))) : void 0, c.a.createElement("div", { className: "CollectionLanding-landingLinkContainer" }, c.a.createElement("ul", { className: "CollectionLanding-landingLinks" }, i.body.suggestedTopicsEnabled && i.body.suggestedTopics.map((function (e) { return c.a.createElement("li", { "data-id": "suggestedTopicList", key: e.url }, f(e)) }))))))) : c.a.createElement(be, null) }, Qe = a(175), Je = a.n(Qe), Xe = Object(n.createContext)(), Ze = Object(n.createContext)(), $e = function () { var e = Object(s.a)(i.a.mark((function e(t, a) { var n, c, r, o; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : ""), c = "".concat(n, "/customizations/global/pages/").concat(a, ".html"), t && (c = "".concat(n, "/customizations/collection/").concat(t, "/pages/").concat(a, ".html")), e.prev = 3, e.next = 6, fetch(c, Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 6: return r = e.sent, e.next = 9, r.text(); case 9: return o = e.sent, e.abrupt("return", { body: o, status: r.status }); case 13: return e.prev = 13, e.t0 = e.catch(3), e.abrupt("return", e.t0); case 16: case "end": return e.stop() } }), e, null, [[3, 13]]) }))); return function (t, a) { return e.apply(this, arguments) } }(), et = { enableHeader: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { headerEnabled: !0 }) }, disableHeader: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { headerEnabled: !1 }) } }, tt = { enableFooter: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { footerEnabled: !0 }) }, disableFooter: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { footerEnabled: !1 }) } }, at = function (e, t) { return et[t.type](e, t) }, nt = function (e, t) { return tt[t.type](e, t) }, ct = (a(638), function (e) { var t = Object(k.a)(), a = H.a.decode(t.formatMessage({ id: "SITE_error_KEY_error_9", defaultMessage: " " })); K(T.NOTFOUND_PAGE), Object(n.useEffect)((function () { e.setMainClass("cdm-notfound-page") })); var r = Object(n.useCallback)((function () { e.history ? e.history.goBack() : window.history.back() }), [e.history]); return c.a.createElement("div", null, c.a.createElement("h4", null, a, "!"), c.a.createElement("p", null, c.a.createElement("button", { onClick: r }, "\u2190 ", H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_back" }))))) }), rt = function (e) { var t = Object(x.i)(), a = t.collectionAlias, r = t.filename, o = Object(x.h)(), l = function (e, t) { var a = Object(n.useState)({ html: null, status: null, isLoading: !0 }), c = Object(d.a)(a, 2), r = c[0], o = c[1]; return Object(n.useEffect)((function () { t && function () { var e = Object(s.a)(i.a.mark((function e(t, a) { var n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, $e(t, a); case 2: n = e.sent, o({ html: n.body, status: n.status, isLoading: !1 }); case 4: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }()(e, t) }), [e, t]), r }(a, r), u = Object(n.useState)(), m = Object(d.a)(u, 2), f = m[0], b = m[1], p = Object(n.useState)(), g = Object(d.a)(p, 2), h = g[0], E = g[1], v = Object(n.useState)({ enableHeader: !1, enableFooter: !1, title: "", body: "", isLoading: !0, error: {} }), I = Object(d.a)(v, 2), O = I[0], S = I[1], j = o.pathname + (o.hash ? o.hash : ""), _ = Object(n.useState)({ collectionAlias: a, filename: r, locationPathname: j }), y = Object(d.a)(_, 2), k = y[0], M = y[1]; Object(n.useEffect)((function () { h && f ? h !== O && f !== r && setTimeout((function () { M({ collectionAlias: a, filename: r, locationPathname: j }), E(O), b(r) }), 250) : (E(O), b(r)) }), [O, a, r, j, f, h]), R(T.CUSTOM_PAGE, w(a, null, r), N(k), !O.isLoading); var A = a ? "cdm-collection-page cdm-collection-page-".concat(a, " cdm-custom-page") : "cdm-custom-page"; Object(n.useEffect)((function () { e.setMainClass(A) })); var F = Object(n.useContext)(Ze), L = Object(d.a)(F, 2), P = L[0].headerEnabled, K = L[1], B = Object(n.useContext)(Xe), D = Object(d.a)(B, 2), Y = D[0].footerEnabled, H = D[1], U = Object(n.useCallback)((function (e) { var t = Je()(e), a = void 0 === t || void 0 === t.attributes || void 0 === t.attributes.header ? P : t.attributes.header, n = void 0 === t || void 0 === t.attributes || void 0 === t.attributes.header ? Y : t.attributes.footer; K(a ? { type: "enableHeader" } : { type: "disableHeader" }), H(n ? { type: "enableFooter" } : { type: "disableFooter" }), S({ enableHeader: a, enableFooter: n, title: t && t.attributes && t.attributes.title ? t.attributes.title : "", body: t && t.body ? t.body : "", isLoading: !1 }) }), [K, H, P, Y]); return Object(n.useEffect)((function () { l.html && U(l.html) }), [r, U, l, K, H]), O.isLoading ? null : 200 === l.status ? c.a.createElement("div", null, c.a.createElement(C.b, { title: O.title }), c.a.createElement("div", { dangerouslySetInnerHTML: { __html: O.body } })) : c.a.createElement(ct, { setMainClass: e.setMainClass }) }, ot = function (e) { var t = Object(x.i)().collectionAlias, a = Object(x.h)(), r = e.customHtml, o = Object(n.useState)({ enableHeader: !1, enableFooter: !1, title: "", body: "", isLoading: !0, error: {} }), l = Object(d.a)(o, 2), i = l[0], s = l[1], u = a.pathname + (a.hash ? a.hash : ""), m = T.HOME_PAGE; a.pathname.includes("/collection/") && (m = T.COLLECTION_LANDING), R(m, w(t, null, r), N({ collectionAlias: t, customHtml: r, locationParam: u }), !i.isLoading); var f = m === T.COLLECTION_LANDING ? "cdm-collection-page cdm-collection-page-".concat(t, " cdm-collection-landing-page") : "cdm-home-page"; Object(n.useEffect)((function () { e.setMainClass(f) })); var b = Object(n.useContext)(Ze), p = Object(d.a)(b, 2), g = p[0].headerEnabled, h = p[1], E = Object(n.useContext)(Xe), v = Object(d.a)(E, 2), I = v[0].footerEnabled, O = v[1], S = Object(n.useCallback)((function (e) { var t = Je()(e), a = void 0 === t || void 0 === t.attributes || void 0 === t.attributes.header ? g : t.attributes.header, n = void 0 === t || void 0 === t.attributes || void 0 === t.attributes.header ? I : t.attributes.footer; h(a ? { type: "enableHeader" } : { type: "disableHeader" }), O(n ? { type: "enableFooter" } : { type: "disableFooter" }), s({ enableHeader: a, enableFooter: n, title: t && t.attributes && t.attributes.title ? t.attributes.title : "", body: t && t.body ? t.body : "", isLoading: !1 }) }), [h, O, g, I]); return Object(n.useEffect)((function () { S(r) }), [S, r, h, O]), i.isLoading ? null : r ? c.a.createElement("div", null, c.a.createElement(C.b, { title: i.title }), c.a.createElement("div", { dangerouslySetInnerHTML: { __html: i.body } })) : c.a.createElement(ct, { setMainClass: e.setMainClass }) }, lt = [/^[a-z]+:/i], it = document.createElement("a"); function st(e) { return it.href = e, it.href } var dt = function (e) { return lt.some((function (t) { return t.test(e) })) }, ut = function () { var e = Object(S.useTracking)(); return Object(n.useCallback)(function () { var t = Object(s.a)(i.a.mark((function t(a, n, c, r, o) { var l; return i.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: l = function (e, t, a, n) { return { hitType: e, eventCategory: t, eventAction: a, eventLabel: n, eventName: r, params: o } }, e.trackEvent(l(Ue.EVENT, a, n, c)); case 2: case "end": return t.stop() } }), t) }))); return function (e, a, n, c, r) { return t.apply(this, arguments) } }(), [e]) }, mt = function () { var e = Object(n.useContext)(b), t = function () { var e = Object(x.g)(); return function () { e.go(0) } }(); return function () { var a = Object(s.a)(i.a.mark((function a() { return i.a.wrap((function (a) { for (; ;)switch (a.prev = a.next) { case 0: return a.next = 2, I(); case 2: e.refreshAuthenticationData(), t(); case 4: case "end": return a.stop() } }), a) }))); return function () { return a.apply(this, arguments) } }() }, ft = a(26), bt = (a(639), Object(n.memo)((function () { var e = Object(k.a)(), t = Object(S.useTracking)(), a = Object(x.i)().collectionId, r = ut(), o = mt(), l = Object(x.g)(), i = Object(x.h)(), s = Object(n.useContext)(De.a), d = Object(n.useContext)(b), u = s.header.navmenu, f = Object(n.useCallback)((function () { r("navigation", "click", "Footer Log out Link", "log out link", { source: "footer" }), o() }), [o, r]), g = Object(n.useCallback)((function (e, t, a, n, c, r) { Ve(e, t, a, n, c, r) }), []), h = Le(e.formatMessage({ id: "SITE_CONFIG_navLinksHome", defaultMessage: " " })), E = Le(e.formatMessage({ id: "SITE_CONFIG_navLinksAbout", defaultMessage: " " })), v = Le(e.formatMessage({ id: "SITE_CONFIG_navLinksBrowse", defaultMessage: " " })), I = s && s.homepage && s.homepage.customUrlEnabled && s.homepage.customURL, O = I ? s.homepage.customURL : "/digital", j = I ? c.a.createElement("li", null, c.a.createElement("a", { href: O, "aria-label": h, title: h, onClick: function () { return g(t, "navigation", "click", "Footer Home link", "home link", { source: "footer" }) } }, h)) : c.a.createElement("li", null, c.a.createElement(Ae.b, { to: O, "aria-label": h, title: h, onClick: function () { return g(t, "navigation", "click", "Footer Home link", "home link", { source: "footer" }) } }, h)), _ = c.a.createElement("li", null, c.a.createElement(Ae.b, { to: "/digital/about", "aria-label": E, title: E, onClick: function () { return g(t, "navigation", "click", "Footer About link", "about link", { source: "footer" }) } }, E)), y = c.a.createElement("li", null, function () { var a = null; if (d.name) { var n = H.a.decode(e.formatMessage({ id: "SITE_KEY_logout", defaultMessage: " " })); a = c.a.createElement(Ae.b, { to: "/digital", "aria-label": n, title: n, onClick: f }, n) } else { var r = H.a.decode(e.formatMessage({ id: "SITE_KEY_login", defaultMessage: " " })); a = c.a.createElement(Ae.b, { to: { pathname: "/digital/login", state: Object(p.a)(Object(p.a)({}, i.state), {}, { prevPath: window.location.pathname }) }, "aria-label": r, title: r, onClick: function () { return g(t, "navigation", "click", "Footer Log in link", "log in link", { source: "footer" }) } }, r) } return a }()), C = c.a.createElement(J.a, { role: "presentation", name: "external-link", className: "FooterNavigationLinks-footerExternalLinkIcon" }, c.a.createElement("span", { className: "FooterNavigationLinks-hideText" }, "Opens in External Window")), M = c.a.createElement(c.a.Fragment, null, u.enableHome ? j : null, u.enableBrowse ? function () { var e = "/digital/search", n = []; (l.location && l.location.state && l.location.state.collectionScope && (n = Object(ft.c)(l.location.state.collectionScope)), n && n.length > 0) ? e = { pathname: 1 === n.length ? "/digital/collection/".concat(n[0], "/search") : "/digital/search/collection/".concat(n.join("!")), state: Object(p.a)(Object(p.a)({}, i.state), {}, { collectionScope: i.pathname }) } : e = (n = Object(ft.d)(i)) && n.length > 0 ? { pathname: 1 === n.length ? "/digital/collection/".concat(n[0], "/search") : "/digital/search/collection/".concat(n.join("!")), state: Object(p.a)(Object(p.a)({}, i.state), {}, { collectionScope: i.pathname }) } : a ? "digital/collection/".concat(a, "/search") : "/digital/search"; return c.a.createElement("li", null, c.a.createElement(Ae.b, { to: e, "aria-label": v, title: v, onClick: function () { return g(t, "navigation", "click", "Footer Browse link", "browse link", { source: "footer" }) } }, v)) }() : null, u.enableAbout ? _ : null, c.a.createElement(m.Consumer, null, (function (e) { return u.links.map((function (a, n) { var r, o = e.messages[a.title], l = "_blank"; if (o) if (dt(a.url)) a.url.startsWith("mailto:") ? l = "" : !1 === a.openInWindow && (l = "_self", C = ""), r = c.a.createElement("li", { key: n }, c.a.createElement("a", { title: Le(o), "aria-label": Le(o), href: a.url, target: l, onClick: Ve.bind(this, t, "navigation", "click", "Footer link:".concat(qe(a.url)), "custom link", { link: "".concat(qe(a.url)), source: "footer" }) }, Le(o), C)); else { a.url.startsWith("mailto:") ? l = "" : !1 === a.openInWindow && (l = "", C = ""); var i = a.url.startsWith("/") ? a.url : "/".concat(a.url); r = "" !== i ? c.a.createElement("li", { key: n }, c.a.createElement(Ae.b, { to: i, role: "link", title: Le(o), target: l, onClick: Ve.bind(this, t, "navigation", "click", "Footer link:".concat(qe(i)), "custom link", { link: "".concat(qe(i)), source: "footer" }) }, Le(o), C)) : void 0 } return r })).filter((function (e) { return void 0 !== e })) })), u.enableLogin ? y : null); return c.a.createElement("ul", { className: "FooterNavigationLinks-footerLinksHolder" }, M) }))), pt = (a(640), function () { var e = Object(S.useTracking)(), t = function (t, a) { a(t.code), Ve(e, "footer", "click", "language: ".concat(t.name), "change language", { language: t.name }) }; return c.a.createElement(De.a.Consumer, null, (function (e) { return c.a.createElement(m.Consumer, null, (function (a) { return c.a.createElement("div", { className: "Footer-footerLanguageHolder" }, e.language.selectorEnabled && e.language.languages.map((function (e, n) { return function (e, a, n) { return c.a.createElement("span", { key: n }, c.a.createElement("a", null, c.a.createElement("button", { id: "language-link-".concat(e.code), "aria-label": e.name, title: e.name, onClick: t.bind(void 0, e, a) }, e.name))) }(e, a.changeLanguage, n) }))) })) })) }), gt = (a(641), Object(n.memo)((function () { var e = Object(k.a)(); return c.a.createElement("div", { className: "Footer-footerWrapper cdm-footer" }, c.a.createElement("div", { className: "Footer-footerContainer shared-box " }, c.a.createElement(bt, null), c.a.createElement(pt, null), c.a.createElement("div", { className: "text-center", id: "trademark" }, U(e, "SITE_KEY_poweredbycontentdmlinked")))) }))), ht = (a(642), function () { var e = Object(k.a)(), t = Object(x.g)(), a = Object(x.h)(), r = H.a.decode(e.formatMessage({ id: "SITE_KEY_advancedsearch", defaultMessage: " " })), o = Object(S.useTracking)(), l = Object(n.useState)(""), u = Object(d.a)(l, 2), m = u[0], f = u[1], b = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(a) { var n, c; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = encodeURIComponent(a), e.next = 3, Object(ft.d)(t.location); case 3: (c = e.sent) && c.length > 0 && (c = c.join("!")), f(""), a.includes("%") ? window.location.href = ke({ collection: c, query: n }) : t.push(ke({ collection: c, query: n })); case 7: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), [t]), g = Object(n.useCallback)((function (e) { "Enter" === e.key && (Ve(o, "search", "enter", "query: ".concat(m), "search", { query: "".concat(m), type: "simple" }), b(m)) }), [b, m, o]), h = Object(n.useCallback)((function () { Ve(o, "search", "click", "query: ".concat(m), "search", { query: "".concat(m), type: "simple" }), b(m) }), [b, m, o]); return c.a.createElement("div", { className: "SimpleSearch-searchBox" }, c.a.createElement("div", { className: "SimpleSearch-searchInput" }, c.a.createElement("input", { onKeyDown: g, onChange: function (e) { return f(e.target.value) }, tabIndex: "4", id: "search-input", className: "SimpleSearch-searchInputControl", type: "search", "aria-label": "Search Area", value: m }), c.a.createElement("br", null), c.a.createElement("div", { className: "SimpleSearch-searchInputLabel" }, c.a.createElement(Ae.b, { to: { pathname: "/digital/search/advanced", state: Object(p.a)(Object(p.a)({}, a.state), {}, { collectionScope: a.pathname }) }, onClick: function () { Ve(o, "advanced search", "click", "Advanced Search Link", "open Advanced Search") }, tabIndex: "6", className: "SimpleSearch-headerAdvancedSearchButtonLink", "data-id": "advancedSearchDesktop" }, r))), c.a.createElement("div", { className: "SimpleSearch-searchHolder" }, c.a.createElement(W.a, { id: "search-button", type: "button", "aria-label": "Search", tabIndex: "5", className: "transparentIcon headerIconButton SimpleSearch-headerButtonPadding", onClick: h }, c.a.createElement("a", { className: "headerIcon" }, c.a.createElement(J.a, { name: "search", size: "2x" }))), c.a.createElement(W.a, { id: "advanced-search-button", type: "button", "aria-label": "Advanced Search", tabIndex: "0", onClick: function () { Ve(o, "advanced search", "click", "Advanced Search Link", "open Advanced Search") }, className: "transparentIcon headerIconButton SimpleSearch-advancedSearch SimpleSearch-headerButtonPadding" }, c.a.createElement(Ae.b, { className: "headerIcon", to: "/digital/search/advanced" }, c.a.createElement(J.a, { name: "plus-circle", size: "2x" }))))) }), Et = (a(643), function () { Object(n.useEffect)((function () { var e = document.body.className.split(" "); e.push("preview-mode"), document.body.className = e.join(" ") }), []); var e = Object(n.useCallback)((function () { window.location.search = "?_preview=false" }), []); return c.a.createElement("div", { className: "PreviewBanner-previewBarContainer" }, c.a.createElement(W.a, { className: "btn-lg pull-right", onClick: e }, "Exit Preview Mode")) }), vt = a(802), It = a(808), Ot = a(69), St = function () { var e = Object(k.a)(), t = Object(S.useTracking)(), a = Object(n.useContext)(b), r = Object(n.useContext)(m), o = Object(n.useContext)(De.a), l = mt(), d = ut(), u = Object(x.h)(), f = Object(x.g)(), g = function () { return o.collectionId ? "/collection/".concat(o.collectionId, "/search") : "/digital/search" }, h = Object(n.useCallback)((function () { d("navigation", "click", "Log in link", "log in link", { source: "hamburger menu" }) }), [d]), E = Object(n.useCallback)(Object(s.a)(i.a.mark((function e() { return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: d("navigation", "click", "Log out link", "log out link", { source: "hamburger menu" }), l(); case 2: case "end": return e.stop() } }), e) }))), [d, l]), v = H.a.decode(e.formatMessage({ id: "SITE_CONFIG_navLinksHome", defaultMessage: " " })), I = H.a.decode(e.formatMessage({ id: "SITE_CONFIG_navLinksBrowse", defaultMessage: " " })), O = H.a.decode(e.formatMessage({ id: "SITE_CONFIG_navLinksAbout", defaultMessage: " " })), j = (o.homepage || {}).customURL || "/digital/", _ = j.includes("http"); return c.a.createElement("div", { className: "Header-hamburgerHolder" }, c.a.createElement(It.a, { id: "bg-nested-dropdown-header", pullRight: !0 }, c.a.createElement(It.a.Toggle, { noCaret: !0, className: "headerIconButton Header-headerButtonPadding", "aria-label": "Navigation Menu", onClick: function (e) { e.stopPropagation(), Ve(t, "navigation", "click", "hamburger menu", "open hamburger menu") } }, c.a.createElement("a", { className: "headerIcon" }, c.a.createElement(J.a, { name: "bars", size: "2x" }))), c.a.createElement(It.a.Menu, { className: "Header-headerMenuLinks", tabIndex: 6, id: "dropdown-menu-pull-right" }, o.header.navmenu.enableHome ? c.a.createElement(vt.a, { key: "1", eventKey: "1", href: j, to: j, componentClass: _ ? Ot.a : Ae.b, onClick: function () { Ve(t, "navigation", "click", "home link", "home link", { source: "hamburger menu" }) } }, c.a.createElement("h3", null, Fe(v))) : null, o.header.navmenu.enableBrowse ? c.a.createElement(vt.a, { key: "2", eventKey: "2", to: function () { var e, t = []; (f.location && f.location.state && f.location.state.collectionScope && (t = Object(ft.c)(f.location.state.collectionScope)), t && t.length > 0) ? e = { pathname: 1 === t.length ? "/digital/collection/".concat(t[0], "/search") : "/digital/search/collection/".concat(t.join("!")), state: Object(p.a)(Object(p.a)({}, u.state), {}, { collectionScope: u.pathname }) } : e = (t = Object(ft.d)(u)) && t.length > 0 ? { pathname: 1 === t.length ? "/digital/collection/".concat(t[0], "/search") : "/digital/search/collection/".concat(t.join("!")), state: Object(p.a)(Object(p.a)({}, u.state), {}, { collectionScope: u.pathname }) } : g(); return e }(), href: g(), componentClass: Ae.b, onClick: function () { Ve(t, "navigation", "click", "browse", "browse link", { source: "hamburger menu" }) } }, c.a.createElement("h3", null, Fe(I))) : null, o.header.navmenu.enableAbout ? c.a.createElement(vt.a, { key: "3", eventKey: "3", to: "/digital/about", href: "/digital/about", componentClass: Ae.b, onClick: function () { Ve(t, "navigation", "click", "About Link", "about link", { source: "hamburger menu" }) } }, c.a.createElement("h3", null, Fe(O))) : null, o.header.navmenu.links.map((function (e, a) { if (e.url) { var n = r.messages[e.title], o = "_blank"; if (n) { e.url.startsWith("mailto:") && (o = ""); var l = c.a.createElement(J.a, { role: "presentation", name: "external-link", className: "Header-hamburgerExternalLinkIcon" }, c.a.createElement("span", { className: "Header-hideText" }, "Opens in External Window")); if (dt(e.url)) { var i = ""; return e.url.match(/digital\/saved$/) && (i = c.a.createElement(J.a, { className: "Header-faCustom star", name: "star" })), !1 === e.openInWindow && "" !== o && (o = "_self", l = ""), c.a.createElement(vt.a, { key: a, eventKey: a + 3, href: e.url, target: o, onClick: function () { Ve(t, "navigation", "click", "link:".concat(e.url), "custom link", { source: "header", link: e.url }) } }, " ", c.a.createElement("h3", null, i, Fe(n), l)) } var s = e.url.match(/^digital\/saved$/), d = ""; s && (d = c.a.createElement(J.a, { className: "Header-faCustom star", name: "star" })); var u = e.url.startsWith("/") ? e.url : "/".concat(e.url); if ("" !== u) { var m = c.a.createElement(vt.a, { componentClass: Ae.b, key: a + 10, eventKey: a + 10, to: u, href: u, onClick: function () { Ve(t, "navigation", "click", "link:".concat(e.url), "custom link", { source: "header", link: e.url }) } }, c.a.createElement("h3", null, d, Fe(n))), f = function (e, a, n, r, o, l, i) { var s = null; return !0 === e.openInWindow && (s = c.a.createElement(vt.a, { key: o, eventKey: o + 3, to: a, href: a, componentClass: Ae.b, target: l, onClick: function () { Ve(t, "navigation", "click", "link:".concat(qe(a)), "custom link", { source: "header", link: qe(a) }) } }, c.a.createElement("h3", null, i ? c.a.createElement(J.a, { className: "Header-faCustom star", name: "star" }) : void 0, Fe(n), r))), s }(e, u, n, l, a, o, s); return f || m } return } } })).filter((function (e) { return void 0 !== e })), function () { var t = H.a.decode(e.formatMessage({ id: "SITE_KEY_logout", defaultMessage: " " })), n = H.a.decode(e.formatMessage({ id: "SITE_KEY_login", defaultMessage: " " })); if (o.header.navmenu.enableLogin) return a.name ? c.a.createElement(vt.a, { onClick: E }, c.a.createElement("h3", null, "".concat(t, ", ").concat(a.name))) : c.a.createElement(vt.a, { componentClass: Ae.b, eventKey: "5", to: { pathname: "/digital/login", state: Object(p.a)(Object(p.a)({}, u.state), {}, { prevPath: window.location.pathname }) }, href: "/digital/login", onClick: h }, c.a.createElement("h3", null, n)) }()))) }, jt = (a(660), Object(n.memo)((function () { var e = Object(S.useTracking)(), t = Object(k.a)(), a = c.a.createRef(), r = Object(n.useContext)(Re), o = Object(n.useContext)(De.a), l = Object(n.useState)({ isBanner: !1, logoTopMargin: 0, logoLeftMargin: 0 }), i = Object(d.a)(l, 2), s = i[0], u = i[1], m = function () { var e, t, n, c = a.current, r = 0, o = 0; !function () { var e = a.current; return 0 !== e.naturalHeight && 150 * e.naturalWidth / e.naturalHeight > 800 && e.naturalWidth / e.naturalHeight > 2 }() ? (c.naturalHeight < 150 && (r = (150 - c.naturalHeight) / 2), c.naturalWidth < 150 && (o = (150 - c.naturalWidth) / 2), e = !1, t = r, n = o) : (e = !0, t = r, n = o), u(Object(p.a)(Object(p.a)({}, s), {}, { isBanner: e, logoTopMargin: t, logoLeftMargin: n, opacity: 1 })) }, f = r && r.body && r.body.header && !!r.body.header.overrideHeaderGlobal && r.body.header || o.header, b = s.isBanner ? "Header-overlayTitleText " : "", g = s.isBanner ? "Header-verticalCenter " : "", h = s.isBanner ? "Header-logoImageBanner " : "", E = s.isBanner ? "Header-bannerPadding " : "", v = { marginTop: s.logoTopMargin, marginLeft: s.logoLeftMargin, opacity: s.opacity || 0 }, I = t.messages.SITE_CONFIG_siteName ? H.a.decode(t.formatMessage({ id: "SITE_CONFIG_siteName", defaultMessage: "" })) : "", O = function (e) { var t; t = r && 200 === r.status && r.body.header.overrideHeaderGlobal && r.body.header.logo.url && r.body.header.logo.useOptional ? r.body.header.logo.url : e.header.logo.url; var n = "".concat("").concat(t); return c.a.createElement("img", { "data-id": "siteLogo", alt: I, src: n, tabIndex: 1, className: "Header-logoImage " + h + E, style: v, onLoad: m, ref: a }) }, j = function (e) { var t = "/"; if (r && r.body) { var a = r.body.header && r.body.header.overrideHeaderGlobal, n = r.body.customUrlEnabled && null != r.body.customURL ? r.body.customURL : null; t = a ? n || "/digital/collection/".concat(r.body.id) : (e.homepage || {}).customURL || t } else t = (e.homepage || {}).customURL || t; return t }; return c.a.createElement("div", { className: "Header-headerContainer navbar-default" }, o.preview.enabled ? c.a.createElement(Et, null) : void 0, c.a.createElement("div", { className: "Header-header" }, c.a.createElement("div", { className: "Header-logoNameContainer" }, c.a.createElement("div", { className: "Header-logoHolder" }, o.header.logo.url && o.header.logo.useOptional ? c.a.createElement("div", { className: "Header-logoWrapper" }, function (t) { return j(t).includes("http") ? c.a.createElement("a", { href: j(t), tabIndex: -1, onClick: function () { Ve(e, "navigation", "click", "Header Home", "home link", { source: "header" }) } }, O(t)) : c.a.createElement(Ae.b, { to: j(t), tabIndex: -1, onClick: function () { Ve(e, "navigation", "click", "Header Home", "home link", { source: "header" }) } }, O(t)) }(o)) : void 0), c.a.createElement("div", { id: "headerNameDiv", className: "Header-nameHolder " + ("" === f.logo.url || !f.logo.useOptional || f.hideHeaderText ? "Header-mobileTitleDisplay " : "") + ("" !== f.logo.url && f.logo.useOptional ? "Header-mobileTitleHide " : "") + ("" !== f.logo.url && f.logo.useOptional && f.hideHeaderText ? "Header-browserTabletTitleHide " : "") }, function (t) { return c.a.createElement("a", { href: j(t), tabIndex: -1, onClick: function () { Ve(e, "navigation", "click", "Header Home") } }, c.a.createElement("h2", { className: "Header-titleText header-text " + b, tabIndex: 2, "data-id": "headerText" }, function () { var e = r && r.messages && r.messages.SITE_CONFIG_siteName && r.messages.SITE_CONFIG_siteName.length > 0 ? r.messages.SITE_CONFIG_siteName : I; return Le(e) }())) }(o))), c.a.createElement("div", { className: "Header-controls " + g }, c.a.createElement(St, null), c.a.createElement(ht, null))), c.a.createElement("div", { className: "clearfix" }), c.a.createElement("div", { className: "Header-valerieBar" }, c.a.createElement("div", { className: "Header-valerieBarContainer" }))) }))), _t = function () { var e = Object(s.a)(i.a.mark((function e() { var t, a, n, c, r = arguments; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return t = r.length > 0 && void 0 !== r[0] ? r[0] : 1, a = r.length > 1 && void 0 !== r[1] ? r[1] : 10, n = "/digital/api/collections", e.prev = 3, e.next = 6, fetch("".concat(n, "?startPage=").concat(t, "&count=").concat(a), Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 6: return c = e.sent, e.next = 9, c.json(); case 9: return e.abrupt("return", e.sent); case 12: e.prev = 12, e.t0 = e.catch(3), console.error(e.t0); case 15: case "end": return e.stop() } }), e, null, [[3, 12]]) }))); return function () { return e.apply(this, arguments) } }(), yt = (a(661), a(443)); function Ct(e, t, a, n) { var c = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "h3", r = 1.5; switch (c) { case "h2": r = 1.2 }a = parseInt(t, 10) * r; var o = parseInt(a, 10) * n, l = "\n        display: block;\n        max-height: ".concat(o, "px;\n        font-size: ").concat(t, "px;\n        line-height: ").concat(a, "px;\n        -webkit-line-clamp: ").concat(n, ";\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin: 0 auto;\n    "); return e && e.match(/\s+/) ? l += "display: -webkit-box;" : l += "white-space: nowrap;", l } function kt(e, t) { return Object(yt.a)(e, t) } var xt = function (e) { var t = Object(S.useTracking)(), a = c.a.createRef(), r = c.a.createRef(); Object(n.useEffect)((function () { o() }), []); var o = function () { a.current.style.cssText = Ct(a.current.innerText, kt(a.current, "font-size").replace(/[^-\d.]/g, ""), kt(a.current, "line-height").replace(/[^-\d.]/g, ""), 2), r.current.style.cssText = Ct(r.current.innerText, kt(r.current, "font-size").replace(/[^-\d.]/g, ""), kt(r.current, "line-height").replace(/[^-\d.]/g, ""), 3) }, l = function (e) { return dt(e) ? Ve(t, "home page", "click", e, "open collection", { collection_alias: e }) : Ve(t, "home page", "click", "/digital/collection/".concat(e), "open collection", { collection_alias: e }) }, i = function () { var t = e.alias; return e.customURL || "/digital/collection/".concat(t) }, s = function (t) { var n = "/digital/image/".concat(t, "/thumbnail"); return c.a.createElement("div", null, c.a.createElement("div", { className: "Card-cardImageHolder" }, c.a.createElement("img", { className: "Card-cardImage", src: n + (e.preview.enabled ? "?v=" + e.preview.version : ""), alt: e.title })), c.a.createElement("div", { className: "Card-cardTextHolder" }, c.a.createElement("div", { "data-alias": "".concat(t) }, c.a.createElement("h2", { ref: a, className: "titleDiv" }, e.title)), function () { var t = document.createElement("p"); t.innerHTML = H.a.decode(e.description); var a = t.innerText; return c.a.createElement("div", null, c.a.createElement("p", { ref: r, className: "Card-cardText truncation", dangerouslySetInnerHTML: { __html: a } })) }())) }; return c.a.createElement("div", { className: "Card-cardcontainer col-sm-6 " + T.COLLECTION_CARD }, function () { var t = e.customURL, a = e.alias; return t ? c.a.createElement("a", { href: i(), className: "Card-fullcard shared-box", onClick: function () { l(t || a) } }, s(a)) : c.a.createElement(Ae.b, { to: i(), className: "Card-fullcard shared-box", onClick: function () { l(t || a) } }, s(a)) }()) }, Mt = a(810), Tt = (a(662), { canPlayAudio: function (e) { return document && "" !== document.createElement("audio").canPlayType(e) }, canPlayVideo: function (e) { return document && "" !== document.createElement("video").canPlayType(e) }, isMyScriptLoaded: function (e) { for (var t = document.getElementsByTagName("script"), a = t.length; a--;)if (t[a].src === e) return !0; return !1 }, cleanUpAddThis: function () { for (var e in window) try { (/^addthis/.test(e) || /^_at/.test(e)) && window[e] && window[e].configurable && delete window[e] } catch (t) { console.error(e, t) } window.addthis = null, window._adr = null, window._atc = null, window._atd = null, window._ate = null, window._atr = null, window._atw = null, window.addthis_share = null }, removeAddThisScript: function (e) { if (this.isMyScriptLoaded(e)) for (var t = e, a = document.getElementsByTagName("script"), n = a.length; n--;)a[n].src === t && a[n].parentNode.removeChild(a[n]) }, addAddThisIfNotAlreadyLoaded: function (e) { if (!this.isMyScriptLoaded(e)) { var t = document.createElement("script"); t.setAttribute("src", e), document.body.appendChild(t) } }, isSafariMobile: function () { return navigator.userAgent.match(/(iPod|iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/) }, IS_ANDROID: /(android)/i.test(navigator.userAgent) }), wt = function (e) { var t, a = 13, n = 9, r = Object(k.a)(), o = H.a.decode(r.formatMessage({ id: "SITE_KEY_go_to_page", defaultMessage: " " })), l = H.a.decode(r.formatMessage({ id: "SITE_KEY_go", defaultMessage: " " })), i = H.a.decode(r.formatMessage({ id: "SITE_KEY_input_page_number", defaultMessage: " " })), s = "input-".concat(Math.random()), d = function (a) { a.preventDefault(); var n, c = (n = t.value >> 0) > e.max ? e.max : n < 1 ? 1 : n; e.onSelect(c, a) }, u = function (e) { (e.keyCode === a || Tt.IS_ANDROID && e.keyCode === n) && d(e) }, m = e.max, f = { width: "".concat(.6 * m.toString().length + 1.2, "rem") }; return c.a.createElement("div", { className: "Goto-form" }, c.a.createElement("h3", null, c.a.createElement("label", { htmlFor: s }, o)), c.a.createElement("input", { type: "number", id: s, min: "1", max: m, className: "pageInput", onKeyDown: u, onChange: u, onKeyPress: function (e) { var t = parseInt(e.key, 10); if (Number.isNaN(t)) return e.preventDefault(), !1 }, "aria-label": i, ref: function (e) { t = e }, style: f }), c.a.createElement(W.a, { className: "cdm-btn", onClick: d, "aria-label": l, title: o }, c.a.createElement("span", { className: "fa fa-chevron-right", "aria-hidden": !0 }))) }, Nt = a(40), At = function () { var e = Object(s.a)(i.a.mark((function e(t, a) { var n, c; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = "/digital/api/collections/".concat(t, "/items/").concat(a, "/false"), e.prev = 1, e.next = 4, fetch(n, Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 4: return c = e.sent, e.t0 = c.status, e.next = 8, c.json(); case 8: return e.t1 = e.sent, e.abrupt("return", { statusCode: e.t0, item: e.t1 }); case 12: return e.prev = 12, e.t2 = e.catch(1), e.abrupt("return", { error: e.t2 }); case 15: case "end": return e.stop() } }), e, null, [[1, 12]]) }))); return function (t, a) { return e.apply(this, arguments) } }(), Ft = function (e) { return { type: "itemReady", payload: { item: e.item, statusCode: e.statusCode } } }, Lt = { itemReady: function (e, t) { var a = t.payload, n = a.item, c = a.statusCode; return Object(p.a)(Object(p.a)({}, e), {}, { collectionAlias: n.collectionAlias, itemId: n && n.id ? n.id.toString() : null, item: Object(p.a)({}, n), isLoading: !1, statusCode: c }) }, turnOnLoadingNextPrevItem: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { isLoadingNextPrevItem: !0 }) }, turnOffLoadingNextPrevItem: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { isLoadingNextPrevItem: !1 }) }, turnOnItemSearchLoading: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { isLoadingItemSearch: !0 }) }, turnOffItemSearchLoading: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { isLoadingItemSearch: !1 }) }, setGetItemInfoError: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { fetchError: t.payload.error, isLoading: !1 }) } }, Pt = function (e, t) { return Lt[t.type](e, t) }, Rt = (a(663), function (e) { var t = Object(x.g)(), a = Object(x.h)(), r = Object(n.useContext)(Nt.a), o = Object(d.a)(r, 2)[1], l = Object(k.a)(), i = Object(S.useTracking)(), s = e.hideInfo, u = e.pageInfo.cardsPerPage, m = e.pageInfo.totalCollections > 1e4 ? 1e4 : e.pageInfo.totalCollections, f = m % u !== 0 ? Math.floor(m / u) + 1 : Math.floor(m / u), b = a.search && a.search.includes("?page="), g = a.search.match(/\?page=(\d+)/), h = a.pathname.match(/\/page\/(\d+)/), E = "Item page" === e.pageInfo.trackPage, v = b ? g ? parseInt(g[1]) : 1 : h ? parseInt(h[1]) : E ? e.pageInfo.pageNumber : 1, I = H.a.decode(l.formatMessage({ id: "SITE_KEY_goToPreviousPage", defaultMessage: " " })), O = H.a.decode(l.formatMessage({ id: "SITE_KEY_goToNextPage", defaultMessage: " " })), j = H.a.decode(l.formatMessage({ id: "SITE_KEY_page", defaultMessage: " " })), _ = v < 2, y = v >= f, C = e.pageInfo.item, M = e.pageInfo.collectionAlias, T = C && C.parent.children.map((function (e) { return e.id })), w = t.location.pathname.split("/rec/")[1], N = c.a.createElement("span", { key: "icon", className: "fa fa-chevron-left", "aria-label": I, title: I }), A = c.a.createElement("span", { key: "icon", className: "fa fa-chevron-right", "aria-label": O, title: O }), F = function (n, c) { if (v !== n) { if (!e.isCompoundItem) { var r = e.isSearch ? { pathname: Object(ft.a)(a, n) } : { pathname: "/digital", search: "?page=".concat(n) }; t.push(Object(p.a)(Object(p.a)({}, r), {}, { state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { page: n }) })) } if (o && o(n), E) { var l = e.pageInfo.cardsPerPage * (n - 1), s = T[l]; e.itemDispatch({ type: "turnOnLoadingNextPrevItem" }), t.push({ pathname: "/digital/collection/".concat(M, "/id/").concat(s).concat(w ? "/rec/".concat(w) : ""), state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { shouldScroll: !1 }) }) } Ve(i, e.pageInfo.trackPage, "click", "pagination", "pagination", { type: "page number", page: e.pageInfo.trackPage }) } else c && c.preventDefault() }, L = 1 === v ? 1 : v * u - u + 1, P = e.pageInfo.cards.length === u ? v * u : v * u - (u - e.pageInfo.cards.length), R = e.pageInfo.itemName, K = e.pageInfo.totalCollections, B = f < 2 && "home page" === e.pageInfo.trackPage, D = H.a.decode(l.formatMessage({ id: R, defaultMessage: " " }, { begin_index: L, end_index: P, total_items: K })); return B ? null : c.a.createElement("div", { className: "Paginator-paginationwrapper ".concat(e.pageInfo.className) }, c.a.createElement("div", null, c.a.createElement("div", { className: "Paginator-flexGrow" }, s ? "" : c.a.createElement("div", { className: "Paginator-paginationInfo" }, c.a.createElement("h3", null, D))), c.a.createElement("div", { className: "Paginator-paginationPageHolder ".concat(s ? "paginationPageNoInfo" : "") }, c.a.createElement(Mt.a, { className: "Paginator-pagination" }, c.a.createElement(Mt.a.Prev, { disabled: _, onClick: function (n) { return function (n) { if (v > 1) { if (e.isCompoundItem); else { var c = e.isSearch ? { pathname: Object(ft.a)(a, v - 1) } : { pathname: "/digital", search: "?page=".concat(v - 1) }; t.push(Object(p.a)(Object(p.a)({}, c), {}, { state: { page: v - 1 } })) } o && o(v - 1), E && F(v - 1, n), Ve(i, e.pageInfo.trackPage, "click", "pagination", "pagination", { type: "previous", page: e.pageInfo.trackPage }) } else n.preventDefault() }(n) }, children: N }), f <= 7 ? function () { for (var e = [], t = function (t) { e.push(c.a.createElement(Mt.a.Item, { "aria-label": "".concat(j, " ").concat(t), active: t === v, tabIndex: 0, key: t, onClick: function () { return F(t) } }, t)) }, a = 1; a <= f; a++)t(a); return e }() : function () { for (var e = [], t = function (t) { e.push(c.a.createElement(Mt.a.Item, { "aria-label": "".concat(j, " ").concat(t), active: t === v, tabIndex: 0, key: t, onClick: function (e) { return F(t, e) } }, t)) }, a = 1; a <= f; a++)t(a); return v + 1 < f - 2 && e.splice(v + 1, f - (v + 2), c.a.createElement(Mt.a.Ellipsis, { key: "back-ellipses", disabled: !0 })), v - 1 > 3 && e.splice(1, v - 3, c.a.createElement(Mt.a.Ellipsis, { key: "front-ellipses", disabled: !0 })), 1 === v && e.splice(2, 0, c.a.createElement(Mt.a.Item, { key: 3, "aria-label": "".concat(j, " ", 3), onClick: function () { return F(3) } }, 3)), v === f && e.splice(e.length - 2, 0, c.a.createElement(Mt.a.Item, { key: f - 2, "aria-label": "".concat(j, " ").concat(f - 2), onClick: function () { return F(f - 2) } }, f - 2)), e }(), c.a.createElement(Mt.a.Next, { disabled: y, onClick: function (n) { if (v < f) { if (!e.isCompoundItem) { var c = e.isSearch ? { pathname: Object(ft.a)(a, v + 1) } : { pathname: "/digital", search: "?page=".concat(v + 1) }; t.push(Object(p.a)(Object(p.a)({}, c), {}, { state: { page: v + 1 } })) } o && o(v + 1), E && F(v + 1, n), Ve(i, e.pageInfo.trackPage, "click", "pagination", "pagination", { type: "next", page: e.pageInfo.trackPage }) } else n.preventDefault() }, children: A }))), c.a.createElement("div", { className: "Paginator-flexGrow" }, f > 7 && !s ? c.a.createElement(wt, { max: f, onSelect: F }) : null))) }), Kt = (a(664), function (e) { var t = Object(k.a)(); return e.error ? c.a.createElement(z.a, { bsStyle: "danger" }, c.a.createElement(J.a, { name: "ban" }), c.a.createElement("span", { "data-id": "FetchingNotification", tabIndex: 0 }, H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_errorLoadingCollections" })), "\xa0", c.a.createElement("a", { className: "CollectionCardErrorNotification-link", href: "/" }, H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_pleaseTryAgain" }))))) : null }), Bt = (a(665), function () { var e = Object(k.a)(), t = Object(n.useContext)(De.a); return c.a.createElement("div", { className: "ContentHeader-position" }, c.a.createElement("div", { className: "ContentHeader-maincontainer shared-box ".concat(T.CONTENT_HEADER) }, c.a.createElement(m.Consumer, null, (function (e) { return "" !== t.homepage.image.smallImagePath ? c.a.createElement("div", { className: "ContentHeader-mainImageHolder" }, c.a.createElement("img", { "data-id": "siteLandingImage", alt: H.a.decode(e.messages[t.homepage.image.imageAltText]), src: "" + t.homepage.image.smallImagePath, srcSet: "".concat("" + t.homepage.image.smallImagePath, " 768w,\n                                         ").concat("" + t.homepage.image.mediumImagePath, " 1199w,\n                                         ").concat("" + t.homepage.image.largeImagePath, " 1280w") })) : void 0 })), c.a.createElement("h1", { className: "sr-only" }, U(e, "SITE_CONFIG_title")), c.a.createElement("div", { tabIndex: 0, className: "ContentHeader-mainCopyHolder" }, U(e, "SITE_CONFIG_globalHomePageHtml")))) }), Dt = function () { var e = Object(x.g)(), t = Object(x.h)(), r = Object(n.useContext)(De.a), o = a(142).parse(t.search), l = r.homepage.homepageCardsEnabled, u = e.location.state ? e.location.state.page : parseInt(o.page) ? parseInt(o.page) : 1, m = Object(n.useState)(!0), f = Object(d.a)(m, 2), b = f[0], g = f[1], h = Object(n.useState)(!1), E = Object(d.a)(h, 2), v = E[0], I = E[1], O = Object(n.useState)(), S = Object(d.a)(O, 2), j = S[0], _ = S[1]; Object(n.useEffect)((function () { (function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, _t(u, r.homepage.homepageCardsPerPage); case 2: void 0 !== (t = e.sent) ? (_(t), g(!1), I(!1)) : (g(!1), I(!0)); case 4: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } })()() }), [u, r.homepage.homepageCardsPerPage]); var y = Object(n.useState)(j), C = Object(d.a)(y, 2), k = C[0], M = C[1], w = Object(n.useState)(Object(p.a)({}, j)), N = Object(d.a)(w, 2), A = N[0], F = N[1]; return Object(n.useEffect)((function () { k ? k !== j && (F(Object(p.a)({}, j)), M(j)) : M(j) }), [j, k]), Be(T.HOME_PAGE, A, !b), Object(n.useEffect)((function () { g(!0) }), [u]), b ? c.a.createElement(c.a.Fragment, null, c.a.createElement(pe, null), c.a.createElement(Bt, null)) : c.a.createElement(c.a.Fragment, null, " ", c.a.createElement(Kt, { error: v }), c.a.createElement(Bt, null), c.a.createElement("div", { className: "CardWrapper-cardscontainer row", "data-testid": "cardsContainer" }, c.a.createElement("div", { className: "CardWrapper-div" }, l && j ? c.a.createElement(Nt.a.Provider, { value: "" }, c.a.createElement(Rt, { pageInfo: Object(p.a)(Object(p.a)({}, j), {}, { pageNumber: u, itemName: "SITE_KEY_collectionPaginator", cardsPerPage: r.homepage.homepageCardsPerPage, className: "topCollectionCardPaginator", trackPage: "home page" }) }), j.cards.map((function (e, t) { return c.a.createElement(xt, { key: t, description: e.description, title: Fe(e.title), alias: e.alias, preview: r.preview.enabled, customURL: e.customURL }) })), c.a.createElement(Rt, { pageInfo: Object(p.a)(Object(p.a)({}, j), {}, { pageNumber: u, itemName: "SITE_KEY_collectionPaginator", cardsPerPage: r.homepage.homepageCardsPerPage, className: "bottomCollectionCardPaginator", trackPage: "home page" }) })) : null))) }, Yt = function (e) { var t = e.setMainClass; return Object(n.useEffect)((function () { return t("cdm-home-page") })), c.a.createElement("div", null, c.a.createElement(Dt, null)) }, Ht = (a(678), function (e) { var t = Object(k.a)(), a = Object(S.useTracking)(), r = Object(n.useContext)(De.a), o = Object(n.useContext)(Re), l = e.collectionName, i = e.collectionAlias, s = e.isSingleItem, d = e.itemTitle, u = "/digital", m = r && r.homepage && r.homepage.customUrlEnabled && r.homepage.customURL; m && (u = r.homepage.customURL); var f = "/digital/collection/".concat(i), b = o && o.body && o.body.customUrlEnabled && null != o.body.customURL; b && (f = o.body.customURL); var p = s ? "single item" : "compound object"; return c.a.createElement("div", { className: "Breadcrumbs-breadcrumbs", "data-id": "breadcrumbs" }, c.a.createElement("div", { className: "Breadcrumbs-breadcrumb" }, function (e) { return e ? c.a.createElement("a", { href: u, onClick: function () { Ve(a, p, "click", "breadcrumbs: home", "breadcrumbs:home") } }, H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_home" }))) : c.a.createElement(Ae.b, { to: u, onClick: function () { Ve(a, p, "click", "breadcrumbs: home", "breadcrumbs:home") } }, H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_home" }))) }(m)), c.a.createElement("div", { className: "Breadcrumbs-breadcrumb" }, c.a.createElement(J.a, { name: "angle-right" }), function (e) { return e ? c.a.createElement("a", { href: f, onClick: function () { Ve(a, p, "click", "breadcrumbs: collection:".concat(f), "breadcrumbs:collection", { collection_alias: i }) } }, l) : c.a.createElement(Ae.b, { to: f, onClick: function () { Ve(a, p, "click", "breadcrumbs: collection:".concat(f), "breadcrumbs:collection", { collection_alias: i }) } }, l) }(b)), d ? c.a.createElement("span", { className: "Breadcrumbs-breadcrumb" }, c.a.createElement(J.a, { name: "angle-right" }), c.a.createElement("span", null, d)) : void 0) }), Ut = function () { var e = Object(k.a)(); return c.a.createElement(z.a, { bsStyle: "danger", "data-id": "itemNotFound" }, c.a.createElement(J.a, { name: "ban" }), c.a.createElement("span", null, H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_error_KEY_error_6" })))) }, Vt = (a(679), function (e) { var t = c.a.createRef(), a = e.title, r = e.secondaryTitle; return Object(n.useEffect)((function () { var e = t.current.clientHeight; t.current.style.maxHeight = "".concat(2 * e, "px") })), c.a.createElement("div", { className: "ItemView-itemTitle" }, c.a.createElement("h1", { className: "ItemTitle-primaryTitle", ref: t, tabIndex: 0 }, a), r ? c.a.createElement("h2", { tabIndex: 0, className: "ItemTitle-secondaryTitle" }, r) : null) }), Gt = c.a.createContext(), qt = a(50), zt = (a(680), function (e) { var t = Object(k.a)(), a = Object(S.useTracking)(), r = Object(x.i)().collectionAlias, o = Object(x.h)(), l = Object(n.useContext)(Gt), i = Object(d.a)(l, 1)[0], s = Object(n.useContext)(De.a), u = Object(n.useContext)(qt.a), m = Object(d.a)(u, 1)[0], f = H.a.decode(t.formatMessage({ id: "SITE_KEY_expand", defaultMessage: " " })), b = s.iiif.iiifEnabled, p = e.title, g = e.iiifInfoUri, h = e.setShowLightbox, E = i.item.id, v = function () { if (g && b) return c.a.createElement(W.a, { "aria-label": f, bsStyle: "primary", className: "ItemImage-expandButton cdm-btn", title: f, onClick: function () { h(!0), Ve(a, "single item", "click", "expand: ".concat(o.pathname), "expand image", { collection_alias: r, item_id: "".concat(r, "/id/").concat(E) }) } }, c.a.createElement(J.a, { name: "expand" })) }; return function () { var e = o.state && o.state.itemSearchInfo && o.state.itemSearchInfo.searchTerm ? o.state.itemSearchInfo.searchTerm : "", t = e || (m && m.searchTerm ? m.searchTerm : null), a = t ? "?highlightTerms=".concat(t) : "", n = "/digital/api/singleitem/image/".concat(r, "/").concat(E, "/default.jpg").concat(a); return c.a.createElement("div", null, c.a.createElement("div", { className: "ItemImage-itemImage" }, c.a.createElement("div", null, c.a.createElement("img", { src: n, alt: p }), v()))) }() }), Wt = function (e) { var t = Object(S.useTracking)(), a = "/digital/collection/".concat(e.itemInfo.collectionAlias, "/id/").concat(e.itemInfo.itemId); return c.a.createElement("audio", { src: e.streamUri, controls: !0, onPlay: function () { Ve(t, "single item", "click", "play: ".concat(a), "play audio", { collection_alias: e.itemInfo.collectionAlias, item_id: "".concat(e.itemInfo.collectionAlias, "/id/").concat(e.itemInfo.itemId) }) } }) }, Qt = a(436), Jt = (a(681), function (e) { var t = Object(k.a)(), a = Object(S.useTracking)(), n = "/digital/collection/".concat(e.itemInfo.collectionAlias, "/id/").concat(e.itemInfo.itemId); var r = { play: { id: "SITE_KEY_play" }, pause: { id: "SITE_KEY_pause" }, mute: { id: "SITE_KEY_mute" }, unmute: { id: "SITE_KEY_unmute" }, fullscreen: { id: "SITE_KEY_fullscreen" }, seek: { id: "SITE_KEY_seek" }, captions: { id: "SITE_KEY_captions" } }, o = {}; Object.keys(r).forEach((function (e) { o[e] = H.a.decode(t.formatMessage(r[e])) })); var l, i = c.a.createElement(Qt.DefaultPlayer, { controls: ["PlayPause", "Seek", "Time", "Volume", "Fullscreen", "Captions"], onPlay: function () { Ve(a, "single item", "click", "play: ".concat(n), "play video", { collection_alias: e.itemInfo.collectionAlias, item_id: "".concat(e.itemInfo.collectionAlias, "/id/").concat(e.itemInfo.itemId) }) }, copy: o, src: e.streamUri }); return (l = document.createElement("div")).requestFullscreen || l.msRequestFullscreen || l.mozRequestFullScreen || l.webkitRequestFullscreen || (i = c.a.createElement("video", { controls: !0, playsInline: !0, onPlay: function () { Ve(a, "single item", "click", "play: ".concat(n), "play video", { collection_alias: e.itemInfo.collectionAlias, item_id: "".concat(e.itemInfo.collectionAlias, "/id/").concat(e.itemInfo.itemId) }) }, src: e.streamUri })), c.a.createElement("div", { className: "ItemVideo-itemVideoContainer" }, i) }), Xt = (a(682), function (e) { var t = e.thumbnailUri, a = e.url, n = e.eventCategory, r = e.collectionAlias, o = e.itemId, l = encodeURI(a), i = Object(S.useTracking)(); return c.a.createElement("div", { className: "ItemUrl-itemUrl" }, c.a.createElement("div", { className: "itemThumbnail ItemUrl-thumbnailFlex" }, c.a.createElement("img", { src: "/digital".concat(t), alt: a, className: "ItemUrl-itemImageThumbnail" })), c.a.createElement("div", { className: "ItemUrl-itemUrlLink" }, c.a.createElement("a", { href: l, target: "_blank", rel: "noopener noreferrer", onClick: function () { Ve(i, n, "click", "url item: ".concat(st(a)), "visit URL item", { item_URL: st(a), collection_alias: r, item_id: "".concat(r, "/id/").concat(o) }) } }, a))) }), Zt = function () { var e = Object(k.a)(), t = H.a.decode(e.formatMessage({ id: "SITE_error_KEY_thereIsNoFileAssociatedWithThisItem", defaultMessage: " " })); return c.a.createElement("div", { className: "ItemView-itemNoFile", "data-id": "itemNoFile" }, c.a.createElement("div", null, t)) }, $t = function () { var e = Object(k.a)(), t = H.a.decode(e.formatMessage({ id: "SITE_error_KEY_thisItemIsRestrictedToOnlyAllowViewingOfTheMetadata", defaultMessage: " " })); return c.a.createElement("div", { className: "Itemview-itemNoFile" }, c.a.createElement("div", { "data-id": "itemRestricted", dangerouslySetInnerHTML: { __html: t } })) }, ea = (a(683), function (e) { var t = e.thumbnailUri, a = e.downloadUri, n = e.filename, r = e.itemInfo, o = Object(S.useTracking)(); var l = "".concat("", "/digital").concat(a); return c.a.createElement("div", { className: "ItemFile-itemFile" }, c.a.createElement("div", { className: "itemThumbnail ItemFile-thumbnailFlex" }, c.a.createElement("img", { src: "/digital".concat(t), alt: n, className: "ItemFile-itemImageThumbnail" })), c.a.createElement("div", { className: "ItemFile-itemFileLink" }, c.a.createElement("a", { href: l, onClick: function () { Ve(o, "single item", "click", "download: ".concat(st(a)), "download item", { collection_alias: r.collectionAlias, item_id: "".concat(r.collectionAlias, "/id/").concat(r.itemId) }) } }, n))) }), ta = (a(684), function (e) { var t = Object(n.useContext)(Gt), a = Object(d.a)(t, 1)[0], r = Object(n.useContext)(De.a), o = Object(k.a)(), l = Object(S.useTracking)(), i = H.a.decode(o.formatMessage({ id: "SITE_KEY_expand", defaultMessage: " " })), s = window.location.pathname, u = r.imageServerEnabled ? a.item.imageUri : "/digital".concat(a.item.imageUri), m = e.title, f = e.setShowLightbox, b = e.collectionAlias; return c.a.createElement("div", null, c.a.createElement("div", { className: "ItemPDF-itemImage" }, c.a.createElement("div", null, c.a.createElement("img", { src: u, alt: m }), c.a.createElement(W.a, { className: "ItemPDF-expandButton cdm-btn", bsStyle: "primary", title: i, "aria-label": i, onClick: function () { f(!0), Ve(l, "single item", "click", "expand: ".concat(s), "expand PDF", { item_id: "".concat(b, "/id/").concat(a.item.id), collectionAlias: b }) } }, c.a.createElement(J.a, { name: "expand" }))))) }), aa = (a(685), a(686), function (e) { var t, a, r, o, l, i, s, u = Object(k.a)(), m = Object(x.g)(), f = Object(S.useTracking)(), b = Object(n.useContext)(Gt), g = Object(d.a)(b, 1)[0], h = g.item, E = Object(n.useRef)(null), v = document.activeElement, I = H.a.decode(u.formatMessage({ id: "SITE_KEY_previous" })), O = H.a.decode(u.formatMessage({ id: "SITE_KEY_next" })), j = function () { e.onClose(), setTimeout((function () { v && v.focus() })) }, _ = function () { setTimeout((function () { E.current && (!(document.activeElement === E.current || null !== E.current.querySelector(":focus")) && E.current.focus()) })) }, y = e.children, C = H.a.decode(u.formatMessage({ id: "SITE_KEY_close", defaultMessage: " " })), M = !!h.parent; M && (s = h.collectionAlias, i = m.location.pathname.split("/rec/")[1], t = h.parent.children.map((function (e) { return e.id })), a = h.id === t[t.length - 1], r = h.id === t[0], o = t[t.indexOf(h.id) - 1], l = t[t.indexOf(h.id) + 1]); var T = "/digital/collection/".concat(s, "/id/").concat(o).concat(i ? "/rec/".concat(i) : ""), w = "/digital/collection/".concat(s, "/id/").concat(l).concat(i ? "/rec/".concat(i) : ""); return c.a.createElement("div", { className: "Lightbox-lightbox", tabIndex: 0, onKeyUp: function (e) { e.preventDefault(), e.stopPropagation(), 27 === e.keyCode && j() }, ref: E, onBlur: _ }, y, c.a.createElement("div", { className: "btn-group" }, M ? [c.a.createElement("button", { key: "0", className: "", disabled: r, title: I, onClick: function (e) { !function (e) { !r || e.preventDefault() }(e), Ve(f, "compound object", "click", "previous item: ".concat(T), "expanded navigation buttons", { collection_alias: s, parent_id: "".concat(s, "/id/").concat(g.parent_id), item_id: "".concat(s, "/id/").concat(o), source: "previous button (expanded)" }), m.push({ pathname: T, state: Object(p.a)(Object(p.a)({}, m.location.state), {}, { shouldScroll: !1 }) }) } }, c.a.createElement("span", { className: "fa fa-chevron-left", "aria-hidden": !0 }), c.a.createElement("span", { className: "text" }, I)), c.a.createElement("button", { key: "1", disabled: a, title: O, onClick: function (e) { !function (e) { !a || e.preventDefault() }(e), Ve(f, "compound object", "click", "next item: ".concat(w), "expanded navigation buttons", { collection_alias: s, parent_id: "".concat(s, "/id/").concat(g.parent_id), item_id: "".concat(s, "/id/").concat(l), source: "next button (expanded)" }), m.push({ pathname: w, state: Object(p.a)(Object(p.a)({}, m.location.state), {}, { shouldScroll: !1 }) }) } }, c.a.createElement("span", { className: "text" }, O), c.a.createElement("span", { className: "fa fa-chevron-right", "aria-hidden": !0 }))] : null, c.a.createElement("button", { onClick: j, onBlur: _, title: C, "aria-label": C }, c.a.createElement("span", { className: "fa fa-times-circle", "aria-hidden": !0 })))) }), na = a(437), ca = a.n(na), ra = (a(687), function (e) { var t = Object(n.useRef)(null), a = Object(n.useRef)(null), r = Object(n.useRef)(null), o = Object(n.useRef)(!1), l = { zoomInButton: "zoom-in" + Date.now(), zoomOutButton: "zoom-out" + Date.now(), homeButton: "home-button" + Date.now(), fullPageButton: "toggle-full-page" + Date.now(), rotateLeftButton: "rotate-left" + Date.now(), rotateRightButton: "rotate-right" + Date.now() }, i = Object(k.a)(); return Object(n.useEffect)((function () { if (o.current) { var t = e.iiifInfoUri; 0, r.current && r.current.open(e.imageServerEnabled ? t : "/digital".concat(t)) } }), [e.iiifInfoUri, e.imageServerEnabled]), Object(n.useEffect)((function () { if (!o.current) { r.current && r.current.destroy(); var t = e.iiifInfoUri; 0, r.current = ca()({ id: "test", prefixUrl: "/digital/openseadragon/images/", tileSource: e.imageServerEnabled ? t : "/digital".concat(t), showRotationControl: !0, defaultZoomLevel: 0, maxZoomPixelRatio: 2, zoomInButton: l.zoomInButton, zoomOutButton: l.zoomOutButton, homeButton: l.homeButton, fullPageButton: l.fullPageButton, rotateLeftButton: l.rotateLeftButton, rotateRightButton: l.rotateRightButton }); var a = !1; r.current.addHandler("full-screen", (function (e) { e.fullScreen || (e.eventSource.canvas.focus(), a = !0) })), r.current.element.addEventListener("keyup", (function (e) { 27 === e.keyCode && a && (e.preventDefault(), e.stopPropagation()), a = !1 })), r.current.open(e.imageServerEnabled ? t : "/digital".concat(t)), o.current = !0 } }), [l.fullPageButton, l.homeButton, l.rotateLeftButton, l.rotateRightButton, l.zoomInButton, l.zoomOutButton, e.iiifInfoUri, e.imageServerEnabled]), c.a.createElement("div", { id: "test", className: "ImageViewer-container", ref: a }, c.a.createElement("div", { className: "ImageViewer-buttonGroup", ref: t }, c.a.createElement("button", { id: l.zoomInButton, title: H.a.decode(i.formatMessage({ id: "SITE_KEY_zoomIn", defaultMessage: " " })) }, c.a.createElement("span", { className: "fa fa-plus-circle", "aria-hidden": "true" })), c.a.createElement("button", { id: l.zoomOutButton, title: H.a.decode(i.formatMessage({ id: "SITE_KEY_zoomOut", defaultMessage: " " })) }, c.a.createElement("span", { className: "fa fa-minus-circle", "aria-hidden": "true" })), c.a.createElement("button", { id: l.homeButton, title: H.a.decode(i.formatMessage({ id: "SITE_cdm_KEY_home", defaultMessage: " " })) }, c.a.createElement("span", { className: "fa fa-home", "aria-hidden": "true" })), c.a.createElement("button", { id: l.fullPageButton, title: H.a.decode(i.formatMessage({ id: "SITE_cdm_KEY_fullPage", defaultMessage: " " })) }, c.a.createElement("span", { className: "fa fa-expand", "aria-hidden": "true" })), c.a.createElement("button", { id: l.rotateLeftButton, title: H.a.decode(i.formatMessage({ id: "SITE_KEY_rotateLeft", defaultMessage: " " })) }, c.a.createElement("span", { className: "fa fa-undo", "aria-hidden": "true" })), c.a.createElement("button", { id: l.rotateRightButton, title: H.a.decode(i.formatMessage({ id: "SITE_KEY_rotateRight", defaultMessage: " " })) }, c.a.createElement("span", { className: "fa fa-redo", "aria-hidden": "true" })))) }), oa = (a(688), function (e) { var t = Object(n.useContext)(qt.a), a = Object(d.a)(t, 1)[0], r = Object(x.h)(); return c.a.createElement("div", { className: "PDFViewer-pdfFrame" }, c.a.createElement("iframe", { src: function () { var t = e.url, n = r.state && r.state.itemSearchInfo && r.state.itemSearchInfo.searchTerm ? r.state.itemSearchInfo.searchTerm : "", c = n || (a && a.searchTerm ? a.searchTerm : null), o = "/digital/pdf.js/web/viewer.html?file=/digital".concat(t); if (c) { var l = encodeURIComponent(c); o += "#search=".concat(l) } return o }(), allowFullScreen: !0, onLoad: function (e) { var t = e.target.parentElement; e.target.contentDocument.body.focus(), e.target.contentDocument.addEventListener("keyup", (function (e) { if (27 === e.keyCode) { var a = new KeyboardEvent(e.type, e); t.dispatchEvent(a) } })) }, title: "PDF Viewer" })) }), la = Object(n.memo)(oa, (function (e, t) { return e.url === t.url })), ia = "application/pdf", sa = "application/image", da = (a(689), function (e) { var t = e.onClose, a = e.showLightbox, r = e.itemType, o = Object(n.useContext)(Gt), l = Object(d.a)(o, 1)[0], i = Object(n.useContext)(De.a), s = null; if (r === sa && (s = c.a.createElement(ra, { iiifInfoUri: l.item.iiifInfoUri, highlightTerms: l.item.highlightTerms, imageServerEnabled: i.imageServerEnabled })), r === ia) { s = c.a.createElement(la, { url: function (e) { if (-1 !== e.parentId && e.filename && e.filename.endsWith(".pdfpage")) { var t = e.parent.children.findIndex((function (t) { return t.id === e.id })); -1 === t && (t = 0); var a = t + 1, n = "".concat(e.collectionAlias, "_").concat(e.parentId, "_").concat(a); return "/api/collection/".concat(e.collectionAlias, "/id/").concat(e.parentId, "/page/").concat(a, "/inline/").concat(n) } return e.downloadUri }(l.item) }) } return a ? c.a.createElement(aa, { onClose: t }, c.a.createElement("div", { className: "ItemModalViewer-container" }, s)) : null }), ua = function () { var e, t, a, r, o, l = /^image\/(gif|jpeg|jp2|tiff|png)$/, i = /^audio\//, s = /^video\//, u = /\.cpd$\b/i, m = Object(S.useTracking)(), f = Object(k.a)(), b = Object(n.useContext)(Gt), g = Object(d.a)(b, 1)[0].item, h = Object(x.g)(), E = Object(n.useState)(!1), v = Object(d.a)(E, 2), I = v[0], O = v[1], j = H.a.decode(f.formatMessage({ id: "SITE_KEY_previous", defaultMessage: " " })), _ = H.a.decode(f.formatMessage({ id: "SITE_KEY_next", defaultMessage: " " })), y = !!g.parent, C = g.id, M = g.collectionAlias, T = g.contentType, w = y ? g.parent.fields.find((function (e) { return "title" === e.key })).value : g.fields.find((function (e) { return "title" === e.key })) ? g.fields.find((function (e) { return "title" === e.key })).value : g.text, N = g.iiifInfoUri, A = g.streamUri, F = g.filename, L = g.thumbnailUri, P = g.url, R = g.downloadUri, K = g.parentId, B = y ? "compound object" : "single item"; y && (e = g.parent.children.map((function (e) { return e.id })), t = C === e[e.length - 1], a = C === e[0], r = e[e.indexOf(C) - 1], o = e[e.indexOf(C) + 1]); var D = function (e) { if (function (e, t) { return -1 !== e || u.test(t) }(K, F)) { if (F.endsWith(".pdfpage")) { var t = g.parent.children.findIndex((function (e) { return e.id === C })); -1 === t && (t = 0); var a = t + 1, n = "".concat(M, "_").concat(K, "_").concat(a); return c.a.createElement(ta, { title: n, setShowLightbox: O, collectionAlias: M }) } return c.a.createElement(ta, { title: e, setShowLightbox: O, collectionAlias: M }) } return c.a.createElement(ta, { title: e, setShowLightbox: O, collectionAlias: M }) }, Y = function () { return "application/url" === T ? c.a.createElement(Xt, { thumbnailUri: L, url: P, eventCategory: B, collectionAlias: M, itemId: C }) : "application/pdf" === T ? c.a.createElement(n.Fragment, null, c.a.createElement(da, { itemType: ia, showLightbox: I, onClose: function () { O(!1) } }), D(w)) : l.test(T) ? c.a.createElement(n.Fragment, null, c.a.createElement(da, { itemType: sa, showLightbox: I, onClose: function () { O(!1) } }), c.a.createElement(zt, { title: w, iiifInfoUri: N, setShowLightbox: O })) : i.test(T) && A && Tt.canPlayAudio(T) ? c.a.createElement(Wt, { streamUri: A, itemInfo: { collectionAlias: M, itemId: C } }) : s.test(T) && A && Tt.canPlayVideo(T) ? c.a.createElement(Jt, { streamUri: A, itemInfo: { collectionAlias: M, itemId: C } }) : "application/meta" === T || null === T ? c.a.createElement(Zt, null) : "restricted" === T ? c.a.createElement($t, null) : u.test(F) ? null : c.a.createElement(ea, { thumbnailUri: L, downloadUri: R, filename: F, itemInfo: { collectionAlias: M, itemId: C } }) }; return y ? function () { var e = h.location.pathname.split("/rec/")[1], n = "/digital/collection/".concat(M, "/id/").concat(r).concat(e ? "/rec/".concat(e) : ""), l = "/digital/collection/".concat(M, "/id/").concat(o).concat(e ? "/rec/".concat(e) : ""); return c.a.createElement("div", { className: "ItemPreview-container" }, c.a.createElement(W.a, { disabled: a, className: "cdm-btn", title: j, onClick: function (e) { !function (e) { !a || e.preventDefault() }(e), Ve(m, "compound object", "click", "previous item: ".concat(n), "navigation buttons", { collection_alias: M, parent_id: "".concat(M, "/id/").concat(K), parent_title: w, item_id: "".concat(M, "/id/").concat(r), type: "previous" }), h.push({ pathname: n, state: Object(p.a)(Object(p.a)({}, h.location.state), {}, { shouldScroll: !1 }) }) } }, c.a.createElement("span", { className: "fa fa-chevron-left", "aria-hidden": !0 }), c.a.createElement("span", { className: "text" }, j)), c.a.createElement("div", { className: "preview" }, Y()), c.a.createElement(W.a, { disabled: t, className: "cdm-btn", title: _, onClick: function (e) { !function (e) { !t || e.preventDefault() }(e), Ve(m, "compound object", "click", "next item: ".concat(l), "navigation buttons", { collection_alias: M, parent_id: "".concat(M, "/id/").concat(K), parent_title: w, item_id: "".concat(M, "/id/").concat(o), type: "next" }), h.push({ pathname: l, state: Object(p.a)(Object(p.a)({}, h.location.state), {}, { shouldScroll: !1 }) }) } }, c.a.createElement("span", { className: "text" }, _), c.a.createElement("span", { className: "fa fa-chevron-right", "aria-hidden": !0 }))) }() : c.a.createElement("div", { className: "ItemPreview-container" }, c.a.createElement("div", { className: "preview" }, Y())) }, ma = a(12), fa = (a(690), function (e) { var t = 13, a = 9, r = Object(S.useTracking)(), o = Object(x.g)(), l = Object(k.a)(), i = e.totalResults, s = e.parentId, u = e.parentTitle, m = e.items, f = e.collectionAlias, b = e.searchResultsItemIndex, g = m.indexOf(m.find((function (e) { return e.id === parseInt(b, 10) }))) + 1, h = Object(n.useState)(g), E = Object(d.a)(h, 2), v = E[0], I = E[1], O = Object(n.useContext)(Gt), j = Object(d.a)(O, 2)[1], _ = H.a.decode(l.formatMessage({ id: "SITE_KEY_item_selector", defaultMessage: " " })); Object(n.useEffect)((function () { I(g) }), [g]); var y = function (e) { if (e.keyCode === t || Tt.IS_ANDROID && e.keyCode === a) { e.preventDefault(); var n = (d = v >> 0) > i ? i : d < 1 ? 1 : d, c = o.location.pathname.split("/rec/")[1], l = "/digital/collection/".concat(f, "/id/").concat(m[n - 1].id).concat(c ? "/rec/".concat(c) : ""); Ve(r, "compound object", "click", "go to item: ".concat(l), "select compound item page", { collection_alias: f, parent_id: "".concat(f, "/id/").concat(s), parent_title: u, page: n, source: "entered page number" }), j({ type: "turnOnLoadingNextPrevItem" }), o.push({ pathname: l, state: Object(p.a)(Object(p.a)({}, o.location.state), {}, { shouldScroll: !1 }) }) } else I(e.target.value); var d }; return c.a.createElement("div", { className: "CompoundItemPagination-container" }, c.a.createElement("span", { className: "CompoundItemPagination-result" }, c.a.createElement("input", { type: "number", min: "1", max: i, value: v, className: "CompoundItemPagination-pageInput", onKeyDown: y, onKeyPress: function (e) { var t = parseInt(e.key, 10); if (Number.isNaN(t)) return e.preventDefault(), !1 }, onChange: y, "aria-label": _, title: _ }), "of ", c.a.createElement(ma.a, { value: i }))) }), ba = (a(691), function (e) { var t = Object(n.useContext)(Re), a = Object(n.useContext)(Gt), r = Object(d.a)(a, 1)[0], o = r.item, l = o.contentType, i = o.downloadUri, s = Object(S.useTracking)(), u = Object(k.a)(), m = H.a.decode(u.formatMessage({ id: "SITE_KEY_print", defaultMessage: " " })), f = H.a.decode(u.formatMessage({ id: "SITE_KEY_printsubset_all", defaultMessage: " " })), b = H.a.decode(u.formatMessage({ id: "SITE_cdm_compoundobject_KEY_thisitem", defaultMessage: " " })), p = !(!t || !t.body) && t.body.enablePrintButton, g = r.item.filename || "", h = r.item.id, E = e.collectionId, v = e.compoundIndex, I = e.hasPrintPDF, O = e.parentId, j = e.type, _ = i && O > -1, y = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0, a = "".concat(E, "_").concat(O, "_").concat(t), n = "/digital/api/collection/".concat(E, "/id/").concat(O, "/page/").concat(t, "/inline/").concat(a), c = f; t > 0 && (c = b), Ve(s, "compound object", "click", "print :".concat(c, ": ").concat(st(n)), "print", { collection_alias: E, item_id: "".concat(E, "/id/").concat(h), item_type: "compound object", parent_id: "".concat(E, "/id/").concat(O) }), window.location.assign(n) }, C = function () { if ("application/pdf" === l) if (_ && g.endsWith(".pdfpage")) y({}, v + 1); else { Ve(s, "single item", "click", "print item: ".concat(window.location), "print", { collection_alias: E, item_id: "".concat(E, "/id/").concat(h), item_type: "single item" }); var e = "".concat(E, "_").concat(h, "_", 0), t = "/digital/api/collection/".concat(E, "/id/").concat(h, "/page/0/inline/").concat(e); window.location.assign(t) } else v ? Ve(s, "compound object", "click", "print: ".concat(window.location), "print", { collection_alias: E, item_id: "".concat(E, "/id/").concat(h), parent_id: "".concat(E, "/id/").concat(O), item_type: "compound object" }) : Ve(s, "single item", "click", "print item: ".concat(window.location), "print", { collection_alias: E, item_id: "".concat(E, "/id/").concat(h), parent_id: "".concat(E, "/id/").concat(O), item_type: "single item" }), window.print() }; return t && t.body ? p && (/^image\/(gif|jpeg|jp2|tiff|tif|png)$/.test(l) || "application/pdf" === l) ? c.a.createElement("div", { className: "btn-group btn-group-default" }, _ ? c.a.createElement(It.a, { id: "print-dropdown-compound-item-".concat(j), className: "ItemPrint-itemPrintDropdown" }, c.a.createElement(It.a.Toggle, { bsStyle: "primary", className: "cdm-btn", "aria-label": m, onClick: function (e) { e.stopPropagation(), Ve(s, "compound object", "click", "print menu: ".concat(window.location), "open print menu", { collection_alias: E, item_id: "".concat(E, "/id/").concat(h), parent_id: "".concat(E, "/id/").concat(O) }) } }, c.a.createElement(J.a, { name: "print", size: "2x", "aria-label": m })), c.a.createElement(It.a.Menu, { className: "ItemPrint-itemPrintMenuLinks", tabIndex: 6 }, c.a.createElement(vt.a, { onClick: C, eventKey: "1" }, b), I ? c.a.createElement(vt.a, { onClick: y, eventKey: "2" }, f, " ") : void 0)) : c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: C, "aria-label": m }, c.a.createElement(J.a, { name: "print", size: "2x", "aria-label": m }))) : null : c.a.createElement(c.a.Fragment, null) }), pa = function (e) { var t = e.itemThumbnail, a = e.itemTitle, r = e.isSingleItem, o = e.collectionAlias, l = e.itemId, i = "https://s7.addthis.com/js/300/addthis_widget.js#async=1", s = Object(n.useContext)(Re), d = Object(n.useContext)(De.a), u = Object(S.useTracking)(), m = window.location.host + window.location.pathname, f = s && s.body && s.body.social && s.body.social.overrideSocialLinksGlobal ? s.body.social.shareEnabled : d.social.shareEnabled, b = s && s.body && s.body.social && s.body.social.overrideSocialLinksGlobal ? s.body.social.id : d.social.id, p = b && b.length > 0 && null != b.match(/^(ra|xa)-/), g = r ? "single item" : "compound object", h = Object(n.useCallback)((function () { window.addthis_config = { pubid: b }, window.addthis_share = { title: a, url: window.location.href.split("/rec")[0], media: window.location.origin + "/digital" + t } }), [t, a, b]); return Object(n.useEffect)((function () { return f && p && (h(), Tt.addAddThisIfNotAlreadyLoaded(i), null != window.addthis && "undefined" !== typeof window.addthis && (window.addthis.init(), window.addthis.toolbox(".addthis_inline_share_toolbox"), window.addthis.layers && "function" === typeof window.addthis.layers.refresh && window.addthis.layers.refresh())), function () { Tt.removeAddThisScript(i) } }), [p, f, h]), Object(n.useEffect)((function () { h() }), [t, a, h]), f && p ? c.a.createElement("div", { className: "addthis_inline_share_toolbox", onClick: function (e) { e.stopPropagation(), Ve(u, g, "click", "share menu: ".concat(m), "share button", { collection_alias: o, item_id: "".concat(o, "/id/").concat(l) }) } }) : null }, ga = (a(692), function (e) { var t = e.type, a = e.isSingleItem, r = Object(n.useContext)(Gt), o = Object(d.a)(r, 1)[0].item, l = Object(n.useContext)(Re), i = Object(k.a)(), s = Object(S.useTracking)(), u = ["Small", "Medium", "Large", "ExtraLarge", "FullSize", "FullRes"], m = { SMALL: "small", MEDIUM: "medium", LARGE: "large", EXTRALARGE: "extralarge", FULLSIZE: "full", FULLRES: "" }, f = { label: H.a.decode(i.formatMessage({ id: "SITE_KEY_download", defaultMessage: " " })), small: H.a.decode(i.formatMessage({ id: "SITE_CONFIG_downloadSmallEnabled", defaultMessage: " " })), medium: H.a.decode(i.formatMessage({ id: "SITE_CONFIG_downloadMediumEnabled", defaultMessage: " " })), large: H.a.decode(i.formatMessage({ id: "SITE_CONFIG_downloadLargeEnabled", defaultMessage: " " })), extralarge: H.a.decode(i.formatMessage({ id: "SITE_CONFIG_downloadExtraLargeEnabled", defaultMessage: " " })), fullsize: H.a.decode(i.formatMessage({ id: "SITE_CONFIG_downloadFullSizeEnabled", defaultMessage: " " })), fullres: H.a.decode(i.formatMessage({ id: "SITE_CONFIG_downloadFullResEnabled", defaultMessage: " " })) }; l.body.overrideDownloadGlobal && (f = { label: l.messages.SITE_KEY_download || f.label, small: l.messages.SITE_CONFIG_downloadSmallEnabled || f.small, medium: l.messages.SITE_CONFIG_downloadMediumEnabled || f.medium, large: l.messages.SITE_CONFIG_downloadLargeEnabled || f.large, extralarge: l.messages.SITE_CONFIG_downloadExtraLargeEnabled || f.extralarge, fullsize: l.messages.SITE_CONFIG_downloadFullSizeEnabled || f.fullsize, fullres: l.messages.SITE_CONFIG_downloadFullResEnabled || f.fullres }); var b = l.body.downloadImageConfiguration, p = "/digital/download/collection/".concat(l.body.id, "/id/").concat(o.id), g = Math.trunc(100 * Math.random()); b.downloadFullResEnabled = b.downloadFullResEnabled && l.body.enableArchivalDownload && o.fullrsEnabled; var h = function (e, t, a) { var n = function (e) { return m[e.toUpperCase()] ? "".concat(p, "/size/").concat(m[e.toUpperCase()]) : "".concat(p) }(e); return c.a.createElement(vt.a, { key: e, href: n, target: Tt.isSafariMobile() ? "_blank" : "", "data-metrics-event-label": "download:" + t + ": " + n, onClick: function (e) { e.stopPropagation(), Ve(s, a ? "single item" : "compound object", "click", "download: ".concat(t, ": ").concat(qe(n)), "download item", { collection_alias: l.body.id, item_id: "".concat(l.body.id, "/id/").concat(o.id), item_type: a ? "single item" : "compound object", size: t }) } }, t) }, E = u.filter((function (e) { return b["download".concat(e, "Enabled")] })).map((function (e) { return h(e, function (e) { return f[e] || {} }(e.toLowerCase()), a) })); return l && l.body && E.length > 0 ? function (e) { return c.a.createElement(It.a, { id: "download-dropdown-" + g, className: "ItemDownloadImage-itemDownloadDropdown" }, c.a.createElement(It.a.Toggle, { bsStyle: "primary", className: "cdm-btn", title: f.label, "aria-label": f.label, onClick: function (e) { e.stopPropagation(), Ve(s, a ? "single item" : "compound object", "click", "download menu: ".concat(window.location), "open download menu", { collection_alias: l.body.id, item_id: "".concat(l.body.id, "/id/").concat(o.id), item_type: a ? "single item" : "compound object" }) } }, c.a.createElement(J.a, { name: "download", size: "2x" })), c.a.createElement(It.a.Menu, { id: "downloadsizemenu-".concat(t) }, e)) }(E) : c.a.createElement(c.a.Fragment, null) }), ha = (a(693), function (e) { var t = Object(n.useContext)(Re), a = Object(n.useContext)(Gt), r = Object(d.a)(a, 1)[0], o = r.item, l = o.contentType, i = o.downloadParentUri, s = Object(k.a)(), u = H.a.decode(s.formatMessage({ id: "SITE_KEY_download", defaultMessage: " " })), m = H.a.decode(s.formatMessage({ id: "SITE_KEY_printsubset_all", defaultMessage: " " })), f = H.a.decode(s.formatMessage({ id: "SITE_cdm_compoundobject_KEY_thisitem", defaultMessage: " " })), b = Object(S.useTracking)(), p = e.hasPrintPDF, g = e.type, h = e.isSingleItem, E = !(!t || !t.body) && t.body.enableDownloadButton, v = "/digital".concat(r.item.downloadUri), I = function (e, a, n) { return c.a.createElement(vt.a, { href: e, target: Tt.isSafariMobile() ? "_blank" : "", eventKey: n, onClick: function (n) { n.stopPropagation(), Ve(b, "compound object", "click", "download:".concat(a, ": ").concat(qe(e)), "download item", { collection_alias: t.body.id, download_label: a, item_id: "".concat(t.body.id, "/id/").concat(r.item.id), item_type: "compound object" }) } }, a) }; return !E || /^restricted|application\/url|application\/meta$/i.test(l) ? null : /^image\/(gif|jpeg|jp2|tiff|tif|png)$/.test(l) ? c.a.createElement(ga, { type: g, isSingleItem: h }) : t && t.body ? h ? function () { var e = h ? "single item" : "compound object", a = "".concat(h ? "download:" : "url item:", " ").concat(v); return c.a.createElement("a", { className: "cdm-btn btn btn-primary ItemDownload-itemDownloadButtonPadding", href: v, target: Tt.isSafariMobile() ? "_blank" : "", role: "button", onClick: function (n) { n.stopPropagation(), Ve(b, e, "click", a, "download item", { collection_alias: t.body.id, item_id: "".concat(t.body.id, "/id/").concat(r.item.id), item_type: h ? "single item" : "compound object" }) }, "aria-label": u }, c.a.createElement(J.a, { name: "download", size: "2x", "aria-label": u })) }() : c.a.createElement(It.a, { id: "download-dropdown-compound-item-".concat(g), className: "ItemDownload-itemDownloadDropdown" }, c.a.createElement(It.a.Toggle, { bsStyle: "primary", className: "cdm-btn", "aria-label": u, onClick: function (e) { e.stopPropagation(), Ve(b, "compound object", "click", "download menu: ".concat(window.location), "open download menu", { collection_alias: t.body.id, item_id: "".concat(t.body.id, "/id/").concat(r.item.id) }) } }, c.a.createElement(J.a, { name: "download", size: "2x", "aria-label": u })), c.a.createElement(It.a.Menu, { id: "downloadsizemenu-".concat(g) }, I(v, f, 1), p ? I(i, m, 2) : void 0)) : c.a.createElement(c.a.Fragment, null) }), Ea = c.a.createContext(), va = a(807), Ia = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/api/saved/items", Object(p.a)(Object(p.a)({ method: "POST", headers: Object(p.a)(Object(p.a)({}, Object(g.b)()), {}, { "Content-Type": "application/json" }) }, g.a), {}, { body: JSON.stringify({ items: t }) })); case 2: return a = e.sent, e.next = 5, a.json(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), Oa = function () { var e = Object(s.a)(i.a.mark((function e(t, a) { var n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/api/export/saved", Object(p.a)(Object(p.a)({ method: "POST", headers: Object(p.a)(Object(p.a)({}, Object(g.b)()), {}, { "Content-Type": "application/json", "Accept-Language": localStorage.getItem("cdm_selected_language") }) }, g.a), {}, { responseType: "blob", body: JSON.stringify({ action: a, items: t }) })); case 2: return n = e.sent, e.next = 5, n.blob(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), Sa = function () { var e = Object(s.a)(i.a.mark((function e(t, a, n) { var c; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!n && "SAVE_SHARED_LIST" !== a) { e.next = 7; break } return e.next = 3, fetch("/digital/api/saved/persist", Object(p.a)(Object(p.a)({ method: "POST", headers: Object(p.a)(Object(p.a)({}, Object(g.b)()), {}, { "Content-Type": "application/json", "Accept-Language": localStorage.getItem("cdm_selected_language") }) }, g.a), {}, { body: JSON.stringify({ requestType: a, items: t }) })); case 3: return c = e.sent, e.next = 6, c.json(); case 6: return e.abrupt("return", e.sent); case 7: case "end": return e.stop() } }), e) }))); return function (t, a, n) { return e.apply(this, arguments) } }(), ja = function () { var e = Object(s.a)(i.a.mark((function e(t, a) { var n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!a) { e.next = 6; break } return e.next = 3, fetch("/digital/api/saved/persist/async", { method: "POST", headers: { "Content-Type": "application/json", "Accept-Language": localStorage.getItem("cdm_selected_language") }, body: JSON.stringify({ requestType: "SAVE_PERSONAL_LIST", items: t }) }); case 3: return n = e.sent, e.next = 6, n.json(); case 6: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), _a = "setSavedItemIds", ya = "setSavedItems", Ca = "setSelectedSavedItem", ka = "setSavedItemsAllSelected", xa = "refreshSavedItems", Ma = "removeSavedItems", Ta = "showRemoveModal", wa = "setShowMaxItemsExceededDialog", Na = "setLoading", Aa = "setRefreshing", Fa = "setInitialSavedItems", La = { setSavedItemIds: function (e, t) { var a = t.payload, n = a.savedItemIds, c = a.authname; return a.skipPersist || ja(n, c), localStorage.setItem("savedItems", JSON.stringify(n)), Object(p.a)(Object(p.a)({}, e), {}, { savedItemIds: n }) }, setSavedItems: function (e, t) { var a = t.payload, n = a.items, c = a.authname; return Object(p.a)(Object(p.a)({}, e), {}, { items: n, authname: c, loading: !1 }) }, setSelectedSavedItem: function (e, t) { var a = t.payload, n = a.alias, c = a.id, r = a.selected, o = a.intl, l = e.items.filter((function (e) { return e.id === c && e.alias === n }))[0]; l.selected = r; var i = e.items.findIndex((function (e) { return e.id === l.id && e.alias === n })); i > -1 && (e.items[i] = l); return e.items.filter((function (e) { return !0 === e.selected })).length === e.items.length ? Object(p.a)(Object(p.a)({}, e), {}, { allSelected: !0, selectedText: H.a.decode(o.formatMessage({ id: "SITE_KEY_DeselectAllSavedItems", defaultMessage: " " })), buttonState: "active", items: e.items }) : Object(p.a)(Object(p.a)({}, e), {}, { allSelected: !1, selectedText: H.a.decode(o.formatMessage({ id: "SITE_KEY_SelectAllSavedItems", defaultMessage: " " })), buttonState: "active", items: e.items }) }, setSavedItemsAllSelected: function (e, t) { var a = t.payload, n = a.allSelected, c = a.selectedText, r = e.items.map((function (e) { return e.selected = n, e })); return Object(p.a)(Object(p.a)({}, e), {}, { allSelected: n, buttonState: t.payload.allSelected ? "active" : "disabled", items: r, selectedText: c }) }, refreshSavedItems: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { savedItemIds: t.payload.savedItemIds, isRefreshing: !0 }) }, removeSavedItems: function (e, t) { if (e.allSelected) return localStorage.removeItem("savedItems"), ja([], t.payload.authname), Object(p.a)(Object(p.a)({}, e), {}, { allSelected: !1, savedItemIds: [], showRemoveModal: !1 }); var a = Object(p.a)({}, e).items, n = a.filter((function (e) { return !0 === e.selected })), c = JSON.parse(localStorage.getItem("savedItems")); return n.forEach((function (e) { var t = a.findIndex((function (t) { return t.alias === e.alias && t.id === e.id })); t > -1 && a.splice(t, 1); var n = c.findIndex((function (t) { return t.id === e.id.toString() && t.alias === e.alias })); n > -1 && c.splice(n, 1) })), localStorage.setItem("savedItems", JSON.stringify(c)), ja(c, t.payload.authname), Object(p.a)(Object(p.a)({}, e), {}, { savedItemIds: c, items: a, showRemoveModal: !1 }) }, showRemoveModal: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { showRemoveModal: t.payload }) }, setShowMaxItemsExceededDialog: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { showMaxItemsExceededDialog: t.payload }) }, setLoading: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { loading: t.payload }) }, setRefreshing: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { isRefreshing: t.payload }) }, setInitialSavedItems: function (e, t) { return localStorage.setItem("savedItems", JSON.stringify(t.payload)), Object(p.a)(Object(p.a)({}, e), {}, { savedItemIds: t.payload }) } }, Pa = function (e, t) { return La[t.type](e, t) }, Ra = (a(694), a(45)), Ka = function (e) { var t = Object(n.useContext)(b), a = Object(n.useContext)(De.a), r = Object(n.useContext)(Ea), o = Object(d.a)(r, 2), l = o[0], i = o[1], s = Object(k.a)(), u = Object(S.useTracking)(), m = { save: H.a.decode(s.formatMessage({ id: "SITE_cdm_search_KEY_save", defaultMessage: " " })), saved: H.a.decode(s.formatMessage({ id: "SITE_KEY_selectedfavoritessaved", defaultMessage: " " })), savedItems: H.a.decode(s.formatMessage({ id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " })), savedLimitReached: H.a.decode(s.formatMessage({ id: "SITE_KEY_SavedItemsLimit", defaultMessage: " " })), clickToSave: H.a.decode(s.formatMessage({ id: "SITE_KEY_clickToSave", defaultMessage: " " })), clickToRemove: H.a.decode(s.formatMessage({ id: "SITE_KEY_clickToRemoveSaved", defaultMessage: " " })) }, f = l.savedItemIds, p = Object(n.useState)(!1), g = Object(d.a)(p, 2), h = g[0], E = g[1], v = c.a.createRef(), I = c.a.createRef(), O = a.enableSavedItems, j = function () { return !!f && f.find((function (t) { return t.id === e.itemId && t.alias === e.collectionId })) }, _ = function (e) { i({ type: _a, payload: { savedItemIds: e, authname: t.name } }) }, y = function () { E(!1) }, C = function () { /(Android|iPod|iPhone|iPad|IEMobile|Windows Phone)/i.test(navigator.userAgent) || function () { var t = v.current.classList; f.find((function (t) { return t.id === e.itemId && t.alias === e.collectionId })) ? (t.remove("fa-star"), t.add("fa-star-o")) : (t.remove("fa-star-o"), t.add("fa-star")) }() }, x = function () { /(Android|iPod|iPhone|iPad|IEMobile|Windows Phone)/i.test(navigator.userAgent) || function () { var t = v.current.classList; f.find((function (t) { return t.id === e.itemId && t.alias === e.collectionId })) ? (t.remove("fa-star-o"), t.add("fa-star")) : (t.remove("fa-star"), t.add("fa-star-o")) }() }, M = function () { var t = e.itemId, a = e.collectionId, n = e.saveKey, c = { alias: a, id: t }, r = f; if (j()) { var o = r.filter((function (e) { return JSON.stringify(e) !== JSON.stringify(c) })); _(o) } else r ? r.length > 199 ? e.handleShow ? e.handleShow() : E(!0) : (Ve(u, "saved items", "item saved", "Collection-Item: ".concat(n), "save item", { collection_alias: a, item_id: "".concat(a, "/id/").concat(t) }), r.push(c), _(JSON.parse(JSON.stringify(r)))) : (Ve(u, "saved items", "item saved", "Collection-Item: ".concat(n), "save item", { collection_alias: a, item_id: "".concat(a, "/id/").concat(t) }), _([c])) }, T = function (e) { e.preventDefault(), e.stopPropagation(), M() }, w = e.cardType, N = e.saveKey, A = c.a.createElement("button", { type: "button", className: "FavoritesButton-favoriteButton btn savedButton ".concat("list" === w ? "FavoritesButton-listFavorite" : "grid" === w ? "FavoritesButton-gridFavorite" : "FavoritesButton-itemFavorite"), id: N, "aria-label": m.clickToRemove, onMouseEnter: C, onMouseLeave: x, onClick: T }, c.a.createElement("span", { ref: v, className: "FavoritesButton-saveIcon fa fa-star" }), c.a.createElement("span", { ref: I }, m.saved)), F = c.a.createElement("button", { type: "button", className: "FavoritesButton-favoriteButton btn saveButton ".concat("list" === w ? "FavoritesButton-listFavorite" : "grid" === w ? "FavoritesButton-gridFavorite" : "FavoritesButton-itemFavorite"), id: N, "aria-label": m.clickToSave, onMouseEnter: C, onMouseLeave: x, onClick: T }, c.a.createElement("span", { ref: v, className: "FavoritesButton-saveIcon fa fa-star-o" }), c.a.createElement("span", { ref: I }, m.save)), L = j() ? A : F, P = Ra.renderToString(c.a.createElement("b", null, m.savedItems)), R = H.a.decode(s.formatMessage({ id: "SITE_KEY_MaxSavedItems", defaultMessage: "You have reached the maximum number of {MAX_SAVED_ITEMS, number} for {SAVED_ITEMS_TMX}." }, { SAVED_ITEMS_TMX: P, MAX_SAVED_ITEMS: 200 })), K = H.a.decode(s.formatMessage({ defaultMessage: "You cannot save more items until you visit the {SAVED_ITEMS_TMX} page and remove some items.", id: "SITE_KEY_RemoveSavedInstruction" }, { SAVED_ITEMS_TMX: P })); return O ? c.a.createElement("div", { className: "FavoritesButton-buttonContainer" }, L, e.handleShow ? null : c.a.createElement(va.a, { className: "FavoritesButton-favoritesModal", show: h, onHide: y, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "FavoritesButton-maxItemsModalHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, m.savedLimitReached)), c.a.createElement(va.a.Body, null, c.a.createElement("p", { className: "FavoritesButton-modalText" }, c.a.createElement("span", { dangerouslySetInnerHTML: { __html: R } }), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement("span", { dangerouslySetInnerHTML: { removeSavedItemsInstructionsMsg: K } }))), c.a.createElement(va.a.Footer, { className: "FavoritesButton-modalFooter" }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: y }, "OK")))) : null }, Ba = (a(721), function (e) { var t = Object(x.i)(), a = t.collectionAlias, r = t.itemId, o = Object(n.useContext)(De.a), l = e.compoundIndex, i = e.hasPrintPDF, s = e.isSingleItem, d = e.parentId, u = e.type, m = e.itemTitle, f = e.itemThumbnail; return c.a.createElement("div", { className: "".concat(e.className, " ItemOptions-itemPrintOptions") }, c.a.createElement("div", null, c.a.createElement("div", { className: "ItemOptions-itemShareRow", "data-id": "itemShareRow" }, c.a.createElement(pa, { itemTitle: m, itemThumbnail: f, isSingleItem: s, collectionAlias: a, itemId: r }))), c.a.createElement("div", { className: "ItemOptions-itemOptions" }, c.a.createElement("div", { className: "btn-toolbar pull-right" }, o.enableSavedItems ? c.a.createElement(Ka, { itemId: r, collectionId: a, saveKey: "".concat(a, "-").concat(r) }) : c.a.createElement(c.a.Fragment, null), c.a.createElement(ha, { hasPrintPDF: i, type: u, isSingleItem: s }), c.a.createElement(ba, { collectionId: a, hasPrintPDF: i, parentId: d, compoundIndex: l, type: u })))) }), Da = (a(722), a(177)), Ya = a.n(Da), Ha = function (e) { var t = e.searchRegexes, a = e.text, n = t.all || ""; return c.a.createElement(Ya.a, { "data-id": "itemText", search: n, matchElement: "span" }, a) }; a(730); var Ua = function (e) { return e && null === e.offsetParent }, Va = function (e) { var t = Object(k.a)(), a = { previousLabel: H.a.decode(t.formatMessage({ id: "SITE_KEY_previous", defaultMessage: " " })), nextLabel: H.a.decode(t.formatMessage({ id: "SITE_KEY_next", defaultMessage: " " })) }, r = c.a.createRef(), o = c.a.createRef(), l = c.a.createRef(), i = e.disabledPreviousButton, s = e.disabledNextButton, d = e.onNext, u = e.onPrevious; Object(n.useEffect)((function () { if (o.current) return window.addEventListener("scroll", m), function () { window.removeEventListener("scroll", m) } })); var m = function () { i && s || Ua(r.current) || !r.current || !l.current || (f(r, l.current.clientHeight) ? l.current.className = "" : l.current.className = "ItemTextNav-itemTextNavHolderTop") }, f = function (e, t) { if (e.current) { var a = e.current.getBoundingClientRect(), n = window.innerWidth || document.documentElement.clientWidth, c = n > 768; return a.top - t >= (c ? 125 : 0) && a.left >= 0 && a.right <= n } return !1 }; return c.a.createElement("div", { className: "ItemTextNav-itemTextNavHolder", ref: o }, c.a.createElement("div", { ref: r }), c.a.createElement("div", { className: "", ref: l }, c.a.createElement("button", { type: "button", "aria-label": a.previousLabel, title: a.previousLabel, className: "btn btn-default cdm-btn ItemTextNav-itemTextNavButtonPadding", disabled: i, onClick: u }, c.a.createElement(J.a, { name: "caret-left", size: "2x" })), c.a.createElement("button", { type: "button", "aria-label": a.nextLabel, title: a.nextLabel, className: "btn btn-default cdm-btn ItemTextNav-itemTextNavButtonPadding", disabled: s, onClick: d }, c.a.createElement(J.a, { name: "caret-right", size: "2x" })))) }; var Ga = function (e) { var t = e.getBoundingClientRect(), a = window.innerWidth || document.documentElement.clientWidth, n = a > 768; return t.top >= (n ? 125 : 0) && t.left >= 0 && t.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t.right <= a }, qa = Object(n.memo)((function (e) { var t = e.text, a = e.searchRegexes, r = Fe(t), o = Object(x.g)(), l = Object(x.i)(), i = l.collectionAlias, s = l.itemId, u = Object(n.useContext)(Gt), m = Object(d.a)(u, 2), f = m[0], b = m[1], g = f.isLoadingNextPrevItem, h = o.location.state && o.location.state.itemSearchInfo, E = h && h.records, v = o.location.pathname.split("/rec/")[1], I = o.location.state && o.location.state.shouldScroll, O = Object(n.useState)(I), S = Object(d.a)(O, 2), j = S[0], _ = S[1], y = Object(n.useState)(0), C = Object(d.a)(y, 2), k = C[0], M = C[1], T = Object(n.useState)(Array.from(document.querySelectorAll(".".concat("highlight")))), w = Object(d.a)(T, 2), N = w[0], A = w[1], F = c.a.createRef(), L = s, P = s; E && E.length > 0 && (L = E[0][0].toString(), P = E.length > 1 ? E[E.length - 1][0].toString() : L); var R = Object(n.useCallback)((function () { var e = Array.from(document.querySelectorAll(".".concat("highlight"))); e.forEach((function (e) { return e.classList.remove("".concat("highlightSelected")) })); var t = e[0]; k > 0 && (t = e[k] || e[e.length - 1], j || I || M(0)), t && (t.classList.add("".concat("highlightSelected")), V(t, j)) }), [k, j, I]); Object(n.useEffect)((function () { if (t) { var e = Array.from(document.querySelectorAll(".".concat("highlight"))); _(!1), A(e) } }), [t, h]), Object(n.useEffect)((function () { var e = Array.from(document.querySelectorAll(".".concat("highlight"))); F.current && e.length > 0 && !g && R() }), [k, h, F, g, R]), Object(n.useEffect)((function () { _(!g && I) }), [g, I]); var K = s === L && 0 === k || g, B = s === P && k === N.length - 1 || g, D = function () { k > 0 ? M(k - 1) : Y() }, Y = function () { var e = E.findIndex((function (e) { return e[0].toString() === s })), t = e - 1, a = E[t][0], n = N.length - E[e][1] - 1, c = E[t][1] + n; b({ type: "turnOnLoadingNextPrevItem" }), M(c), o.push({ pathname: "/digital/collection/".concat(i, "/id/").concat(a).concat(v ? "/rec/".concat(v) : ""), state: Object(p.a)(Object(p.a)({}, o.location.state), {}, { shouldScroll: !0 }) }) }, H = function () { k < N.length - 1 ? (M(k + 1), _(!0)) : U() }, U = function () { var e = E.findIndex((function (e) { return e[0].toString() === s })), t = E[e + 1][0]; b({ type: "turnOnLoadingNextPrevItem" }), M(0); var a = "/digital/collection/".concat(i, "/id/").concat(t).concat(v ? "/rec/".concat(v) : ""); o.push({ pathname: a, state: Object(p.a)(Object(p.a)({}, o.location.state), {}, { shouldScroll: !0 }) }) }, V = function (e, t) { if (e && !Ga(e) && t) { e.scrollIntoView(); var a = window.scrollY; a && window.scroll(0, a - 155) } }; return c.a.createElement("div", { className: "ItemText-container", ref: F }, N.length > 0 ? c.a.createElement(Va, { onPrevious: D, onNext: H, disabledPreviousButton: K, disabledNextButton: B }) : null, c.a.createElement(Ha, { text: r, searchRegexes: a })) })), za = a(803), Wa = (a(731), a(176)), Qa = a.n(Wa), Ja = /(\b(?:(?:https?:\/\/)(?:[\da-z-]+)\.(?:[a-z]{2,6})(?:[!#$&-;%=?-[\]\w~]*)*)\b\/?)/im; function Xa(e, t) { var a = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]; return e && a ? c.a.createElement(Ya.a, { search: e, matchElement: "span" }, t) : t } function Za(e, t, a, n, r, o) { var l = [], i = null, s = 0; return n.sort((function (e, t) { return e.start - t.start })).reduce((function (d, u, m) { if (s = d.start + d.text.length, d.start <= u.start && u.start < s) i = d; else { if (l.push(a.substring(s, u.start)), u.link) l.push(c.a.createElement("a", { key: m, href: u.text, target: "_blank", rel: "noopener noreferrer", onClick: function (e) { o("metadata", "click", "link:".concat(st(u.text)), "click metadata link", { link: st(u.text) }) } }, r(u.text))); else if (u.keyword) { var f = function (e, t, a) { var n = { searchTerm: a = (a = a.replace(/!/g, "")).replace(/,/g, "%2C"), mode: "exact", connector: "and", field: t }; return Qa()("/digital/collection/".concat(e, "/search/searchterm/").concat(n.searchTerm, "/field/").concat(n.field, "/mode/").concat(n.mode, "/conn/").concat(n.connector)) }(e, t, u.text); l.push(function (e, t, a, n, r) { var o = function () { r("metadata", "click", "link:".concat(st(t)), "click metadata link", { link: st(t) }) }; return e.includes("%") ? c.a.createElement("a", { key: a, href: t, onClick: o }, n(e)) : c.a.createElement(Ae.b, { key: a, to: t, onClick: o }, n(e)) }(u.text, f, m, r, o)) } else l.push(r(u.text)); i = u } return n.length - 1 === m && l.push(a.substring(i.start + i.text.length)), i }), { start: 0, text: "" }), l } function $a(e, t, a, n, c) { if (!a) return null; if ("string" !== typeof a.value) return Xa(n, a.value, a.searchable); var r = [], o = Le(a.value).trim(); return t && a.searchable && a.controlledVocab ? r = r.concat({ start: 0, text: o, keyword: !0 }) : Ja.test(o) && (r = r.concat(function (e) { var t = [], a = 0, n = null; if (!e) return t; for (; n = Ja.exec(e.substring(a));)t.push({ start: n.index + a, text: n[0], link: !0 }), a += n.index + n[0].length; return t }(o))), r.length > 0 ? Za(e, a.key, o, r, (function (e) { return Xa(n, e, a.searchable) }), c).filter((function (e) { return e })) : Xa(n, o, a.searchable) } var en = function (e) { var t = ut(), a = e.collectionId, n = e.enableMetadataHyperlinking, r = e.field, o = e.searchRegex, l = null; return "string" === typeof (l = r.controlledVocab && "string" === typeof r.value ? r.value.split(";").filter((function (e) { return e })).map((function (e, l) { var i = Object.assign({}, r, { value: e }), s = $a(a, n, i, o, t); return c.a.createElement("span", { key: l }, s, c.a.createElement("br", null)) })) : $a(a, n, r, o, t)) || Array.isArray(l) ? c.a.createElement("span", { key: r.key }, l) : l || c.a.createElement(c.a.Fragment, null) }, tn = en, an = function (e) { var t = ["fullrs"], a = Object(n.useContext)(Re), r = function (t, n, r) { var l = null; Object.keys(r).length > 0 && (l = r[t.key] ? r[t.key] : r.all); var i = function (t, n) { return c.a.createElement(tn, { field: t, collectionId: e.collectionId, enableMetadataHyperlinking: a.body.enableMetadataHyperlinking, searchRegex: n }) }(o(t), l), s = "ItemMetadata-metadatarow field-".concat(t.key); return c.a.createElement("tr", { key: n, className: s }, c.a.createElement("td", { className: "ItemMetadata-key field-label" }, t.label), c.a.createElement("td", { className: "field-value" }, i)) }, o = function (e) { return t.indexOf(e.key) > -1 && (e.value = l(e.value)), e }, l = function (e) { var t = document.createElement("normalizeLink"); return t.innerHTML = e, t.firstChild.textContent }, i = e.className, s = e.fields, d = e.searchRegexes, u = "".concat(i, " ItemMetadata-itemMetaPrint"); return a && a.body ? c.a.createElement(za.a, { "data-id": "metadataTable", className: u }, c.a.createElement("tbody", null, s.map((function (e, t) { return r(e, t, d) })))) : c.a.createElement(c.a.Fragment, null) }, nn = an, cn = function () { var e = Object(s.a)(i.a.mark((function e(t, a, n) { var c, r; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return c = "/digital/api/fulltexttotals/collection/".concat(t, "/id/").concat(a, "/searchterm/").concat(n), e.prev = 1, e.next = 4, fetch(c, Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 4: return r = e.sent, e.next = 7, r.json(); case 7: return e.abrupt("return", e.sent); case 10: e.prev = 10, e.t0 = e.catch(1), console.error(e.t0); case 13: case "end": return e.stop() } }), e, null, [[1, 10]]) }))); return function (t, a, n) { return e.apply(this, arguments) } }(), rn = (a(732), function () { var e = Object(k.a)(), t = Object(x.g)(), a = Object(n.useContext)(Gt), r = Object(d.a)(a, 2), o = r[0], l = r[1], u = o.item, m = u.collectionAlias, f = u.parentId, b = t.location.pathname.split("/rec/")[1], g = ut(), h = o.item && !!o.item.parent, E = t.location.state, v = "SearchLabel-" + Math.trunc(100 * Math.random()), I = E && E.itemSearchInfo && E.itemSearchInfo.searchTerm ? E.itemSearchInfo.searchTerm : E && E.searchTerm ? E.searchTerm : "", O = Object(n.useState)(I), S = Object(d.a)(O, 2), j = S[0], _ = S[1]; Object(n.useEffect)((function () { _(I) }), [I, t]), Object(n.useEffect)((function () { _(decodeURIComponent(j).replace(/%2F/g, "/")) }), []); var y = { search: H.a.decode(e.formatMessage({ id: "SITE_KEY_search", defaultMessage: " " })), searchThisRecord: H.a.decode(e.formatMessage({ id: "SITE_KEY_searchThisRecord", defaultMessage: " " })), allItems: H.a.decode(e.formatMessage({ id: "SITE_cdm_compoundobject_KEY_allitems", defaultMessage: " " })), clearThisSearch: H.a.decode(e.formatMessage({ id: "SITE_KEY_clearThisSearch", defaultMessage: " " })) }, C = function () { return j && j.length > 0 }, M = function () { var e = Object(s.a)(i.a.mark((function e(a, n, c, r) { var s; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return o.item.parentId < 0 && (n = o.item.id), a.preventDefault(), l({ type: "turnOnItemSearchLoading" }), c.includes("%") && (c = c.replace("%", "%25")), e.next = 6, cn(m, n, c); case 6: (s = e.sent).searchTerm = c, l({ type: "turnOffItemSearchLoading" }), s.records[0] ? t.push({ pathname: "/digital/collection/".concat(m, "/id/").concat(s.records[0][0]).concat(b ? "/rec/".concat(b) : ""), state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { itemSearchInfo: s, shouldScroll: !1 }) }) : t.push({ state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { itemSearchInfo: s, shouldScroll: !1 }) }); case 10: case "end": return e.stop() } }), e) }))); return function (t, a, n, c) { return e.apply(this, arguments) } }(); return c.a.createElement("div", { className: "ItemView-itemSearchContainer ItemSearch-itemSearchPrint" }, c.a.createElement("label", { id: v, className: "ItemSearch-itemSearchLabel", "aria-label": y.searchThisRecord }, y.searchThisRecord), c.a.createElement("div", { className: "ItemSearch-itemSearchControl" }, c.a.createElement("div", { className: "ItemSearch-itemSearchInput" }, c.a.createElement("input", { onKeyDown: function (e) { C() && 13 === e.keyCode && (g("".concat(h ? "compound object" : "single item"), "return", "search within: ".concat(j), "search within item", { collection_alias: "".concat(m), parent_id: "".concat(m, "/id/").concat(f), query: "".concat(j), item_id: "".concat(m, "/id/").concat(o.itemId) }), M(e, f, j, h)) }, onChange: function (e) { return _(e.target.value) }, className: "ItemSearch-itemSearchInputControl", type: "search", title: y.searchThisRecord, value: j })), c.a.createElement("div", { className: "ItemSearch-itemSearchButton" }, c.a.createElement("button", { type: "button", "aria-labelledby": v, title: y.search, className: "cdm-btn btn btn-primary button transparentIcon headerIconButton ItemSearch-itemHeaderButtonPadding", onClick: function (e) { C() && (g("".concat(h ? "compound object" : "single item"), "click", "search within: ".concat(j), "search within item", { collection_alias: m, parent_id: "".concat(m, "/id/").concat(f), query: j, item_id: "".concat(m, "/id/").concat(o.itemId) }), M(e, f, j, h)) } }, c.a.createElement(J.a, { name: "search", size: "2x" }))), c.a.createElement("div", { className: "ItemSearch-itemSearchButton" }, c.a.createElement("button", { type: "button", "aria-label": y.clearThisSearch, title: y.clearThisSearch, className: "cdm-btn btn btn-primary button transparentIcon headerIconButton ItemSearch-itemHeaderButtonPadding", onClick: function () { j.length > 0 && _(""), t.push({ state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { itemSearchInfo: { pager: {}, records: [], searchTerm: "" }, shouldScroll: !1 }) }) } }, c.a.createElement(J.a, { name: "times-circle", size: "2x" })))), c.a.createElement("div", { className: "ItemSearch-itemSearchResults" }, function () { var t = -1 !== f || /\.cpd$\b/i.test(o.item.filename), a = E && (E.searchTerm || E.itemSearchInfo) ? E : null, n = a && a.itemSearchInfo && a.itemSearchInfo.searchTerm ? a.itemSearchInfo.searchTerm : a && a.searchTerm ? a.searchTerm : ""; if (!t) { if (n) { var r = E.itemSearchInfo.pager.total; return c.a.createElement("span", { className: "ItemSearch-itemResultLabel" }, H.a.decode(e.formatMessage({ id: "SITE_KEY_resultsFoundCount", defaultMessage: " " }, { total_items: r }))) } return null } }())) }), on = rn, ln = a(48), sn = (a(733), function () { var e = Object(k.a)(), t = Object(x.g)(), a = t.location.state.searchResults.url, n = Object(ln.b)(), r = Object(d.a)(n, 1)[0], o = t.location.pathname.split("/rec/")[1], l = Math.ceil(o / r); a = a.replace(/page(.*)/, "page/".concat(l)); return c.a.createElement("div", { className: "BackToResults-backLink" }, c.a.createElement(Ae.b, { to: a }, c.a.createElement(J.a, { name: "long-arrow-left fa-lg", className: "BackToResults-arrowPadding" }), H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_back_to_results", defaultMessage: " " })))) }), dn = sn, un = Object(n.createContext)(), mn = a(119), fn = { totalResults: 0, paginatedItems: [{}] }, bn = function (e, t) { return { type: "itemPagingReady", payload: { paginatedItems: e.map((function (e) { return { collectionAlias: e.collectionAlias, itemId: e.itemId } })), totalResults: t } } }, pn = { itemPagingReady: function (e, t) { var a = t.payload, n = a.paginatedItems, c = a.totalResults; return Object(p.a)(Object(p.a)({}, e), {}, { paginatedItems: Object(mn.a)(n), totalResults: c }) } }, gn = function (e, t) { return pn[t.type](e, t) }, hn = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a, n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return a = t ? "/".concat(t) : "", e.next = 3, fetch("/digital/api/searchcontrols".concat(a), Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 3: return n = e.sent, e.next = 6, n.json(); case 6: return e.abrupt("return", e.sent); case 7: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), En = function () { var e = Object(s.a)(i.a.mark((function e(t, a, n, c) { var r, o, l, s, d, u, m, f, b, h; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return r = Object(ft.b)(t, a, n), o = r.collectionPath, l = r.searchterm, s = r.field, d = r.mode, u = r.conn, m = r.sortOrderAndDirection, f = r.page, b = r.maxRecordsPath, e.prev = 1, e.next = 4, fetch("/digital/api/search".concat(o).concat(l).concat(s).concat(d).concat(u).concat(m).concat(f).concat(b), Object(p.a)({ method: "GET", headers: Object(p.a)(Object(p.a)({}, Object(g.b)()), {}, { "Content-Type": "application/json" }), signal: c }, g.a)); case 4: return h = e.sent, e.next = 7, h.json(); case 7: return e.abrupt("return", e.sent); case 10: return e.prev = 10, e.t0 = e.catch(1), e.abrupt("return", { error: e.t0 }); case 13: case "end": return e.stop() } }), e, null, [[1, 10]]) }))); return function (t, a, n, c) { return e.apply(this, arguments) } }(), vn = (a(734), function () { var e = Object(k.a)(), t = Object(x.g)(), a = ut(), r = Object(n.useContext)(un), o = Object(d.a)(r, 2)[1], l = Object(n.useContext)(Gt), u = Object(d.a)(l, 2), m = u[0], f = u[1], b = m.item, g = Object(ln.b)(), h = Object(d.a)(g, 1)[0], E = (t.location.state || {}).searchResults, v = E || { totalResults: 0, paginatedItems: [], url: "" }, I = v.totalResults, O = v.paginatedItems, S = v.url, j = t.location.pathname.split("/rec/")[1], _ = Math.ceil(j / h), y = j - (_ - 1) * h - 1, C = b && !!b.parent, M = { id: "SITE_KEY_result", defaultMessage: " " }, T = { id: "SITE_KEY_previous_record", defaultMessage: " " }, w = { id: "SITE_KEY_next_record", defaultMessage: " " }, N = H.a.decode(e.formatMessage(T)), A = H.a.decode(e.formatMessage(w)), F = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(t) { var a, n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, Object(ft.f)({ pathname: S }); case 2: return a = e.sent, e.next = 5, En(a, h, t); case 5: return n = e.sent, e.abrupt("return", [n.items, n.totalResults]); case 7: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), [h, S]), L = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(a, n) { var c, r, l, s, u, m, b, g, E, v, I; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return c = (_ - 1) * h + n, f({ type: "turnOnLoadingNextPrevItem" }), e.next = 4, F(a); case 4: if (r = e.sent, l = Object(d.a)(r, 2), s = l[0], u = l[1], m = a < _ ? s.length - 1 : 0, b = s[m], g = b.collectionAlias, E = b.itemId, o(bn(s, u)), f({ type: "turnOffLoadingNextPrevItem" }), !(v = t.location.state && t.location.state.searchTerm)) { e.next = 19; break } return e.next = 16, cn(g, E, v); case 16: e.t0 = e.sent, e.next = 20; break; case 19: e.t0 = null; case 20: I = e.t0, t.push({ pathname: "/digital/collection/".concat(g, "/id/").concat(I && I.records[0] ? I.records[0][0] : E, "/rec/").concat(c + 1), state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { itemSearchInfo: I, shouldScroll: !1, searchResults: { paginatedItems: s, totalResults: u, url: S } }) }); case 22: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), [o, t, F, _, f, h, S]), P = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(n, c) { var r, o, l, s, d, u, m; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (r = (_ - 1) * h + n, !(n > O.length - 1)) { e.next = 6; break } return e.next = 4, L(_ + 1, n); case 4: e.next = 25; break; case 6: if (!(n < 0)) { e.next = 11; break } return e.next = 9, L(_ - 1, n); case 9: e.next = 25; break; case 11: if (o = O[n], l = o.collectionAlias, s = o.itemId, d = "previous result" === c ? "previous" : "next", a(C ? "compound object" : "single item", "click", "".concat(c, ": /digital/collection/").concat(l, "/id/").concat(s, "/rec/").concat(r + 1), "move to next result", { type: "".concat(d), collection_alias: "".concat(l), item_id: "".concat(l, "/id/").concat(s) }), f({ type: "turnOnLoadingNextPrevItem" }), !(u = t.location.state && t.location.state.searchTerm)) { e.next = 22; break } return e.next = 19, cn(l, s, u); case 19: e.t0 = e.sent, e.next = 23; break; case 22: e.t0 = null; case 23: m = e.t0, t.push({ pathname: "/digital/collection/".concat(l, "/id/").concat(m && m.records[0] ? m.records[0][0] : s, "/rec/").concat(r + 1), state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { itemSearchInfo: m, url: S, shouldScroll: !1 }) }); case 25: case "end": return e.stop() } }), e) }))); return function (t, a) { return e.apply(this, arguments) } }(), [O, S, h, t, L, _, f, a, C]), R = Object(n.useCallback)(Object(s.a)(i.a.mark((function e() { return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, P(y - 1, "previous result"); case 2: case "end": return e.stop() } }), e) }))), [P, y]), K = Object(n.useCallback)(Object(s.a)(i.a.mark((function e() { return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, P(y + 1, "next result"); case 2: case "end": return e.stop() } }), e) }))), [P, y]), B = Object(n.useCallback)((function () { return (_ - 1) * h + y }), [_, h, y]); return I > 0 && S || E ? c.a.createElement("div", { className: "ItemView-itemViewPager ItemViewPager-pager" }, c.a.createElement("button", { "aria-label": N, title: N, type: "button", className: "cdm-btn btn btn-primary ItemViewPager-angle", onClick: R, disabled: B() < 1 }, c.a.createElement(J.a, { name: "angle-left", className: "fa-2x" })), c.a.createElement("span", { className: "ItemViewPager-result" }, "".concat(H.a.decode(e.formatMessage(M)), " ").concat(e.formatNumber(j), " of "), c.a.createElement(ma.a, { value: I })), c.a.createElement("button", { "aria-label": A, title: A, type: "button", className: "cdm-btn btn btn-primary ItemViewPager-angle", onClick: K, disabled: B() >= I - 1 }, c.a.createElement(J.a, { name: "angle-right", className: "fa-2x" })), c.a.createElement(dn, null)) : c.a.createElement(c.a.Fragment, null) }), In = vn, On = (a(735), function (e) { var t = Object(x.g)(), a = ut(), r = Object(n.useContext)(Gt), o = Object(d.a)(r, 2)[1], l = e.collectionAlias, i = e.currentItemId, s = e.item, u = e.searchResult, m = e.parentId, f = t.location.pathname.split("/rec/")[1], b = Object(n.useCallback)((function () { i !== s.id && (a("compound object", "navigation: ".concat(window.location.origin, "/digital/collection/").concat(l, "/id/").concat(m), "".concat(window.location.origin, "/digital/collection/").concat(l, "/id/").concat(s.id), "select compound item page", { collection_alias: l, parent_id: "".concat(l, "/id/").concat(m), item_id: "".concat(l, "/id/").concat(s.id), source: "clicked on page" }), o({ type: "turnOnLoadingNextPrevItem" }), t.push({ pathname: "/digital/collection/".concat(l, "/id/").concat(s.id).concat(f ? "/rec/".concat(f) : ""), state: Object(p.a)(Object(p.a)({}, t.location.state), {}, { shouldScroll: !1 }) })) }), [s.id, m, f, l, i, t, a, o]); return c.a.createElement("div", { className: ["CompoundItemView-overlay"] }, c.a.createElement("div", { role: "link", className: "row CompoundItemView-container ".concat(i === s.id ? "CompoundItemView-selectedCompoundItem" : "", " ").concat(u ? "CompoundItemView-searchResult" : ""), onClick: b, onKeyDown: function (e) { "Enter" === e.key && b() }, tabIndex: 0 }, c.a.createElement("div", { className: "CompoundItemView-thumbnailHolder" }, c.a.createElement("img", { src: "/digital" + s.thumbnailUri, className: "CompoundItemView-thumbnail", alt: s.title })), c.a.createElement("h2", { className: "CompoundItemView-header" }, s.title))) }), Sn = On, jn = a(435), _n = (a(736), function (e) { var t = Object(k.a)(), a = ut(), n = { filteredView: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_filteredView", defaultMessage: " " })), nonFilteredView: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_nonFilteredView", defaultMessage: " " })), filteredViewAlt: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_filteredViewAlt", defaultMessage: " " })), nonFilteredViewAlt: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_nonFilteredViewAlt", defaultMessage: " " })) }, r = e.pagerObjectMatches, o = e.isFiltered ? "active" : "", l = e.isFiltered ? "" : "active", i = e.pagerTotal - r === 0 || void 0 === e.pagerTotal, s = null; return e.isSearchWithin && !i && (s = c.a.createElement(jn.a, { name: "display-options", className: "FilteredDisplaySelector-displayOptionContainer" }, c.a.createElement(W.a, { "aria-label": n.nonFilteredViewAlt, title: n.nonFilteredViewAlt, className: "FilteredDisplaySelector-searchHeaderBtnInactive cdm-toggle-btn " + l, value: "Show All View", onClick: function () { e.isFiltered && (a("search results", "click", "compound object display mode switched to: Show All", "switch display mode", { collection_alias: e.collectionAlias, parent_id: "".concat(e.collectionAlias, "/id/").concat(e.parentId), type: "Filtered" }), e.onChange(!1)) } }, n.nonFilteredView), c.a.createElement(W.a, { "aria-label": n.filteredViewAlt, title: n.filteredViewAlt, className: "FilteredDisplaySelector-searchHeaderBtnInactive cdm-toggle-btn " + o, value: "Filtered View", onClick: function () { e.isFiltered || (a("search results", "click", "compound object display mode switched to: Filtered", "switch display mode", { collection_alias: e.collectionAlias, parent_id: "".concat(e.collectionAlias, "/id/").concat(e.parentId), type: "Show all" }), e.onChange(!0)) } }, n.filteredView))), s }), yn = _n, Cn = (a(737), function () { return c.a.createElement("div", { className: "Spinner-container" }, c.a.createElement(J.a, { className: "Spinner-spinner", name: "refresh", "aria-hidden": "true" })) }), kn = Cn, xn = (a(738), function (e) { var t = Object(k.a)(), a = Object(x.g)(), r = ut(), o = Object(n.useState)(!1), l = Object(d.a)(o, 2), i = l[0], s = l[1], u = Object(n.useContext)(Gt), m = Object(d.a)(u, 2), f = m[0], b = m[1], g = f.item, h = a.location.state, E = e.itemId, v = e.collectionAlias, I = e.parentId, O = e.parentTitle, S = e.items, j = e.allItems, _ = e.itemIds, y = e.isSearching, C = h && h.itemSearchInfo && h.itemSearchInfo.pager, M = h && (h.searchTerm || h.itemSearchInfo) ? h : null, T = M && M.itemSearchInfo && M.itemSearchInfo.searchTerm ? M.itemSearchInfo.searchTerm : M && M.searchTerm ? M.searchTerm : "", w = { allItems: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_KEY_allitems", defaultMessage: " " })) }, N = i ? S : j, A = N.findIndex((function (e) { return e.id === E })), F = A > 0 ? Math.floor(A / 10) + 1 : 1, L = N.slice(10 * (F - 1), 10 * F).map((function (e, t) { return c.a.createElement("div", { key: t }, c.a.createElement(Sn, { key: e.id, collectionAlias: v, currentItemId: E, item: e, searchResult: _.includes(e.id), parentId: I })) })), P = F > (N.length % 10 !== 0 ? Math.floor(N.length / 10) + 1 : Math.floor(N.length / 10)) || F < 1 ? 1 : F, R = i ? g.parent.children.filter((function (e) { return _.includes(e.id) })) : g.parent.children, K = { cardsPerPage: 10, totalCollections: N.length, pageNumber: P, cards: N.length, trackPage: "Item page", itemName: "SITE_KEY_recordsPaginator", item: Object(p.a)(Object(p.a)({}, g), {}, { parent: Object(p.a)(Object(p.a)({}, g.parent), {}, { children: R }) }), collectionAlias: v }, B = T && T.length > 0 ? c.a.createElement("div", { className: "CompoundItemViewer-results" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_resultsFoundInCount", defaultMessage: " " }, { total_items: C ? C.total : 0 }))) : c.a.createElement("div", { className: "CompoundItemViewer-results CompoundItemViewer-mobile" }, w.allItems); return c.a.createElement("div", { className: "ItemView-compoundItemViewer CompoundItemViewer-nonprintable" }, c.a.createElement(yn, { collectionAlias: v, parentId: I, isFiltered: Boolean(i), isSearchWithin: Boolean(T), onChange: function (e) { s(e), _.includes(E) || function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ""; r("compound object", "navigation: ".concat(window.location.origin, "/digital/collection/").concat(t, "/id/").concat(I), "".concat(window.location.origin, "/digital/collection/").concat(t, "/id/").concat(e), "select compound item page", { collection_alias: t, parent_id: "".concat(t, "/id/").concat(I), parent_title: O, item_id: "".concat(t, "/id/").concat(e), source: "changed to filtered view" }); var n = a.location.pathname.split("/rec/")[1]; a.push({ pathname: "/digital/collection/".concat(t, "/id/").concat(e).concat(n ? "/rec/".concat(n) : ""), state: Object(p.a)(Object(p.a)({}, h), {}, { shouldScroll: !1 }) }) }(_[0], v, null, I, !1) }, pager: C, pagerTotal: C ? C.total : 0, pagerObjectMatches: C ? C.objectMetadataMatches : 0 }), B, y ? c.a.createElement(kn, null) : L, c.a.createElement("div", { className: "CompoundItemViewer-paginator" }, c.a.createElement(Nt.a.Provider, { value: [null, null] }, c.a.createElement(Rt, { hideInfo: !0, isCompoundItem: !0, pageInfo: K, itemDispatch: b })))) }), Mn = xn, Tn = a(806), wn = (a(739), function (e) { var t = Object(n.useState)(e.expanded), a = Object(d.a)(t, 2), r = a[0], o = a[1], l = Object(n.useState)(null), i = Object(d.a)(l, 2), s = i[0], u = i[1], m = Object(n.useRef)(null), f = Object(k.a)(); Object(n.useEffect)((function () { s || setTimeout((function () { m.current && u({ color: window.getComputedStyle(m.current).getPropertyValue("color") }) })) }), [s]); var b = Object(n.useCallback)((function () { }), []), p = function () { var t = ""; return e.headerTitle && (t = t = r ? "close ".concat(e.headerTitle, " details") : "open ".concat(e.headerTitle, " details")), t }, g = function (t) { return c.a.createElement("h2", { title: t }, e.isModal ? null : c.a.createElement(J.a, { fixedWidth: !0, "aria-hidden": !0, className: r ? "Panel-fontAwesomeIconExpanded" : "Panel-fontAwesomeIcon", name: "".concat(r ? "fas" : "far", " fa-play-circle"), rotate: r ? 90 : void 0 }), r || e.isModal ? c.a.createElement("span", { className: "Panel-panelTitleExpanded" }, e.headerText) : s ? c.a.createElement("span", { className: "Panel-panelTitle", style: { color: s.color } }, e.headerText) : c.a.createElement("span", { className: "Panel-panelTitle" }, e.headerText)) }, h = function (e) { e.preventDefault(), o(!r) }; return c.a.createElement("div", { className: "Panel-panelBorder", "data-testid": "open-".concat(r ? "true" : "false") }, function () { var t = r && s ? { style: { backgroundColor: s.color } } : {}, a = r ? "Panel-expandedPanel" : "Panel-panel"; return c.a.createElement("div", null, c.a.createElement("div", Object.assign({ className: a }, t), function () { var t = ""; return e.headerTitle && (t = r ? "".concat(H.a.decode(f.formatMessage({ id: "SITE_cdm_search_KEY_close_facet", defaultMessage: " " })), " ").concat(e.headerTitle) : "".concat(H.a.decode(f.formatMessage({ id: "SITE_cdm_search_KEY_open_facet", defaultMessage: " " })), " ").concat(e.headerTitle)), c.a.createElement(Tn.a, { expanded: r, label: p(), onToggle: h }, e.collapsible || e.isModal ? c.a.createElement("div", { className: "panel-heading" }, c.a.createElement("div", { className: "panel-title", onClick: e.isModal ? b : h }, e.isModal ? g(t) : c.a.createElement("button", { onClick: h, "aria-expanded": r, "aria-label": p(), className: r ? null : "collapsed" }, g(t)))) : [], c.a.createElement(Tn.a.Collapse, { id: e.id }, c.a.createElement(Tn.a.Body, null, e.children))) }())) }(), c.a.createElement("h2", { className: "hidden-panel-field", ref: m }, "panel-header")) }), Nn = wn, An = 13, Fn = 32, Ln = 39, Pn = 37, Rn = function e(t) { var a = t.expanded, r = t.nodeIndices, o = t.level, l = t.title, i = t.matched, s = t.flatCompoundObjects, u = t.index, m = t.parentId, f = t.currentItemId, b = Object(n.useState)(a || !1), g = Object(d.a)(b, 2), h = g[0], E = g[1], v = Object(n.useContext)(Gt), I = Object(d.a)(v, 2)[1], O = Object(x.g)(), S = O.location.state && O.location.state.itemSearchInfo && O.location.state.itemSearchInfo.searchTerm, j = ut(), _ = O.location.pathname.split("/rec/")[1], y = r && r.length > 0, C = Object(x.i)(), k = C.collectionAlias, M = C.itemId; Object(n.useEffect)((function () { E(a) }), [S, a]); var T = function () { y ? E(!h) : function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ""; if (M !== e) { I({ type: "turnOnLoadingNextPrevItem" }); var a = "/digital/collection/".concat(t, "/id/").concat(e); a += _ ? "/rec/".concat(_) : "", j("monograph", "navigation: ".concat(window.location.origin, "/digital/collection/").concat(t, "/id/").concat(m), "".concat(window.location.origin).concat(a), "select compound object", { collection_alias: t, parent_id: "".concat(t, "/id/").concat(m), item_id: "".concat(t, "/id/").concat(M), type: "monograph" }), O.push({ pathname: a, state: Object(p.a)(Object(p.a)({}, O.location.state), {}, { shouldScroll: !1 }) }) } }(s[u].id, k) }, w = function (e) { if (e.keyCode === An || e.keyCode === Fn) e.stopPropagation(), T(); else if (e.keyCode === Ln && y) e.stopPropagation(), h ? e.currentTarget.querySelector("[tabindex]").focus() : T(); else if (e.keyCode === Pn && h && y) { e.stopPropagation(), e.currentTarget !== e.target ? e.currentTarget.focus() : T() } }, N = { className: "node ".concat(y ? "folder" : "leaf").concat(f === s[u].id ? " selected" : ""), role: y ? "treeitem" : "none" }; return y && (N["aria-expanded"] = h, N.tabIndex = -1, N.onKeyDown = w), c.a.createElement("li", N, function () { var e = "title level-".concat(1 + o), t = "fa ".concat(h ? "fa-minus-circle" : "fa-plus"), a = y ? c.a.createElement("span", { className: t, "aria-hidden": !0 }) : null, n = "header".concat(i && (y && !h || !y) ? " matched" : ""), r = c.a.createElement("div", { className: e }, a, c.a.createElement("span", { className: "text" }, l)); return y ? c.a.createElement("h2", { className: n, onClick: T }, r) : c.a.createElement("button", { onClick: T, onKeyDown: w, role: "treeitem", tabIndex: "-1" }, c.a.createElement("h2", { className: n }, r)) }(), function () { if (!h || !y) return null; var t = r.map((function (t) { return c.a.createElement(e, { flatCompoundObjects: s, expanded: s[t].expanded, nodeIndices: s[t].nodeIndices, title: s[t].title, matched: s[t].matched, key: t, level: o + 1, index: t, parentId: m, currentItemId: f }) })); return c.a.createElement("ul", { role: "group" }, t) }()) }, Kn = (a(752), 38), Bn = 40, Dn = function (e) { for (var t, a, r = Object(k.a)(), o = Object(n.useContext)(Gt), l = Object(d.a)(o, 1)[0], i = e.searchInfo, s = i && i.itemSearchInfo, u = s ? s.pager : {}, m = s && s.searchTerm ? s.searchTerm : i && i.searchTerm ? i.searchTerm : "", f = l.itemId, b = l.item, p = l.isLoading, g = b.flatCompoundObjects, h = g && g.find((function (e) { return e.id === f })); h && h.parentIndex > 0;) { var E = h.parentIndex; g[E].expanded = !0, h = g[E] } !p && s && s.records[0] && (a = (t = (g = function (e, t) { if (!e) return []; var a = t.reduce((function (e, t) { return e[String(t[0])] = !0, e }), {}), n = e.map((function (e) { return Object.assign({}, e, { matched: a[String(e.id)] || !1 }) })); return n.forEach((function (e) { if (e.matched) for (var t = n[e.parentIndex]; t;)t.expanded = !0, t.matched = !0, t = n[t.parentIndex] })), n.forEach((function (e) { e.matched || !e.nodeIndices || e.nodeIndices.length || (e.expanded = !1) })), n }(g, s.records)).filter((function (e) { return e.matched && e.hasOwnProperty("parentIndex") }))) ? t.length : 0); var v = []; g && g.length && (v = g[0].nodeIndices); var I, O, S = u.total || 0; (a > 0 || a < 1 && m && m.length > 0) && (O = c.a.createElement("div", { className: "results" }, H.a.decode(r.formatMessage({ id: "SITE_KEY_resultsFoundInCount", defaultMessage: " " }, { total_items: S })))); var j = v.map((function (e) { return c.a.createElement(Rn, { flatCompoundObjects: g, expanded: g[e].expanded, nodeIndices: g[e].nodeIndices, title: g[e].title, matched: g[e].matched, key: e, level: 0, index: e, parentId: b.parentId, currentItemId: String(b.id) }) })); return p ? c.a.createElement(kn, null) : c.a.createElement("div", null, O, c.a.createElement("ul", { role: "tree", className: "TreeView-root ItemView-treeViewer", ref: function (e) { I = e }, onKeyDown: function (e) { var t = Array.from(I.querySelectorAll("[tabindex]")), a = t.findIndex((function (e) { return e === document.activeElement })); e.keyCode === Kn ? (e.preventDefault(), t[a > 0 ? a - 1 : 0].focus()) : e.keyCode === Bn && (e.preventDefault(), t[a < t.length - 1 ? a + 1 : a].focus()) }, style: { maxHeight: window.innerHeight > 770 ? "".concat(window.innerHeight - 445, "px") : "325px" }, tabIndex: "0" }, j)) }, Yn = Dn, Hn = "!-#%-\\x2A,-/:;\\x3F@\\x5B-\\x5D_\\x7B}\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65", Un = function (e) { return e = e.replace(/\s+\b(AND|ANY|OR)\b\s+/gi, "|"), "(?:^|\\s|[" + Hn + "])(".concat(e, ")(?:$|\\s|[" + Hn + "])") }, Vn = function (e) { return "(?:^|\\s|[" + Hn + "])(".concat(e, ")(?:$|\\s|[" + Hn + "])") }, Gn = function (e) { var t = {}; return e && e.length > 0 && e.forEach((function (e) { var a = e.searchTerm ? decodeURIComponent(e.searchTerm) : null; if (a && a.trim().length > 0) { var n = e.field ? e.field : "all"; t[n] || (t[n] = []), t[n].push(function (e, t) { switch (t = decodeURIComponent(t).replace(/[.+?^${}()|[\]\\]/g, "\\$&"), e) { case "exact": return Vn(t); case "none": return null; case "all": case "any": return Un(t); default: return (t.indexOf("AND") > -1 || t.indexOf("OR") > -1) && (t = Un(t)), t.indexOf("NOT") > -1 && (t = t.replace(/\s+(NOT)\s+[a-z]+/i, "")), t.indexOf("*") > -1 && (t = function (e) { return e = e.replace(/\*/gi, "\\w*") }(t)), t = t.indexOf('"') < 0 ? t.replace(/\s+/gi, "|") : Vn(t.replace(/(^")(.*)(")/i, "$2")) } }(e.mode, e.searchTerm)) } })), t = function (e) { for (var t, a = Object.keys(e), n = e.all, c = 0; c < a.length; c++) { var r = a[c], o = e[r]; "all" !== r && n && o.push(n), t = o.join("|"), e[r] = new RegExp(t, "i") } return e }(t) }, qn = a(73), zn = a.n(qn), Wn = (a(753), function (e) { var t = Object(k.a)(), a = Object(x.g)(), r = Object(x.i)(), o = function () { var e = Object(x.i)(), t = e.collectionAlias, a = e.itemId, c = Object(n.useReducer)(Pt, { collectionAlias: t, itemId: a, item: { collectionAlias: null, id: null, filename: null }, isLoading: !0, isLoadingNextPrevItem: !1, isLoadingItemSearch: !1, fetchError: null }), r = Object(d.a)(c, 2), o = r[0], l = r[1], u = Object(n.useCallback)(Object(s.a)(i.a.mark((function e() { var n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, At(t, a); case 2: (n = e.sent) && n.error && l({ type: "setGetItemInfoError", payload: { error: n.error } }), n && n.item && !n.item.error && (l(Ft(n)), l({ type: "turnOffLoadingNextPrevItem" })); case 5: case "end": return e.stop() } }), e) }))), [t, a]), m = Object(n.useContext)(Re); return Object(n.useEffect)((function () { m && m.body && o.item.id !== parseInt(a) && u() }), [t, a, u, m]), [o, l] }(), l = Object(d.a)(o, 2), u = l[0], m = l[1], f = Object(n.useContext)(Re), b = f && 200 === f.status, g = u.collectionAlias, h = u.item, E = u.isLoading, v = u.isLoadingNextPrevItem, I = u.isLoadingItemSearch, O = u.fetchError, S = u.statusCode; a.location && a.location.state && !a.location.state.shouldScroll && window.scrollTo(0, 0), Object(n.useEffect)((function () { e.setMainClass("cdm-collection-page cdm-collection-page-".concat(g, "  cdm-item-page cdm-item-page-").concat(h.id)) })); var j = Object(n.useState)(), _ = Object(d.a)(j, 2), y = _[0], M = _[1], A = Object(n.useState)(Object(p.a)(Object(p.a)({}, r), {}, { isLoading: E || I || v })), F = Object(d.a)(A, 2), L = F[0], P = F[1]; Object(n.useEffect)((function () { y ? y === u || E || I || v || (P(Object(p.a)({}, r)), M(u)) : M(u) }), [y, r, u, E, v, I]), function (e, t) { var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0, n = Object(x.i)(), c = Ke(n), r = Object(d.a)(c, 2), o = r[0], l = r[1], i = w(n[o], n[l]), s = Ke(t), u = Object(d.a)(s, 2), m = u[0], f = u[1], b = N(t, m, f), p = void 0 === a ? !!t[m] && !!t[f] : a; R(e, i, b, p) }(T.ITEM_LANDING, L, !E && !I && !v); var K = a.location.state && (a.location.state.searchTerm || a.location.state.itemSearchInfo) ? a.location.state : null, B = h && !!h.parent, Y = function () { var e = { searchTerm: "", connector: "all", field: "all", mode: "all" }, a = K && K.itemSearchInfo.searchTerm ? [Object(p.a)(Object(p.a)({}, e), {}, { searchTerm: K.itemSearchInfo.searchTerm })] : K && K.searchTerm ? [Object(p.a)(Object(p.a)({}, e), {}, { searchTerm: K.searchTerm })] : [e], n = Gn(a); return E ? null : c.a.createElement("div", { className: "ItemView-panelContainer" }, h && h.text ? c.a.createElement(Nn, { id: h.parentId > 0 ? "compoundItemTranscript" : "singleItemTranscript", headerTitle: H.a.decode(t.formatMessage({ id: "SITE_cdm_KEY_transcript", defaultMessage: " " })), headerText: H.a.decode(t.formatMessage({ id: "SITE_cdm_KEY_transcript", defaultMessage: " " })), expanded: K && K.searchResults && K.searchResults.totalResults > 0, collapsible: !0 }, c.a.createElement(qa, { text: h.text, searchRegexes: n })) : null, h && h.parentId > 0 ? c.a.createElement(Nn, { id: "compoundObjectDescription", headerTitle: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_KEY_objectdescription", defaultMessage: " " })), headerText: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_KEY_objectdescription", defaultMessage: " " })), expanded: !0, collapsible: !0 }, c.a.createElement(nn, { className: "ItemView-itemMetadata object-description", fields: h.parent.fields, searchRegexes: n, collectionId: g })) : null, c.a.createElement(Nn, { id: h && h.parentId > 0 ? "compoundItemDescription" : "singleItemDescription", headerTitle: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_KEY_itemdescription", defaultMessage: " " })), headerText: H.a.decode(t.formatMessage({ id: "SITE_cdm_compoundobject_KEY_itemdescription", defaultMessage: " " })), expanded: !0, collapsible: !0 }, c.a.createElement(nn, { className: "ItemView-itemMetadata item-description", fields: h.fields, searchRegexes: n, collectionId: g }))) }, U = function () { return B ? c.a.createElement(fa, { totalResults: h.parent.children.length, parentId: h.parentId, parentTitle: h.parent.fields.find((function (e) { return "title" === e.key })).value, items: h.parent.children, collectionAlias: g, searchResultsItemIndex: h.id }) : void 0 }, V = function () { if (B && "MONOGRAPH" === h.parent.type) return c.a.createElement("div", { className: "ItemView-compoundItemViewerContainer" }, I ? c.a.createElement(kn, null) : c.a.createElement(Yn, { searchInfo: K })); if (B) { var e = h.parent.children, t = K && K.itemSearchInfo.records && K.itemSearchInfo.records.map((function (e) { return { id: e[0], count: e[1], thumbnailUri: e[2], title: e[3] } })); t && t.length < 1 && (t = e); var a = []; return K && K.itemSearchInfo.records[0] && t.forEach((function (e) { a.push(e.id) })), c.a.createElement("div", { className: "ItemView-compoundItemViewerContainer", "data-id": "compoundObjectViewerContainer" }, c.a.createElement(Mn, { collectionAlias: g, itemId: h.id, index: 0, parentId: h.parentId, parentTitle: h.parent.fields.find((function (e) { return "title" === e.key })).value, items: t, allItems: e, itemIds: a, isSearching: E })) } return null }, G = Object(n.useCallback)((function () { var e = 0; return h.parent && h.parent.children.length > 0 && (e = h.parent.children.findIndex((function (e) { return h.id === e.id }))), e }), [h]), q = function () { return B ? c.a.createElement("div", { className: "ItemView-bottomBorder" }) : c.a.createElement("div", { className: "ItemView-bottomSingleItemBorder" }) }, z = H.a.decode(t.formatMessage({ id: "SITE_error_KEY_error_1", defaultMessage: " " })).replace("~CDMERRORCOLLECTION~", g), W = D()(H.a.decode(z)), Q = c.a.createElement(zn.a, { bsStyle: "danger", className: " center-block" }, c.a.createElement(J.a, { name: "ban" }), " ", W); return !E && f && f.body ? b ? c.a.createElement(Gt.Provider, { value: [u, m] }, v || I ? c.a.createElement(pe, null) : null, c.a.createElement("div", { className: "ItemView-itemViewContainer shared-box" }, O ? Q : null, E ? c.a.createElement(c.a.Fragment, null) : 404 === S ? c.a.createElement(Ut, null) : h ? Object.keys(h).length < 2 ? c.a.createElement(Ut, null) : function () { if (u.fetchError) return null; var e = B ? h.parent.fields.find((function (e) { return "title" === e.key })).value : h.fields.find((function (e) { return "title" === e.key })) ? h.fields.find((function (e) { return "title" === e.key })).value : h.text, t = B && h.fields.find((function (e) { return "title" === e.key })) ? h.fields.find((function (e) { return "title" === e.key })).value : "", a = h.parentId > 0 ? h.parent.fields.find((function (e) { return "descri" === e.key })) ? h.parent.fields.find((function (e) { return "descri" === e.key })).value : "" : h.fields.find((function (e) { return "descri" === e.key })) ? h.fields.find((function (e) { return "descri" === e.key })).value : ""; return c.a.createElement(n.Fragment, null, c.a.createElement(C.b, null, c.a.createElement("title", null, "".concat(e, " - ").concat(Le(h.collectionName))), c.a.createElement("meta", { name: "description", content: a })), c.a.createElement("div", { "data-id": "itemViewPageFound" }, c.a.createElement("div", { className: "row bar" }, c.a.createElement("div", { className: "col-sm-8 ItemView-mainColumn" }, c.a.createElement(In, null), c.a.createElement("div", null, c.a.createElement(Ht, { collectionAlias: g, collectionName: h.collectionName, itemTitle: e, isSingeItem: !B }), c.a.createElement(Ba, { className: "ItemView-options", isSingleItem: !B, itemTitle: t || e, itemThumbnail: h.thumbnailUri, hasPrintPDF: h.hasPrintPDF, parentId: h.parentId, compoundIndex: G(), type: "top-bar" }), c.a.createElement(Vt, { title: e, secondaryTitle: t }))), c.a.createElement("div", { className: "col-sm-4 ItemView-sideColumn" }, c.a.createElement(In, null))), c.a.createElement("div", { className: "row foo" }, c.a.createElement("div", { className: "col-sm-8 ItemView-mainColumn" }, c.a.createElement(ua, null), U(), c.a.createElement(on, null, "parentId=", h.parentId, " collectionAlias=", g), Y(), V()), c.a.createElement("div", { className: "col-sm-4 ItemView-sideColumn" }, c.a.createElement(Ba, { className: "ItemView-options", isSingleItem: !B, itemTitle: t || e, itemThumbnail: h.thumbnailUri, hasPrintPDF: h.hasPrintPDF, parentId: h.parentId, compoundIndex: G(), type: "side-bar" }), c.a.createElement(on, null, "parentId=", h.parentId, " collectionAlias=", g), V(), q())))) }() : c.a.createElement(c.a.Fragment, null))) : c.a.createElement(Pe, { collectionId: g }) : c.a.createElement(pe, null) }), Qn = Wn, Jn = a(142), Xn = window && window.location && window.location.hostname, Zn = "https://ldap-accounts.oclc.org", $n = function () { return RegExp(/cdm(.*)\.localhost/, "g").test(Xn) }, ec = function () { return RegExp(/cdm(.*)\.dev\.(.*)/, "g").test(Xn) }, tc = function () { return RegExp(/cdm(.*)\.(qa|nit|)\.(.*)/, "g").test(Xn) }, ac = $n() || ec() || tc() ? tc() ? "https://cerb-m1.nit.oclc.org" : RegExp(/cdm(.*)\.(nat|)\.(.*)/, "g").test(Xn) ? "https://cerb-m1.nat.oclc.org" : $n() || ec() ? "https://cerb-m1.dev.oclc.org" : Zn : Zn, nc = (a(757), function (e) { K(T.LOGIN_PAGE), Object(n.useEffect)((function () { e.setMainClass("cdm-login-page") })); var t = Object(k.a)(), a = Object(n.useContext)(b), r = Object(x.g)(), o = Object(x.h)(), l = Object(n.useState)(!1), u = Object(d.a)(l, 2), m = u[0], f = u[1], p = Object(n.useState)(!0), g = Object(d.a)(p, 2), h = g[0], E = g[1], I = Object(n.useRef)(), O = Object(n.useRef)(), S = [H.a.decode(t.formatMessage({ id: "SITE_KEY_loginTitle", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_username", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_password", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_login", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_cancel", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_error_KEY_authentication_failed", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_forgotPassword", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_createAccount", defaultMessage: " " })), H.a.decode(t.formatMessage({ id: "SITE_KEY_afterAccountCreation", defaultMessage: " " }))], j = S[0], _ = S[1], y = S[2], M = S[3], w = S[4], N = S[5], A = S[6], F = S[7], L = S[8], P = Object(n.useCallback)((function () { r.goBack() }), [r]), R = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(t) { var n, c; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return t.preventDefault(), E(!0), (n = new FormData).append("targetUrl", o.state && o.state.prevPath ? o.state.prevPath : Object(Jn.parseUrl)(o.search).query.targetUrl), n.append("username", I.current.value), n.append("password", O.current.value), e.next = 8, v(n); case 8: (c = e.sent) && 200 === c.status ? c.url && c.url.includes("error") ? f(!1) : (f(!0), a.refreshAuthenticationData(), P()) : E(!1); case 10: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), [a, P, o.search, o.state, I, O]); return c.a.createElement("div", { className: "LoginView-maincontainer shared-box" }, c.a.createElement("div", { className: "LoginView-maincontentLogin shared-contentContainer" }, c.a.createElement(C.a, { title: j }), c.a.createElement("form", { className: "form-horizontal", method: "POST", action: "" }, c.a.createElement("h1", null, M), h || !1 !== m ? void 0 : c.a.createElement("div", { className: "form-group" }, c.a.createElement(z.a, { bsStyle: "danger", className: "col-sm-12" }, N)), c.a.createElement("div", { className: "form-group" }, c.a.createElement("label", { htmlFor: "login-username-input", className: "col-xs-3 col-sm-3 control-label LoginView-loginFormControlLabel" }, _), c.a.createElement("div", { className: "col-xs-9 col-sm-9" }, c.a.createElement("input", { type: "text", className: "form-control", id: "login-username-input", tabIndex: 0, name: "username", ref: I, autoFocus: "autoFocus" }))), c.a.createElement("div", { className: "form-group" }, c.a.createElement("label", { htmlFor: "login-pwd-input", className: "col-xs-3 col-sm-3 control-label LoginView-loginFormControlLabel" }, y), c.a.createElement("div", { className: "col-xs-9 col-sm-9" }, c.a.createElement("input", { type: "password", className: "form-control", id: "login-pwd-input", tabIndex: 0, name: "password", ref: O }))), c.a.createElement("div", { className: "form-group" }, c.a.createElement("div", { className: "col-xs-12 col-sm-12" }, c.a.createElement(W.a, { type: "submit", name: "login", bsStyle: "primary", className: "btn btn-primary cdm-btn btn-block", onClick: R }, M))), c.a.createElement("div", { className: "form-group" }, c.a.createElement("div", { className: "col-xs-12 col-sm-12" }, c.a.createElement(W.a, { type: "button", name: "cancel", onClick: P, className: "btn-block cdm-btn" }, w))), c.a.createElement("div", { tabIndex: 0, className: "LoginView-forgotPassword" }, c.a.createElement("a", { target: "_blank", rel: "noopener noreferrer", href: "".concat(ac, "/forgot"), tabIndex: 0 }, A)), c.a.createElement("div", { tabIndex: 0, className: "LoginView-createAccount" }, c.a.createElement("a", { target: "_blank", rel: "noopener noreferrer", href: "".concat(ac, "/create"), tabIndex: 0 }, F)), c.a.createElement("div", { tabIndex: 0 }, c.a.createElement("div", { className: "LoginView-registration" }, L))))) }), cc = c.a.createContext(), rc = "switchToListView", oc = "switchToGridView", lc = "setGridListView", ic = { switchToListView: function () { return localStorage.setItem("gridViewEnabled", "false"), "list" }, switchToGridView: function () { return localStorage.setItem("gridViewEnabled", "true"), "grid" }, setGridListView: function (e, t) { return t.payload } }, sc = function (e, t) { return ic[t.type](e, t) }, dc = function () { var e = Object(n.useContext)(De.a).search, t = Object(n.useContext)(Re), a = t && t.collSearchInfo && t.collSearchInfo.gridOverrideGlobal, c = t && t.collSearchInfo && t.collSearchInfo.gridViewEnabled, r = void 0 === localStorage.getItem("gridViewEnabled") || null === localStorage.getItem("gridViewEnabled") ? a ? c ? "grid" : "list" : e.gridViewEnabled ? "grid" : "list" : "true" === localStorage.getItem("gridViewEnabled") ? "grid" : "list", o = Object(n.useReducer)(sc, r), l = Object(d.a)(o, 2), i = l[0], s = l[1]; return Object(n.useEffect)((function () { s({ type: lc, payload: r }) }), [t, r]), [i, s] }, uc = c.a.createContext(), mc = "setSearchRequest", fc = { setSearchRequest: function (e, t) { return t.payload }, setNumberOfCollectionsSelected: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { numberOfCollectionsSelected: t.payload }) }, updateFilterChanges: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { filters: { collections: t.payload } }) }, saveCollectionFilterString: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { collection: t.payload }) }, setHasFilterChanges: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { hasFilterChanges: t.payload }) } }, bc = function (e, t) { return fc[t.type](e, t) }, pc = function (e) { var t = Object(x.i)().collectionAlias, a = t && 1 === t.split("!").length ? t : null, r = Object(k.a)(), o = Object(x.h)(), l = Object(n.useState)(!0), u = Object(d.a)(l, 2), m = u[0], f = u[1], b = Object(n.useState)(null), g = Object(d.a)(b, 2), h = g[0], E = g[1], v = dc(), I = Object(d.a)(v, 2), O = I[0], S = I[1], j = Object(Nt.b)(), _ = Object(d.a)(j, 2), y = _[0], C = _[1], M = Object(n.useContext)(un), w = Object(d.a)(M, 2)[1], N = Object(ln.b)(), A = Object(d.a)(N, 2), F = A[0], L = A[1], P = Object(n.useReducer)(bc, {}), R = Object(d.a)(P, 2), K = R[0], B = R[1], Y = Object(n.useState)(), U = Object(d.a)(Y, 2), V = U[0], G = U[1], z = Object(n.useCallback)(Object(s.a)(i.a.mark((function e() { var t, a, n, l, s; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return f(!0), e.next = 3, Object(ft.f)(o); case 3: return t = e.sent, B({ type: mc, payload: t }), e.next = 7, En(t, F, t.page); case 7: (a = e.sent).error ? (n = null, 1 === t.collection.split("!").length ? (l = H.a.decode(r.formatMessage({ id: "SITE_error_KEY_error_1", defaultMessage: " " })).replace("~CDMERRORCOLLECTION~", t.collection), s = D()(H.a.decode(l)), n = c.a.createElement(zn.a, { bsStyle: "danger", className: " center-block" }, c.a.createElement(J.a, { name: "ban" }), " ", s)) : n = c.a.createElement(zn.a, { bsStyle: "danger" }, c.a.createElement(J.a, { name: "ban" }), H.a.decode(r.formatMessage({ defaultMessage: " ", id: "SITE_error_KEY_error_2" }))), E(n)) : (w(bn(a.items, a.totalResults)), G(a)), f(!1); case 10: case "end": return e.stop() } }), e) }))), [o, F, w, r]); Object(n.useEffect)((function () { z() }), [z, o, F, y]); var W = Object(n.useState)(), Q = Object(d.a)(W, 2), X = Q[0], Z = Q[1], $ = Object(n.useState)(Object(p.a)(Object(p.a)({}, t), {}, { isLoading: m })), ee = Object(d.a)($, 2), te = ee[0], ae = ee[1]; Object(n.useEffect)((function () { X ? X !== V && (ae({ collectionAlias: t, searchTerm: K.query }), Z(V)) : Z(V) }), [t, K.query, V, X]); var ne = a ? T.COLLECTION_SEARCH : T.SEARCH_PAGE; return Be(ne, te, !m), c.a.createElement(q.a.Provider, { value: [K, B] }, c.a.createElement(uc.Provider, { value: V }, c.a.createElement(cc.Provider, { value: [O, S] }, c.a.createElement(Nt.a.Provider, { value: [y, C] }, c.a.createElement(ln.a.Provider, { value: [F, L] }, V || h ? e.render(m, K, V, h) : c.a.createElement(pe, null)))))) }, gc = (a(758), a(759), function (e) { var t = e.content, a = c.a.createRef(); Object(n.useEffect)((function () { r() }), []); var r = function () { var e = kt(a.current, "font-size").replace(/[^-\d.]/g, ""), t = kt(a.current, "line-height").replace(/[^-\d.]/g, ""); a.current.style.cssText = Ct(a.current.innerText, e, t, 2) }; return c.a.createElement("div", { ref: a, className: "MetadataField-content truncation" }, t) }), hc = function (e) { var t = e.fields.filter((function (e) { return "" !== e.value })), a = t.shift(); return c.a.createElement("div", null, a ? c.a.createElement("div", { className: "MetadataField-content truncation" }, c.a.createElement("h2", { className: "MetadataFields-header" }, Le(a.value))) : null, 0 !== t.length ? c.a.createElement("div", null, t.map((function (e, t) { return c.a.createElement(gc, { key: t, content: Le(e.value) }) }))) : null) }, Ec = (a(760), function (e) { var t = ut(), a = Object(n.useContext)(un), r = Object(d.a)(a, 1)[0], o = Object(Nt.b)(), l = Object(d.a)(o, 1)[0], u = Object(n.useContext)(qt.a), m = Object(d.a)(u, 1)[0], f = r.paginatedItems, b = r.totalResults, g = Object(ln.b)(), h = Object(d.a)(g, 1)[0], E = Object(k.a)(), v = Object(n.useState)(!1), I = Object(d.a)(v, 2), O = I[0], S = I[1], j = e.item, _ = j.thumbnailEnabled, y = j.title, C = j.metadataFields, M = j.thumbnailUri, T = j.collectionAlias, w = j.itemId, N = { savedLimitReached: H.a.decode(E.formatMessage({ id: "SITE_KEY_SavedItemsLimit", defaultMessage: " " })) }, A = e.enableSavedItems, F = e.query, L = e.pageIndex, P = Object(x.g)(); l > 1 && (L += (l - 1) * h); var R = "/digital/collection/".concat(T, "/id/").concat(w, "/rec/").concat(L + 1), K = Object(n.useCallback)((function () { t("search results", "click", "/digital/collection/".concat(T, "/id/").concat(w, "/rec/").concat(L + 1), "search result clicked", { collection_alias: T, item_id: "".concat(T, "/id/").concat(w), type: "list" }) }), [t, T, L, w]), B = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t.preventDefault(), !F) { e.next = 9; break } return K(), e.next = 5, cn(T, w, F); case 5: a = e.sent, P.push({ pathname: "/digital/collection/".concat(T, "/id/").concat(a.records[0] ? a.records[0][0] : w, "/rec/").concat(L + 1), state: Object(p.a)(Object(p.a)({}, m), {}, { itemSearchInfo: a, shouldScroll: !1, searchResults: { paginatedItems: f, totalResults: b, url: window.location.pathname } }) }), e.next = 11; break; case 9: K(), P.push({ pathname: "/digital/collection/".concat(T, "/id/").concat(w, "/rec/").concat(L + 1), state: Object(p.a)(Object(p.a)({}, P.location.state), {}, { shouldScroll: !1, searchResults: { paginatedItems: f, totalResults: b, url: window.location.pathname } }) }); case 11: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), [P, K, f, b, L, m, T, w, F]), D = function () { S(!1) }, Y = Ra.renderToString(c.a.createElement("b", null, N.savedItems)), U = H.a.decode(E.formatMessage({ defaultMessage: "You have reached the maximum number of {MAX_SAVED_ITEMS, number} for {SAVED_ITEMS_TMX}.", id: "SITE_KEY_MaxSavedItems" }, { SAVED_ITEMS_TMX: Y, MAX_SAVED_ITEMS: 200 })), V = H.a.decode(E.formatMessage({ defaultMessage: "You cannot save more items until you visit the {SAVED_ITEMS_TMX} page and remove some items.", id: "SITE_KEY_RemoveSavedInstruction" }, { SAVED_ITEMS_TMX: Y })); return [c.a.createElement(Ae.b, { key: T + w, to: R, onClick: B, className: "SearchResult-container shared-search-box shared-box row SearchResult cdm-item-card ".concat(A ? "SearchResult-favoritesListContainer" : null), tabIndex: 0 }, _ ? c.a.createElement("div", { className: "SearchResult-thumbnailHolder" }, c.a.createElement("img", { src: "/digital" + M, className: "SearchResult-thumbnail", alt: y })) : null, c.a.createElement("div", { className: "SearchResult-contentHolder" }, c.a.createElement(hc, { fields: C })), A ? c.a.createElement(Ka, { itemId: w.toString(), collectionId: T, saveKey: "".concat(T, "-").concat(w), handleShow: function () { S(!0) }, cardType: "list" }) : null), c.a.createElement(va.a, { className: "FavoritesButton-favoritesModal", show: O, key: 2, onHide: D, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "FavoritesButton-maxItemsModalHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, N.savedLimitReached)), c.a.createElement(va.a.Body, null, c.a.createElement("p", { className: "FavoritesButton-modalText" }, c.a.createElement("span", { dangerouslySetInnerHTML: { __html: U } }), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement("span", { dangerouslySetInnerHTML: { __html: V } }))), c.a.createElement(va.a.Footer, { className: "FavoritesButton-modalFooter" }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: D }, "OK")))] }), vc = a(438), Ic = (a(761), function (e) { var t = ut(), a = Object(n.useContext)(un), r = Object(d.a)(a, 1)[0], o = Object(Nt.b)(), l = Object(d.a)(o, 1)[0], u = Object(n.useContext)(qt.a), m = Object(d.a)(u, 1)[0], f = r.paginatedItems, b = r.totalResults, g = Object(ln.b)(), h = Object(d.a)(g, 1)[0], E = Object(k.a)(), v = Object(n.useState)(!1), I = Object(d.a)(v, 2), O = I[0], S = I[1], j = e.item, _ = j.thumbnailEnabled, y = j.title, C = j.collectionAlias, M = j.itemId, T = j.thumbnailUri, w = { savedLimitReached: H.a.decode(E.formatMessage({ id: "SITE_KEY_SavedItemsLimit", defaultMessage: " " })) }, N = e.enableSavedItems, A = e.query, F = e.pageIndex, L = Object(x.g)(); l > 1 && (F += (l - 1) * h); var P = "/digital/collection/".concat(C, "/id/").concat(M, "/rec/").concat(F + 1), R = Object(n.useCallback)((function () { t("search results", "click", "/digital/collection/".concat(C, "/id/").concat(M, "/rec/").concat(F + 1), "search result clicked", { collection_alias: C, item_id: "".concat(C, "/id/").concat(M), type: "grid" }) }), [t, C, F, M]), K = Object(n.useCallback)(function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t.preventDefault(), !A) { e.next = 9; break } return R(), e.next = 5, cn(C, M, A); case 5: a = e.sent, L.push({ pathname: "/digital/collection/".concat(C, "/id/").concat(a.records[0] ? a.records[0][0] : M, "/rec/").concat(F + 1), state: Object(p.a)(Object(p.a)({}, m), {}, { itemSearchInfo: a, shouldScroll: !1, searchResults: { paginatedItems: f, totalResults: b, url: window.location.pathname } }) }), e.next = 11; break; case 9: R(), L.push({ pathname: "/digital/collection/".concat(C, "/id/").concat(M, "/rec/").concat(F + 1), state: Object(p.a)(Object(p.a)({}, L.location.state), {}, { shouldScroll: !1, searchResults: { paginatedItems: f, totalResults: b, url: window.location.pathname } }) }); case 11: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), [L, R, f, b, F, m, C, M, A]), B = function () { S(!1) }, D = Ra.renderToString(c.a.createElement("b", null, w.savedItems)), Y = H.a.decode(E.formatMessage({ defaultMessage: "You have reached the maximum number of {MAX_SAVED_ITEMS, number} for {SAVED_ITEMS_TMX}.", id: "SITE_KEY_MaxSavedItems" }, { SAVED_ITEMS_TMX: D, MAX_SAVED_ITEMS: 200 })), U = H.a.decode(E.formatMessage({ defaultMessage: "You cannot save more items until you visit the {SAVED_ITEMS_TMX} page and remove some items.", id: "SITE_KEY_RemoveSavedInstruction" }, { SAVED_ITEMS_TMX: D })); return [c.a.createElement(Ae.b, { to: P, onClick: K, key: 1, className: "GridSearchResult-container SearchResult ".concat(N ? "GridSearchResult-favoritesContainer" : null), tabIndex: 0 }, _ ? c.a.createElement("div", { className: "GridSearchResult-thumbnailHolder" }, c.a.createElement("img", { src: "/digital" + T, className: "GridSearchResult-thumbnail", alt: y })) : null, c.a.createElement("h2", { className: "GridSearchResult-cardTitle truncation" }, c.a.createElement(vc.a, { ellipsis: "...", lines: 3 }, y)), N ? c.a.createElement(Ka, { itemId: M.toString(), collectionId: C, saveKey: "".concat(C, "-").concat(M), handleShow: function () { S(!0) }, cardType: "grid" }) : null), c.a.createElement(va.a, { className: "FavoritesButton-favoritesModal", show: O, key: 2, onHide: B, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "FavoritesButton-maxItemsModalHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, w.savedLimitReached)), c.a.createElement(va.a.Body, null, c.a.createElement("p", { className: "FavoritesButton-modalText" }, c.a.createElement("span", { dangerouslySetInnerHTML: { __html: Y } }), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement("span", { dangerouslySetInnerHTML: { __html: U } }))), c.a.createElement(va.a.Footer, { className: "FavoritesButton-modalFooter" }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: B }, "OK")))] }), Oc = (a(762), function (e) { var t = e.results, a = Object(k.a)(), r = ut(), o = Object(n.useContext)(b), l = Object(n.useContext)(Ea), i = Object(d.a)(l, 2), s = i[0], u = i[1], m = Object(n.useState)(!1), f = Object(d.a)(m, 2), p = f[0], g = f[1], h = Object(n.useRef)(), E = Object(n.useRef)(), v = s.savedItemIds, I = Object(n.useCallback)((function () { return t.items.every((function (e) { return v.some((function (t) { return t.id === e.itemId && t.alias === e.collectionAlias })) })) }), [t.items, v]), O = Object(n.useCallback)((function () { g(!1) }), [g]), S = Object(n.useCallback)((function () { var e = E.current.classList; I() ? e && (e.remove("fa-star"), e.add("fa-star-o")) : e && (e.remove("fa-star-o"), e.add("fa-star")) }), [E, I]), j = Object(n.useCallback)((function () { var e = E.current.classList; I() ? e && (e.remove("fa-star-o"), e.add("fa-star")) : e && (e.remove("fa-star"), e.add("fa-star-o")) }), [E, I]), _ = Object(n.useCallback)((function () { var e = I(), a = JSON.parse(JSON.stringify(v)); if (e) !function () { for (var e = [], n = function (a) { t.items.forEach((function (t) { t.itemId === v[a].id && t.collectionAlias === v[a].alias && e.push(a) })) }, c = 0; c < v.length; c++)n(c); e.reverse().forEach((function (e) { return a.splice(e, 1) })), u({ type: _a, payload: { savedItemIds: a, authname: o.name } }) }(); else { t.items.forEach((function (e) { return a.push({ alias: e.collectionAlias, id: e.itemId }) })); var n = [], c = !1; a.forEach((function (e) { n.some((function (t) { return e.id === t.id && e.alias === t.alias })) || (n.length < 200 ? n.push(e) : c = !0) })), c && g(!0), u({ type: _a, payload: { savedItemIds: n, authname: o.name } }) } }), [o, v, u, t.items, I]), y = Object(n.useCallback)((function (e) { e.preventDefault(), e.stopPropagation(), r("saved items", "click", "click save/remove all button", "save/remove all search results"), _() }), [r, _]), C = Object(n.useCallback)((function () { /(Android|iPod|iPhone|iPad|IEMobile|Windows Phone)/i.test(navigator.userAgent) || S() }), [S]), x = Object(n.useCallback)((function () { /(Android|iPod|iPhone|iPad|IEMobile|Windows Phone)/i.test(navigator.userAgent) || j() }), [j]), M = c.a.createElement("button", { type: "button", className: "SaveRemoveAllItemsButton-favoriteButton btn savedButton", "aria-label": H.a.decode(a.formatMessage({ id: "SITE_KEY_clickToRemoveSaved", defaultMessage: " " })), onMouseEnter: C, onMouseLeave: x, onClick: y }, c.a.createElement("span", { ref: E, className: "SaveRemoveAllItemsButton-saveIcon fa fa-star" }), c.a.createElement("span", { ref: h }, H.a.decode(a.formatMessage({ id: "SITE_KEY_removeAll", defaultMessage: " " })))), T = c.a.createElement("button", { type: "button", className: "SaveRemoveAllItemsButton-favoriteButton btn saveButton", "aria-label": H.a.decode(a.formatMessage({ id: "SITE_KEY_clickToSave", defaultMessage: " " })), onMouseEnter: C, onMouseLeave: x, onClick: y }, c.a.createElement("span", { ref: E, className: "SaveRemoveAllItemsButton-saveIcon fa fa-star-o" }), c.a.createElement("span", { ref: h }, H.a.decode(a.formatMessage({ id: "SITE_KEY_saveAll", defaultMessage: " " })))), w = Object(n.useCallback)((function () { return I() ? M : T }), [I, M, T]), N = Ra.renderToString(c.a.createElement("b", null, H.a.decode(a.formatMessage({ id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " })))), A = H.a.decode(a.formatMessage({ defaultMessage: "You have reached the maximum number of {MAX_SAVED_ITEMS, number} for {SAVED_ITEMS_TMX}.", id: "SITE_KEY_MaxSavedItems" }, { SAVED_ITEMS_TMX: N, MAX_SAVED_ITEMS: 200 })), F = H.a.decode(a.formatMessage({ defaultMessage: "You cannot save more items until you visit the {SAVED_ITEMS_TMX} page and remove some items.", id: "SITE_KEY_RemoveSavedInstruction" }, { SAVED_ITEMS_TMX: N })); return c.a.createElement("div", { className: "SaveRemoveAllItemsButton-buttonContainer" }, w(), c.a.createElement(va.a, { className: "SaveRemoveAllItemsButton-favoritesModal", show: p, onHide: O, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "SaveRemoveAllItemsButton-maxItemsModalHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, H.a.decode(a.formatMessage({ id: "SITE_KEY_SavedItemsLimit", defaultMessage: " " })))), c.a.createElement(va.a.Body, null, c.a.createElement("p", { className: "SaveRemoveAllItemsButton-modalText" }, c.a.createElement("span", { dangerouslySetInnerHTML: { __html: A } }), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement("span", { dangerouslySetInnerHTML: { __html: F } }))), c.a.createElement(va.a.Footer, { className: "SaveRemoveAllItemsButton-modalFooter" }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: O }, H.a.decode(a.formatMessage({ id: "SITE_KEY_OK", defaultMessage: " " })))))) }), Sc = function () { var e = Object(n.useContext)(De.a), t = Object(n.useContext)(uc), a = Object(n.useContext)(q.a), r = Object(n.useContext)(qt.a), o = Object(d.a)(r, 2)[1], l = Object(x.g)(), i = a[0], s = i.query, u = i.connector, m = s.split("!").reduce((function (e, t, a) { return e + " ".concat(u.split("!")[a - 1].toUpperCase(), " ") + t })); Object(n.useEffect)((function () { s && o({ searchTerm: m }) }), [s, m, o]); var f = Object(n.useContext)(Nt.a), b = Object(d.a)(f, 1)[0], g = Object(n.useContext)(cc), h = Object(d.a)(g, 1)[0], E = Object(n.useContext)(ln.a), v = Object(d.a)(E, 1)[0], I = e.enableSavedItems, O = Object(Jn.parseUrl)(l.location.pathname), S = l.location.state && l.location.state.page ? l.location.state.page : parseInt(O.page) ? parseInt(O.page) : b || 1, j = v || e.search.resultsPerPage, _ = S > (t.totalResults % j !== 0 ? Math.floor(t.totalResults / j) + 1 : Math.floor(t.totalResults / j)) || S < 1 ? 1 : S; if (t) { var y = { cardsPerPage: j, totalCollections: t.totalResults, pageNumber: _, cards: t.items, trackPage: "search results", itemName: "SITE_KEY_recordsPaginator" }; return c.a.createElement("div", null, c.a.createElement(Rt, { key: 1, hideInfo: !1, isSearch: !0, pageInfo: Object(p.a)(Object(p.a)({}, y), {}, { className: "topSearchCardPaginator" }) }), I ? c.a.createElement(Oc, { results: t }) : c.a.createElement(c.a.Fragment, null), c.a.createElement("div", { key: 2 }, "list" === h ? t.items.map((function (e, t) { return c.a.createElement(Ec, { key: t, item: e, pageIndex: t, enableSavedItems: I, query: m }) })) : t.items.map((function (e, t) { return c.a.createElement(Ic, { key: t, item: e, pageIndex: t, enableSavedItems: I, query: m }) }))), c.a.createElement(Rt, { key: 3, hideInfo: !1, isSearch: !0, pageInfo: Object(p.a)(Object(p.a)({}, y), {}, { className: "bottomSearchCardPaginator" }) })) } return [] }, jc = (a(763), function () { var e = Object(k.a)(), t = Object(x.h)(), a = Object(n.useContext)(uc), r = Object(n.useContext)(q.a)[0], o = r.query, l = r.collection, i = null === Object(ft.d)(t), s = function () { var t = o || null ? "SITE_cdm_search_KEY_searchingItemsIn" : "SITE_cdm_search_KEY_browsingItemsIn"; return H.a.decode(e.formatMessage({ id: t, defaultMessage: " " })) }, d = function () { if (i) return H.a.decode(e.formatMessage({ id: "SITE_KEY_allCollections", defaultMessage: " " })); var t = l ? l.split("!") : [], n = a.filters.collections.filter((function (e) { return e.selected })).filter((function (e) { return t.includes(e.alias) })); return t.length === a.filters.collections.length ? 1 === a.filters.collections.length ? n[0].name : H.a.decode(e.formatMessage({ id: "SITE_KEY_allCollections", defaultMessage: " " })) : 1 === t.length ? n[0] ? n[0].name : e.formatMessage({ id: "SITE_error_KEY_error_1", defaultMessage: " " }).replace("~CDMERRORCOLLECTION~", t[0]) : H.a.decode(e.formatMessage({ id: "SITE_KEY_multipleCollections", defaultMessage: " " })) }; return c.a.createElement("div", { "data-id": "searchMode", className: "SearchInfo-infoBox" }, c.a.createElement("h1", { className: "SearchInfo-nonWctHeader hidden-xs" }, s(), c.a.createElement("br", null), c.a.createElement("strong", null, d())), c.a.createElement("h1", { className: "SearchInfo-nonWctHeader visible-xs" }, s(), " ", c.a.createElement("strong", null, d()))) }), _c = function () { var e = Object(k.a)(), t = ut(), a = Object(n.useContext)(cc), r = Object(d.a)(a, 2), o = r[0], l = r[1], i = H.a.decode(e.formatMessage({ id: "SITE_cdm_search_listView", defaultMessage: " " })), s = H.a.decode(e.formatMessage({ id: "SITE_cdm_search_gridView", defaultMessage: " " })), u = Object(n.useState)("grid" === o ? "btn-primary active" : ""), m = Object(d.a)(u, 2), f = m[0], b = m[1], p = Object(n.useState)("list" === o ? "btn-primary active" : ""), g = Object(d.a)(p, 2), h = g[0], E = g[1], v = Object(n.useCallback)((function () { l({ type: rc }), b(""), E("btn-primary active"), t("search results", "click", "display mode switched to: ".concat("list"), "search result display mode changed", { type: "list" }) }), [t, l]), I = Object(n.useCallback)((function () { l({ type: oc }), b("btn-primary active"), E(""), t("search results", "click", "display mode switched to: ".concat("grid"), "search result display mode changed", { type: "grid" }) }), [t, l]); return Object(n.useEffect)((function () { b("grid" === o ? "btn-primary active" : ""), E("list" === o ? "btn-primary active" : "") }), [o]), c.a.createElement(jn.a, { name: "display-options", className: "ResultsDisplaySelector-displayOptionContainer" }, c.a.createElement(W.a, { "aria-label": i, title: i, className: "ResultsDisplaySelector-searchHeaderBtnInactive cdm-toggle-btn btn btn-default ".concat(h), value: "List View", onClick: v }, c.a.createElement("span", { className: "fa fa-th-list" })), c.a.createElement(W.a, { "aria-label": s, title: s, className: "ResultsDisplaySelector-searchHeaderBtnInactive cdm-toggle-btn btn btn-default ".concat(f), value: "Grid View", onClick: I }, c.a.createElement("span", { className: "fa fa-th" }))) }, yc = (a(764), Object(n.memo)((function (e) { var t = e.idPrefix, a = Object(k.a)(), r = Object(x.h)(), o = Object(x.g)(), l = ut(), i = Object(n.useContext)(ln.a), s = Object(d.a)(i, 2), u = s[0], m = s[1], f = Object(n.useContext)(qt.a), b = Object(d.a)(f, 2), g = b[0], h = b[1], E = Object(n.useContext)(Nt.a), v = Object(d.a)(E, 2)[1], I = [10, 20, 50, 100, 200].map((function (e, t) { return c.a.createElement("option", { key: t, value: e }, e) })), O = Object(n.useCallback)((function (e) { v(null), m(e.target.value), h(Object(p.a)(Object(p.a)({}, g), {}, { resultsPerPage: e.target.value })), l("search results", "click", "number of results changed to: ".concat(e.target.value), "search results per page changed", { count: "".concat(e.target.value) }), o.push(Object(ft.g)(r)) }), [l, v, m, h, g, o, r]); return c.a.createElement("div", { className: "ResultsPerPageSelector-resultsPerPageSelectorFlexContainer" }, c.a.createElement("h3", { className: "ResultsPerPageSelector-resultsPerPageSelectorLabel", id: "".concat(t, "ResultsPerPageSelectorLabel") }, H.a.decode(a.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_results_per_page" })), ":"), c.a.createElement("select", { id: "".concat(t, "ResultsPerPageSelector"), "aria-labelledby": "".concat(t, "ResultsPerPageSelectorLabel"), className: "ResultsPerPageSelector-resultsPerPageSelector form-control", defaultValue: u, onChange: O }, I)) }))), Cc = (a(765), function () { var e = Object(k.a)(), t = Object(x.g)(), a = ut(), r = H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_sortby", defaultMessage: " " })), o = H.a.decode(e.formatMessage({ id: "SITE_CONFIG_nosortRelevance", defaultMessage: " " })), l = Object(n.useContext)(uc), i = Object(n.useContext)(q.a), s = Object(d.a)(i, 1)[0], u = Object(n.useContext)(Nt.a), m = Object(d.a)(u, 2)[1], f = l.sortFields, b = l.fields, p = function () { return Array.from(arguments).join("_") }; return c.a.createElement("div", { className: "DesktopSearchHeader-container DesktopSearchHeader-searchHeaderRow hidden-xs" }, c.a.createElement(jc, null), c.a.createElement("div", { className: "DesktopSearchHeader-desktopSortBySelectContainer" }, c.a.createElement("h3", { className: "DesktopSearchHeader-desktopSortBySelectLabel", id: "desktopSortBySelectLabel" }, H.a.decode(r), ":"), c.a.createElement("select", { id: "desktopSortBySelect", className: "form-control", onChange: function (e) { var n = e.currentTarget.value.split("_"), c = Object(d.a)(n, 2), r = c[0], o = c[1]; s.order = r, s.orderDirection = o, m(null), s.page = null, a("search results", "click", "sortby: ".concat(r, " ").concat(o), "change search sort", { type: "".concat(r, " ").concat(o) }), t.push(ke(s)) }, "aria-labelledby": "desktopSortBySelectLabel", value: function () { var e = [b.order, b.direction], t = e[0], a = e[1]; s.order && s.orderDirection && (t = s.order, a = s.orderDirection); var n = f.find((function (e) { return e.order === t && e.ad === a })), c = ""; return n && (c = p(n.order, n.ad)), c }() }, f.map((function (t, a) { var n = t.name, r = ""; "Relevance" !== n && "" !== n ? r = H.a.decode(e.formatMessage({ id: "asc" === t.ad ? "SITE_cdm_search_KEY_ascending" : "SITE_cdm_search_KEY_descending", defaultMessage: " " })) : "Relevance" === n && (n = o); var l = [n, r].filter((function (e) { return "" !== e })).join(" "); return c.a.createElement("option", { key: a, value: p(t.order, t.ad) }, l) })))), c.a.createElement(_c, null), c.a.createElement(yc, { idPrefix: "desktop" })) }), kc = function (e) { var t = Object(k.a)(); if (Object(n.useContext)(b).isWCTAdmin) { var a = {}; return Object.keys(W.a.propTypes).forEach((function (t) { Object.hasOwnProperty.call(e, t) && (a[t] = e[t]) })), c.a.createElement(W.a, Object.assign({ "data-id": "generateMapButton", bsStyle: "primary" }, a, { className: "cdm-btn" }), c.a.createElement("span", { className: "fa fa-map-marker" }, "\xa0"), H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_generate_map_mobile" }))) } return null }, xc = (a(766), function (e) { var t = e.field, a = e.title, r = e.count, o = Object(n.useContext)(q.a), l = Object(d.a)(o, 1)[0], i = ut(), s = Oe(); return c.a.createElement("div", { className: "Facet-container" }, function () { var e = function () { s(), i("search results", "click", "facet: ".concat(a), "select search facet", { title: "".concat(a) }) }, n = function () { var e = encodeURIComponent(a).replace(/%2F/gi, "%252F"); return l = Object(p.a)(Object(p.a)({}, l), {}, { query: l.query ? "".concat(e, "!").concat(l.query) : e, field: l.field ? "".concat(t, "!").concat(l.field) : l.query ? "".concat(t, "!all") : t, mode: l.mode ? "exact!".concat(l.mode) : l.query ? "exact!all" : "exact", connector: l.connector ? "and!".concat(l.connector) : l.query ? "and!all" : "and", page: "" }), ke(l) }(); return a.includes("%") ? c.a.createElement("a", { href: n, onClick: e }, a, " (", r, ")") : c.a.createElement(Ae.b, { to: n, onClick: e }, a, " (", r, ")") }()) }), Mc = (a(767), function (e) { var t = e.field, a = e.facetList; return c.a.createElement("div", { className: "Facets-container" }, c.a.createElement(Ee, { initialShowCount: 10, entities: a, showMoreMessageKey: "SITE_cdm_search_KEY_show_more", buttonClass: "Facets-buttonDiv", facetField: t, render: function (e, a) { return c.a.createElement(xc, Object.assign({ key: "".concat(a.title, "-").concat(e), field: t }, a)) } })) }), Tc = a(444), wc = (a(769), function () { var e = Object(k.a)(), t = Object(n.useContext)(q.a), r = Object(d.a)(t, 1)[0], o = Object(n.useContext)(uc), l = Object(n.useContext)(b), i = ve().isDesktop, s = Object(x.g)(), u = Object(Tc.a)((function () { return a.e(3).then(a.bind(null, 812)) })), m = Object(n.useCallback)((function (e) { s.push(ke(e)) }), [s]), f = Object(n.useCallback)((function () { var e = []; return s.location && s.location.state && s.location.state.collectionScope && (e = Object(ft.c)(s.location.state.collectionScope)) && e.length > 0 && (e = o.filters.collections.map((function (t) { return e && e.includes(t.alias) ? (t.selected = !0, t) : (t.selected = !1, t) }))), e && 0 !== e.length || (e = (e = Object(ft.d)(s.location) || []) && 0 !== e.length ? o.filters.collections.map((function (t) { return e && e.includes(t.alias) ? (t.selected = !0, t) : (t.selected = !1, t) })) : o.filters.collections.map((function (e) { return e.selected = !0, e }))), e }), [o.filters.collections, s.location]), p = function (e) { return e.filter((function (e) { return !r.query.includes(encodeURIComponent(e.title).replace(/%2F/gi, "%252F")) })) }, g = function (e) { return e.filter((function (e) { return encodeURIComponent(e.title).replace(/%2F/gi, "%252F") })) }, h = function (e, t) { return ("date" === t ? g(e) : p(e)).length > 0 }, E = function (e, t) { var a; return a = "date" === e ? g(t) : p(t), c.a.createElement(Mc, { field: e, facetList: a }) }; return c.a.createElement("div", null, c.a.createElement("div", { className: "SearchFilter-collapsible" }, c.a.createElement(Nn, { headerTitle: H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_header_collections_filter", defaultMessage: " " })), headerText: H.a.decode(e.formatMessage({ id: "SITE_KEY_collections", defaultMessage: " " })), expanded: !0, collapsible: !0 }, c.a.createElement(Ce, { getSelectedCollections: f, afterSave: m }))), i ? l.isWCTAdmin && r.collection && !r.collection.includes("!") ? c.a.createElement("div", { key: 0, className: "SearchFilter-collapsible SearchFilter-mapBox" }, c.a.createElement(Nn, { headerTitle: H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_header_collections_filter", defaultMessage: " " })), expanded: !0, collapsible: !1 }, c.a.createElement(u, { key: 1, collectionAlias: r.collection }))) : c.a.createElement(c.a.Fragment, null) : null, function () { var t = []; for (var a in o.facets) { var n = h(o.facets[a], a) ? c.a.createElement("div", { key: a, className: "SearchFilter-collapsible" }, c.a.createElement(Nn, { headerTitle: "".concat(o.facetFields[a], " ").concat(H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_header_facet", defaultMessage: " " }))), headerText: o.facetFields[a], expanded: !0, collapsible: !0 }, E(a, o.facets[a]))) : null; n && t.push(n) } return t }()) }), Nc = (a(770), function (e) { var t = e.children, a = Object(n.useContext)(Ie), r = Object(k.a)(); return c.a.createElement("div", { className: "MobileModal-container" }, c.a.createElement("div", { className: "MobileModal-buttonContainer pull-right" }, c.a.createElement(W.a, { bsStyle: "default", onClick: a }, c.a.createElement("span", { className: "fa fa-times" }, "\xa0"), c.a.createElement("b", null, H.a.decode(r.formatMessage({ defaultMessage: " ", id: "SITE_KEY_close" }))))), c.a.createElement("div", { className: "MobileModal-content" }, t)) }), Ac = function () { var e = Object(k.a)(), t = Object(n.useContext)(q.a), a = Object(d.a)(t, 1)[0]; return c.a.createElement(Nc, null, c.a.createElement("div", null, "" === a.collections ? c.a.createElement(zn.a, { bsStyle: "danger" }, c.a.createElement(J.a, { name: "ban" }), H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_youmustselectonecollection" }))) : null, c.a.createElement(wc, null))) }, Fc = (a(771), function () { var e = Object(k.a)(), t = Object(x.g)(), a = Object(n.useContext)(Ie), r = ut(), o = Object(n.useContext)(uc), l = Object(n.useContext)(q.a), i = Object(d.a)(l, 1)[0], s = Object(n.useContext)(Nt.a), u = Object(d.a)(s, 2)[1], m = Object(n.useContext)(De.a), f = o.sortFields, b = o.browseAllDefaultSortField, p = o.searchResultsDefaultSortField, g = m.browseSortOrderAscIsEnabled, h = m.searchSortOrderAscIsEnabled, E = H.a.decode(e.formatMessage({ id: "SITE_CONFIG_nosortRelevance", defaultMessage: " " })), v = function () { return Array.from(arguments).join("_") }, I = Object(n.useState)(function (e) { var t = i.query ? [p, h ? "asc" : "desc"] : [b, g ? "asc" : "desc"], a = Object(d.a)(t, 2), n = a[0], c = a[1]; i.order && i.orderDirection && (n = i.order, c = i.orderDirection); var r = e.find((function (e) { return e.order === n && e.ad === c })), o = ""; return r && (o = v(r.order, r.ad)), o }(f)), O = Object(d.a)(I, 2), S = O[0], j = O[1], _ = function (t) { !function (e) { j(e.currentTarget.value) }(t); var a = i.query ? [p, h ? "asc" : "desc"] : [b, g ? "asc" : "desc"], n = Object(d.a)(a, 2), c = n[0], o = n[1], l = f.find((function (e) { return e.ad === o && e.order === c })) || {}, s = "nosort" === l.order ? "" : "asc" === l.ad ? H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_ascending" })) : H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_descending" })), u = [l.name, s].filter((function (e) { return !!e })).join(" "); r("search results", "click", "sortby:".concat(u), "change search sort", { type: "".concat(u) }) }, y = Object(n.useCallback)((function () { var e = S.split("_"), n = Object(d.a)(e, 2), c = n[0], r = n[1]; i.order = c, i.orderDirection = r, u(null), i.page = null, t.push(ke(i)), a() }), [t, a, i, u, S]); return c.a.createElement(Nc, null, c.a.createElement(Nn, { expanded: !0, isModal: !0, headerText: H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_sortby", defaultMessage: " " })) }, c.a.createElement("div", { className: "MobileSortModal-container" }, f.map((function (t, a) { var n = t.name, r = ""; if ("" === n) return null; if ("Relevance" !== n) { var o = "asc" === t.ad ? "SITE_cdm_search_KEY_ascending" : "SITE_cdm_search_KEY_descending"; r = e.formatMessage({ id: o }) } else n = E; var l = v(t.order, t.ad) === S; return c.a.createElement("div", { key: a, className: "radio" }, c.a.createElement("label", null, c.a.createElement("input", { type: "radio", name: "sort", onChange: _, value: v(t.order, t.ad), checked: l }), n, " ", r)) })), c.a.createElement(W.a, { bsStyle: "primary", className: "cdm-btn", block: !0, onClick: y }, H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_save" })))))) }), Lc = (a(772), function (e) { var t = e.params, a = Object(k.a)(), r = Object(n.useState)(!1), o = Object(d.a)(r, 2), l = o[0], i = o[1], s = Object(n.useState)(!1), u = Object(d.a)(s, 2), m = u[0], f = u[1], b = Object(n.useCallback)((function () { i(!0) }), []), p = Object(n.useCallback)((function () { i(!1) }), []), g = Object(n.useCallback)((function () { f(!0) }), []), h = Object(n.useCallback)((function () { f(!1) }), []); return c.a.createElement("div", null, l ? c.a.createElement(Ie.Provider, { value: p }, c.a.createElement(Ac, null)) : null, m ? c.a.createElement(Ie.Provider, { value: h }, c.a.createElement(Fc, null)) : null, c.a.createElement("div", { "data-id": "MobileSearchHeader", className: "visible-xs" }, c.a.createElement(jc, { params: t }), c.a.createElement("div", { className: "MobileSearchHeader-buttonGroup" }, c.a.createElement(W.a, { bsStyle: "default", "data-id": "filterBtn", onClick: b }, c.a.createElement("span", { className: "fa fa-filter" }, "\xa0"), H.a.decode(a.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_refine" }))), c.a.createElement(W.a, { bsStyle: "default", onClick: g }, c.a.createElement("span", { className: "fa fa-sort" }, "\xa0"), H.a.decode(a.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_sort" }))), c.a.createElement(kc, null)))) }), Pc = (a(773), function () { return c.a.createElement("div", { id: "mobileResultsOptionHeader", className: "MobileResultsOptionsHeader-container shared-search-box shared-box visible-xs container" }, c.a.createElement("div", { className: "MobileResultsOptionsHeader-SupplementalHeaderBar" }, c.a.createElement(_c, null), c.a.createElement(yc, { idPrefix: "mobile" }))) }), Rc = (a(774), function () { return c.a.createElement("div", null, c.a.createElement("div", { className: "SearchHeader-container shared-search-box shared-box cdm-content-header" }, c.a.createElement(Cc, null), c.a.createElement(Lc, null)), c.a.createElement(Pc, null)) }), Kc = (a(775), function (e) { var t = e.query, a = e.position, r = Object(x.g)(), o = ut(), l = Object(n.useContext)(q.a), i = Object(d.a)(l, 1)[0], s = Object(n.useCallback)((function () { var e = Object(p.a)(Object(p.a)({}, i), {}, { query: i.query.split("!").filter((function (e, t) { return t !== a })).join("!"), field: i.field.split("!").filter((function (e, t) { return t !== a })).join("!"), mode: i.mode.split("!").filter((function (e, t) { return t !== a })).join("!"), connector: i.connector.split("!").filter((function (e, t) { return t !== a })).join("!") }); o("search results", "click", "remove filter: ".concat(t), "remove search filter", { query: "".concat(t) }), r.push(ke(e)) }), [o, r, a, t, i]), u = t && "" !== t.trim() ? decodeURIComponent(t).replace(/%2F/g, "/") : ""; return c.a.createElement(W.a, { bsStyle: "default", className: "cdm-btn SearchTerm-searchTermBtn btn btn-default", title: u, onClick: s }, c.a.createElement("div", { className: "SearchTerm-term" }, u), c.a.createElement(J.a, { className: "SearchTerm-searchTermClosePadding", name: "times" })) }), Bc = (a(776), function () { var e = Object(k.a)(), t = H.a.decode(e.formatMessage({ id: "SITE_cdm_search_KEY_search_terms", defaultMessage: " " })), a = Object(n.useContext)(q.a), r = Object(d.a)(a, 1)[0], o = "" === r.field || r.field && 1 === r.field.split("!").length; return c.a.createElement("div", null, r.query ? c.a.createElement("div", { className: "SearchTerms-container shared-search-box shared-box" }, c.a.createElement("div", null, c.a.createElement("h3", { className: "SearchTerms-searchTerms" }, t)), c.a.createElement("div", null, o ? r.query ? c.a.createElement(Kc, { query: r.query, position: 0, key: 0 }) : null : r.query ? r.query.split("!").map((function (e, t) { return c.a.createElement(Kc, { query: e, position: t, key: t }) })) : null)) : void 0) }), Dc = (a(777), function (e) { var t = Object(k.a)(), a = Object(n.useContext)(Re), r = a && 200 !== a.status, o = Object(x.i)().collectionAlias; o && (o = encodeURIComponent(o)); var l = o && 1 === o.split("!").length ? o : null, i = l ? "cdm-collection-page cdm-collection-page-".concat(o, " cdm-collection-search-page") : "cdm-search-page", s = { search: H.a.decode(t.formatMessage({ id: "SITE_cdm_search_KEY_title_search_results", defaultMessage: " " })), browse: H.a.decode(t.formatMessage({ id: "SITE_cdm_search_KEY_title_browse", defaultMessage: " " })) }; return Object(n.useEffect)((function () { e.setMainClass(i) })), c.a.createElement(pc, { render: function (e, a, n, o) { var i = c.a.createElement("div", { className: "Search-container" }, c.a.createElement(C.b, { title: a.query ? s.search : s.browse }), c.a.createElement("div", { className: "row" }, c.a.createElement("div", { className: "Search-alertArea" }, o || null, e ? c.a.createElement(pe, null) : c.a.createElement(c.a.Fragment, null), a && 0 === a.numberOfCollectionsSelected ? c.a.createElement(zn.a, { bsStyle: "danger" }, c.a.createElement(J.a, { name: "ban" }), H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_cdm_search_KEY_youmustselectonecollection" }))) : c.a.createElement(c.a.Fragment, null), !e && n && 0 === n.items.length ? c.a.createElement(zn.a, { bsStyle: "warning" }, c.a.createElement(J.a, { name: "exclamation-circle" }), U(t, "SITE_cdm_search_KEY_no_search_results_found")) : c.a.createElement(c.a.Fragment, null))), c.a.createElement("div", { className: "row" }, c.a.createElement("div", { className: "Search-filterContent col-sm-4 col-lg-3 hidden-xs" }, e || o ? null : c.a.createElement(wc, null)), e ? null : c.a.createElement("div", { className: "Search-mainContent col-sm-8 col-lg-9", "data-id": "mainContent" }, o ? null : c.a.createElement(Rc, null), o ? null : c.a.createElement(Bc, null), o || n && 0 === n.items.length ? c.a.createElement(c.a.Fragment, null) : c.a.createElement(Sc, null)))); return r && l ? c.a.createElement(Pe, { collectionId: l }) : i } }) }), Yc = "showCreateLinkModal", Hc = "hideCreateLinkModal", Uc = "hideLinkCreatedModal", Vc = "setRecaptchaSuccess", Gc = "copyLinkToClipboard", qc = "startLinkCreation", zc = "endLinkCreation", Wc = { showCreateLinkModal: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { showCreateLinkModal: !0, recaptchaSuccess: !1 }) }, hideCreateLinkModal: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { showCreateLinkModal: !1, recaptchaSuccess: !1, urlCopied: !1 }) }, showLinkCreatedModal: function (e) { return Object(p.a)({}, e) }, hideLinkCreatedModal: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { showLinkCreatedModal: !1, urlCopied: !1 }) }, setRecaptchaSuccess: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { recaptchaSuccess: t.payload }) }, copyLinkToClipboard: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { urlCopied: !0 }) }, startLinkCreation: function (e) { return Object(p.a)(Object(p.a)({}, e), {}, { isCreatingLink: !0 }) }, endLinkCreation: function (e, t) { var a = t.payload, n = a.loc, c = a.port, r = a.customLinkText, o = a.id; return Object(p.a)(Object(p.a)({}, e), {}, { showLinkCreatedModal: !0, showCreateLinkModal: !1, isCreatingLink: !1, urlCopied: !1, createdLinkUrl: "".concat(n.protocol, "//").concat(n.hostname).concat(c).concat(n.pathname).concat(r).concat(o) }) } }, Qc = function (e, t) { return Wc[t.type](e, t) }, Jc = function () { return Object(n.useReducer)(Qc, { showCreateLinkModal: !1, showLinkCreatedModal: !1, recaptchaSuccess: !1, createdLinkUrl: "", customLinkText: null, isCreatingLink: !1, urlCopied: !1 }) }, Xc = a(440), Zc = (a(781), function (e) { var t = Jc(), a = Object(d.a)(t, 2), r = a[0], o = a[1], l = Object(k.a)(), i = Object(n.useContext)(Ea), s = Object(n.useContext)(b), u = ut(), m = Object(n.useRef)(), f = e.disabled, p = e.renderCreateLink, g = i.items.filter((function (e) { return !0 === e.selected })).length, h = Object(n.useCallback)((function () { u("saved items", "click", "create link dialog cancel"), o({ type: Hc }) }), [o, u]), E = Object(n.useCallback)((function () { u("saved items", "click", "link created dialog confirm"), o({ type: Uc }) }), [o, u]), v = Object(n.useCallback)((function () { u("saved items", "click", "shared items link copied"), o({ type: Gc }) }), [o, u]), I = Object(n.useCallback)((function () { u("saved items", "click", "link created dialog cancel"), o({ type: Uc }) }), [o, u]), O = Object(n.useCallback)((function () { u("saved items", "click", "open create link dialog"), o({ type: Yc }) }), [o, u]), S = Object(n.useCallback)((function () { var e = i.items.filter((function (e) { return !0 === e.selected })), t = []; return e.forEach((function (e) { return t.push({ alias: e.alias, id: e.id.toString() }) })), t }), [i]), j = Object(n.useCallback)((function (e) { u("saved items", "click", "create link dialog confirm", "saved items: create link", { custom_link_text: e }), o({ type: qc }), Sa(S(), "SAVE_SHARED_LIST", s.name).then((function (t) { var a = window.location, n = null !== a.port && void 0 !== a.port && "" !== a.port ? ":".concat(a.port) : ""; o({ type: zc, payload: { loc: a, port: n, customLinkText: e, id: t.id } }) })) }), [s.name, o, S, u]), _ = Object(n.useCallback)((function () { o({ type: Vc, payload: !0 }) }), [o]); return [p(r, g, h, j, _, o), c.a.createElement(va.a, { show: r.showLinkCreatedModal, className: "SavedItemsCreateLinkButton-linkCreatedModal", "aria-labelledby": H.a.decode(l.formatMessage({ id: "SITE_KEY_LinkCreated", defaultMessage: " " })), onHide: I, key: 2, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "SavedItemsCreateLinkButton-linkCreatedHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, H.a.decode(l.formatMessage({ id: "SITE_KEY_LinkCreated", defaultMessage: " " })))), c.a.createElement(va.a.Body, null, c.a.createElement("div", { className: "SavedItemsCreateLinkButton-linkCreatedDialogText" }, H.a.decode(l.formatMessage({ id: "SITE_KEY_SaveLinkMessage", defaultMessage: " " })), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement("span", { ref: m }, r.createdLinkUrl), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement(Xc.CopyToClipboard, { text: r.createdLinkUrl, onCopy: v }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "default" }, H.a.decode(l.formatMessage({ id: "SITE_KEY_CopyLink", defaultMessage: " " })))), r.urlCopied ? c.a.createElement("div", { className: "SavedItemsCreateLinkButton-createLinkSuccess bg-success" }, c.a.createElement("span", { className: "fa fa-check-circle", "aria-hidden": !0 }), c.a.createElement("span", { className: "SavedItemsCreateLinkButton-copyHtmlSuccessMessage", "data-id": "createLinkUrlCopiedToClipboardAlert" }, H.a.decode(l.formatMessage({ id: "SITE_KEY_generate_map_content_copied", defaultMessage: " " })))) : void 0)), c.a.createElement(va.a.Footer, null, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: E }, H.a.decode(l.formatMessage({ id: "SITE_KEY_OK", defaultMessage: " " }))))), c.a.createElement(W.a, { bsStyle: "primary", className: "cdm-btn", onClick: O, "data-id": "createLinkButton", "aria-label": H.a.decode(l.formatMessage({ id: "SITE_KEY_CreateLink", defaultMessage: " " })), disabled: f, key: 3 }, c.a.createElement(J.a, { className: "SavedItemsCreateLinkButton-link SavedItemsCreateLinkButton-desktopIcon fa-lg", name: "link", rotate: 270 }), c.a.createElement(J.a, { className: "SavedItemsCreateLinkButton-link SavedItemsCreateLinkButton-mobileIcon fa-2x", name: "link", rotate: 90 }), c.a.createElement("span", { className: "SavedItemsCreateLinkButton-buttonText" }, H.a.decode(l.formatMessage({ id: "SITE_KEY_CreateLink", defaultMessage: " " }))))] }), $c = a(445), er = (a(782), function (e) { var t = Object(k.a)(), a = e.show, r = e.numberOfSelectedSavedItems, o = e.onCancel, l = e.onCreateLink, i = e.onRecaptchaSuccess, s = e.enableCreateLinkButton, u = e.isCreatingLink, m = window && window.location && window.location.hostname, f = RegExp(/(cdm(.*)\.(dev|qa)\.oclc\.org)|(cdm(.*).localhost)/, "g"), b = Object(n.useState)({ recaptchaSiteKey: f.test(m) ? "6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI" : "6Leh1MsUAAAAAE9w4ePS1lIwwkQ0-wJBzsB1vrgr" }), p = Object(d.a)(b, 1)[0], g = Object(n.useRef)(), h = Object(n.useCallback)((function (e) { /[a-z0-9_-]/gi.test(e.key) || e.preventDefault() }), []), E = Object(n.useCallback)((function () { var e = g.current.value; l(null !== e && void 0 !== e && "" !== e ? "/".concat(e, "/") : "/") }), [l]); return c.a.createElement(va.a, { show: a, className: "SavedItemsCreateLinkModal-createLinkModal", "aria-labelledby": H.a.decode(t.formatMessage({ id: "SITE_KEY_CreateLink", defaultMessage: " " })), onHide: o, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "SavedItemsCreateLinkModal-createLinkHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_CreateLink", defaultMessage: " " })))), c.a.createElement(va.a.Body, null, c.a.createElement("div", { className: "SavedItemsCreateLinkModal-createLinkDialogText" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_CreateSharedLink", defaultMessage: " " }, { num_of_items: r })), c.a.createElement("br", null), c.a.createElement("br", null), H.a.decode(t.formatMessage({ id: "SITE_KEY_CreateSharedLinkViewItems", defaultMessage: " " })), c.a.createElement("br", null), c.a.createElement("br", null), "".concat(H.a.decode(t.formatMessage({ id: "SITE_KEY_ExampleLink", defaultMessage: " " })), ": https://cdm10010.contentdm.oclc.org/digital/saved/"), c.a.createElement("span", { className: "SavedItemsCreateLinkModal-customSection" }, "CustomLinkText"), "/1e78aefc-daef-4e11-8e30-e5ebf84c8fd2", c.a.createElement("div", { className: "SavedItemsCreateLinkModal-modalBackground" }, c.a.createElement("div", { className: "SavedItemsCreateLinkModal-header" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_Optional", defaultMessage: " " }))), c.a.createElement("div", { className: "SavedItemsCreateLinkModal-exampleContent" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_AddCustomLink", defaultMessage: " " }))), c.a.createElement("input", { type: "text", maxLength: 40, ref: g, onKeyPress: h }), c.a.createElement("div", { className: "SavedItemsCreateLinkModal-exampleContent", dangerouslySetInnerHTML: { __html: Fe(t.formatMessage({ id: "SITE_KEY_CustomSharedLinkExamples", defaultMessage: " " })) } })), c.a.createElement("div", { className: "SavedItemsCreateLinkModal-recaptcha" }, c.a.createElement($c.a, { onChange: i, sitekey: p.recaptchaSiteKey })))), c.a.createElement(va.a.Footer, { className: "SavedItemsCreateLinkModal-createLinkDialogFooter" }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "default", onClick: o }, H.a.decode(t.formatMessage({ id: "SITE_KEY_cancel", defaultMessage: " " }))), s ? u ? c.a.createElement(kn, null) : c.a.createElement(W.a, { className: "SavedItemsCreateLinkModal-modalLinkButton cdm-btn", bsStyle: "primary", onClick: E }, c.a.createElement("span", null, H.a.decode(t.formatMessage({ id: "SITE_KEY_CreateLink", defaultMessage: " " })))) : c.a.createElement(W.a, { className: "SavedItemsCreateLinkModal-modalLinkButton cdm-btn", bsStyle: "primary", disabled: !0 }, c.a.createElement("span", null, H.a.decode(t.formatMessage({ id: "SITE_KEY_CreateLink", defaultMessage: " " })))))) }), tr = a(804), ar = a(805), nr = a(809), cr = (a(783), a(784)), rr = function () { var e = Object(k.a)(), t = ut(), a = Object(n.useContext)(Ea), r = Object(n.useState)({ show: !1, mySelectInput: "DEFAULT", selectedItemsForExport: null }), o = Object(d.a)(r, 2), l = o[0], i = o[1], s = a.loading ? 0 : a.items.filter((function (e) { return !0 === e.selected })).length, u = Ra.renderToString(c.a.createElement("b", null, H.a.decode(e.formatMessage({ id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " })))), m = H.a.decode(e.formatMessage({ id: "SITE_KEY_SavedItemsExportWarning", defaultMessage: " " }, { SAVED_ITEMS_TMX: u, num_of_selected_items: s })), f = Object(n.useCallback)((function () { i(Object(p.a)(Object(p.a)({}, l), {}, { show: !0 })) }), [l]), b = Object(n.useCallback)((function () { i(Object(p.a)(Object(p.a)({}, l), {}, { show: !1 })) }), [l]), g = Object(n.useCallback)((function (e) { i(Object(p.a)(Object(p.a)({}, l), {}, { show: !0, mySelectInput: e.target.value })), t("saved items", "exported items", "select ".concat(e.target.value)) }), [l, t]), h = Object(n.useCallback)((function () { var e = a.items.filter((function (e) { return !0 === e.selected })), t = []; return e.forEach((function (e) { return t.push({ alias: e.alias, id: e.id.toString() }) })), t }), [a]), E = Object(n.useCallback)((function (e) { e.preventDefault(); var n = l.mySelectInput, c = h(a), r = new Date, o = r.getMonth() + 1 + "-" + r.getDate() + "-" + r.getFullYear(), i = "html" === n ? "".concat(o, ".").concat(n) : "".concat(o, ".txt"), s = "html" === n ? "html" : "text"; b(), Oa(c, n).then((function (e) { return cr(e, i) })), t("saved items", "exported items", "export items as ".concat(n), "export items: items exported", { format: "".concat(s) }) }), [l, h, b, a, t]); return a.loading ? c.a.createElement(c.a.Fragment, null) : c.a.createElement("div", { className: "ExportSavedButton-exportButton" }, c.a.createElement(W.a, { onClick: f, bsStyle: "primary", className: "cdm-btn", "data-id": "exportButton", disabled: "disabled" === a.buttonState || !a.loading && 0 === a.items.filter((function (e) { return e.selected })).length, "aria-label": H.a.decode(e.formatMessage({ id: "SITE_KEY_ExportButton", defaultMessage: " " })) }, c.a.createElement(J.a, { className: "ExportSavedButton-download ExportSavedButton-desktopIcon fa-lg", name: "download" }), c.a.createElement(J.a, { className: "ExportSavedButton-download ExportSavedButton-mobileIcon fa-2x", name: "download" }), c.a.createElement("span", { className: "ExportSavedButton-buttonText" }, H.a.decode(e.formatMessage({ defaultMessage: " ", id: "SITE_KEY_ExportButton" })))), c.a.createElement(va.a, { className: "ExportSavedButton-exportModal", show: l.show, onHide: b, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "ExportSavedButton-exportHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, H.a.decode(e.formatMessage({ id: "SITE_KEY_ExportFiles", defaultMessage: " " })))), c.a.createElement(va.a.Body, null, c.a.createElement("p", { className: "ExportSavedButton-modalText", dangerouslySetInnerHTML: { __html: m } })), c.a.createElement(va.a.Footer, { className: "ExportSavedButton-modalFooter" }, c.a.createElement("form", null, c.a.createElement(tr.a, { controlId: "formControlsSelect", className: "ExportSavedButton-formGroup" }, c.a.createElement(ar.a, null, H.a.decode(e.formatMessage({ id: "SITE_KEY_ExportButton", defaultMessage: " " }))), c.a.createElement(nr.a, { className: "ExportSavedButton-selectControl", componentClass: "select", defaultValue: "DEFAULT", onChange: g, name: "mySelectInput" }, c.a.createElement("option", { value: "DEFAULT", disabled: !0 }, H.a.decode(e.formatMessage({ id: "SITE_KEY_ChooseOption", defaultMessage: " " }))), c.a.createElement("option", { value: "text" }, H.a.decode(e.formatMessage({ id: "SITE_KEY_PlainText", defaultMessage: " " }))), c.a.createElement("option", { value: "html" }, H.a.decode(e.formatMessage({ id: "SITE_KEY_SimpleHTML", defaultMessage: " " }))))), c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "default", onClick: b }, H.a.decode(e.formatMessage({ id: "SITE_KEY_cancel", defaultMessage: " " }))), c.a.createElement(W.a, { className: "ExportSavedButton-modalDownloadButton cdm-btn", bsStyle: "primary", disabled: "DEFAULT" === l.mySelectInput, onClick: E }, H.a.decode(e.formatMessage({ id: "SITE_KEY_ExportButton", defaultMessage: " " }))))))) }, or = (a(785), function (e) { var t = ut(), a = Object(k.a)(), r = e.selectEnabled, o = e.selected, l = e.dispatch, i = e.title, s = e.metadataFields, d = e.thumbnailUri, u = e.thumbnailEnabled, m = e.collectionAlias, f = e.itemId, b = "/digital/collection/".concat(m, "/id/").concat(f), p = s.map((function (e) { return { value: e } })), g = Object(n.useCallback)((function (e) { var n = "".concat(e.target.checked ? "select" : "deselect"); t("saved items list card", "click", "".concat(n, " collection: ").concat(m, " item: ").concat(f), "select saved item", { type: n, collection_alias: m, item_id: "".concat(m, "/id/").concat(f) }), l({ type: Ca, payload: { alias: m, id: f, selected: e.target.checked, intl: a } }) }), [l, a, m, f, t]), h = Object(n.useCallback)((function () { t("saved items list card", "click", "/digital/collection/".concat(m, "/id/").concat(f), "view saved item", { collection_alias: m, item_id: "".concat(m, "/id/").concat(f) }) }), [t, m, f]); return c.a.createElement("div", { className: "SelectableItemListCard-container" }, r ? c.a.createElement("input", { className: "SelectableItemListCard-selectItem", onChange: g, type: "checkbox", checked: o ? "checked" : "", "aria-label": "".concat(i, " ").concat(o ? "selected" : "not selected") }) : null, c.a.createElement(Ae.b, { to: b, onClick: h, className: "SelectableItemListCard-linkContainer shared-search-box shared-box shared-search-box shared-box row SelectableItemListCard cdm-item-card", tabIndex: 0 }, u ? c.a.createElement("div", { className: "SelectableItemListCard-thumbnailHolder" }, c.a.createElement("img", { src: "/digital" + d, className: "SelectableItemListCard-thumbnail", alt: i })) : void 0, c.a.createElement("div", { className: "SelectableItemListCard-contentHolder" }, c.a.createElement(hc, { fields: p })))) }), lr = (a(786), function (e) { var t = ut(), a = Object(k.a)(), r = Object(n.useRef)(null); Object(n.useEffect)((function () { r.current && (r.current.style.cssText = Ct(r.current.innerText, kt(r.current, "font-size").replace(/[^-\d.]/g, ""), kt(r.current, "line-height").replace(/[^-\d.]/g, ""), 3, "h2")) }), [r]); var o = e.selectEnabled, l = e.selected, i = e.dispatch, s = e.title, d = e.thumbnailUri, u = e.thumbnailEnabled, m = e.collectionAlias, f = e.itemId, b = "/digital/collection/".concat(m, "/id/").concat(f), p = Object(n.useCallback)((function (e) { var n = "".concat(e.target.checked ? "select" : "deselect"); t("saved items grid card", "click", "".concat(n, " collection: ").concat(m, " item: ").concat(f), "select saved item", { type: n, collection_alias: m, item_id: "".concat(m, "/id/").concat(f) }), i({ type: Ca, payload: { alias: m, id: f, selected: e.target.checked, intl: a } }) }), [i, a, m, f, t]), g = Object(n.useCallback)((function () { t("saved items grid card", "click", "/digital/collection/".concat(m, "/id/").concat(f), "view saved item", { collection_alias: m, item_id: "".concat(m, "/id/").concat(f) }) }), [t, m, f]); return c.a.createElement("div", { className: "SelectableItemGridCard-container" }, o ? c.a.createElement("input", { className: "SelectableItemGridCard-selectItem", onChange: p, type: "checkbox", checked: l ? "checked" : "", "aria-label": "".concat(s, " ").concat(l ? "selected" : "not selected") }) : null, c.a.createElement(Ae.b, { to: b, onClick: g, tabIndex: 0, className: "SelectableItemGridCard-item SelectableItemGridCard-container" }, u ? c.a.createElement("div", { className: "SelectableItemGridCard-thumbnailHolder" }, c.a.createElement("img", { src: "/digital" + d, className: "SelectableItemGridCard-thumbnail", alt: "".concat(s) })) : null, c.a.createElement("h2", { ref: r, className: "SelectableItemGridCard-cardTitle truncation" }, s))) }), ir = (a(787), function (e) { var t = Object(k.a)(), a = e.show, n = e.numberOfSelectedSavedItems, r = e.onCancel, o = e.onRemove, l = Ra.renderToString(c.a.createElement("b", null, H.a.decode(t.formatMessage({ id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " })))), i = H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_SavedItemsRemoveWarning" }, { num_of_selected_items: n, SAVED_ITEMS_TMX: l })), s = H.a.decode(t.formatMessage({ id: "SITE_KEY_SavedItemsRemoveNotice", defaultMessage: " " }, { SAVED_ITEMS_TMX: l })); return c.a.createElement(va.a, { show: a, className: "RemoveSavedItemsModal-removeItemsModal", size: "lg", "aria-labelledby": H.a.decode(t.formatMessage({ id: "SITE_KEY_SavedItemsRemoveDialogTitle", defaultMessage: " " })), onHide: r, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0, className: "RemoveSavedItemsModal-removeHeader" }, c.a.createElement(va.a.Title, { componentClass: "h1" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_SavedItemsRemoveDialogTitle", defaultMessage: " " })))), c.a.createElement(va.a.Body, null, c.a.createElement("p", { className: "RemoveSavedItemsModal-removeDialogText" }, c.a.createElement("span", { dangerouslySetInnerHTML: { __html: i } }), c.a.createElement("br", null), c.a.createElement("br", null), c.a.createElement("span", { dangerouslySetInnerHTML: { __html: s } }))), c.a.createElement(va.a.Footer, { className: "RemoveSavedItemsModal-removeDialogFooter" }, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "default", onClick: r }, H.a.decode(t.formatMessage({ id: "SITE_KEY_cancel", defaultMessage: " " }))), c.a.createElement(W.a, { className: "RemoveSavedItemsModal-modalRemoveButton cdm-btn", bsStyle: "primary", onClick: o }, H.a.decode(t.formatMessage({ id: "SITE_KEY_RemoveButton", defaultMessage: " " }))))) }), sr = (a(788), function (e) { var t = Object(k.a)(), a = Object(n.useContext)(b), r = ut(), o = dc(), l = Object(d.a)(o, 2), u = l[0], m = l[1], f = Object(n.useContext)(Ea), p = Object(d.a)(f, 2), g = p[0], h = p[1], E = Object(n.useContext)(b); K(T.SAVED_ITEMS_PAGE, g && !g.loading), Object(n.useEffect)((function () { e.setMainClass("cdm-saved-items-page") })), Object(n.useEffect)((function () { (function () { var e = Object(s.a)(i.a.mark((function e() { var t, n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return t = JSON.parse(localStorage.getItem("savedItems")) || [], h({ type: Na, payload: !0 }), e.next = 4, Ia(t); case 4: n = e.sent, h({ type: ya, payload: { items: n.items.reverse(), authname: a.name } }); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } })()() }), [a.name, h]), Object(n.useEffect)((function () { h({ type: ka, payload: { allSelected: !1, selectedText: H.a.decode(t.formatMessage({ id: "SITE_KEY_SelectAllSavedItems", defaultMessage: " " })) } }) }), [E.name, h, t]); var v = Object(n.useCallback)((function (e) { var a = ""; e.target.checked ? (a = H.a.decode(t.formatMessage({ id: "SITE_KEY_DeselectAllSavedItems", defaultMessage: " " })), r("saved items", "click", "deselect all", "saved items: deselect all", { type: "deselect" })) : (a = H.a.decode(t.formatMessage({ id: "SITE_KEY_SelectAllSavedItems", defaultMessage: " " })), r("saved items", "click", "select all", "saved items: select all", { type: "select" })), h({ type: ka, payload: { allSelected: e.target.checked, selectedText: a } }) }), [h, r, t]), I = Object(n.useCallback)((function () { r("saved items", "click", "open remove items dialog", "saved items: open remove items"), h({ type: Ta, payload: !0 }) }), [r, h]), O = Object(n.useCallback)((function () { r("saved items", "click", "remove items dialog cancel", "saved items: cancel remove items"), h({ type: Ta, payload: !1 }) }), [r, h]), S = Object(n.useCallback)((function () { r("saved items", "click", "remove items dialog confirm", "saved items: confirm remove items"), h({ type: Ma, payload: { authname: E.name } }) }), [r, h, E.name]), j = Object(n.useCallback)((function () { r("saved items", "click", "login", "log in link") }), [r]), _ = function () { return "disabled" === g.buttonState || !g.loading && g.items && 0 === g.items.filter((function (e) { return e.selected })).length }, y = function (e) { return c.a.createElement("div", { className: e }, c.a.createElement(_c, null), c.a.createElement("span", { className: "SavedItems-savedItems" }, c.a.createElement("h3", { className: "SavedItems-savedItemsCount" }, g.items ? H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_NumItemsLabel" }, { num_of_items: g.items.length })) : null))) }, C = function (e) { return c.a.createElement(cc.Provider, { value: [u, m] }, c.a.createElement("div", { className: "SavedItems-buttonContainer row" }, y("SavedItems-displaySelectorAndResultsMobile".concat(e)), c.a.createElement("span", { className: "SavedItems-selectionInput checkbox" }, c.a.createElement("label", null, c.a.createElement("input", { type: "checkbox", label: g.selectedText, onChange: v, checked: g.allSelected, "aria-label": g.selectedText }), g.selectedText)), c.a.createElement("div", { className: "SavedItems-buttonGroup" }, c.a.createElement(W.a, { bsStyle: "primary", className: "cdm-btn", onClick: I, "data-id": "removeSavedItemsButton", disabled: _(), "aria-label": H.a.decode(t.formatMessage({ id: "SITE_KEY_RemoveButton", defaultMessage: " " })) }, c.a.createElement(J.a, { className: "SavedItems-desktopIcon SavedItems-trash fa-lg", name: "trash" }), c.a.createElement(J.a, { className: "SavedItems-mobileIcon SavedItems-trash fa-2x", name: "trash" }), c.a.createElement("span", { className: "SavedItems-buttonText" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_RemoveButton", defaultMessage: " " })))), g ? c.a.createElement(Zc, { disabled: _(), renderCreateLink: function (e, t, a, n, r, o) { return c.a.createElement(er, { key: 1, show: e.showCreateLinkModal, numberOfSelectedSavedItems: t, onCancel: a, onCreateLink: n, onRecaptchaSuccess: r, enableCreateLinkButton: e.recaptchaSuccess, isCreatingLink: e.isCreatingLink, dispatch: o }) } }) : void 0, c.a.createElement(rr, null)), "Top" === e ? y("SavedItems-displaySelectorAndResultsDesktop".concat(e)) : null)) }, x = Ra.renderToString(c.a.createElement(Ae.a, null, c.a.createElement(Ae.b, { className: "SavedItems-url", to: "/digital/login?targetUrl=/saved", role: "link", title: H.a.decode(t.formatMessage({ id: "SITE_KEY_loginOrCreateAccount", defaultMessage: " " })), onClick: j, target: "" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_loginOrCreateAccount", defaultMessage: " " }))))), M = H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_SavedItemsSessionWarning" }, { loginOrCreateAccountTmx: x })); return c.a.createElement("div", { className: "SavedItems-container shared-box" }, c.a.createElement(Ea.Provider, { value: g }, c.a.createElement("h1", { className: "SavedItems-pageTitle", tabIndex: 0, title: H.a.decode(t.formatMessage({ id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " })) }, c.a.createElement(J.a, { className: "SavedItems-faTitle star", name: "star" }), H.a.decode(t.formatMessage({ id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " }))), c.a.createElement("div", { className: "grayDividerLine SavedItems-divider" }), g.loading ? c.a.createElement(z.a, { className: "SavedItems-alert", bsStyle: "info" }, c.a.createElement(J.a, { name: "info-circle" }), c.a.createElement("span", { "data-id": "FetchingNotification", tabIndex: 0, dangerouslySetInnerHTML: { __html: H.a.decode(t.formatMessage({ id: "SITE_KEY_loadingContent", defaultMessage: " " })) } }), c.a.createElement(J.a, { className: "SavedItems-spinner", name: "refresh", "aria-hidden": "true" })) : c.a.createElement(c.a.Fragment, null), g.loading ? c.a.createElement(c.a.Fragment, null) : null === g.savedItemIds || void 0 === g.savedItemIds || 0 === g.savedItemIds.length || 0 === g.items.length ? c.a.createElement("div", { className: "SavedItems-noSavedItems" }, Le(t.formatMessage({ id: "SITE_KEY_NoSavedItems", defaultMessage: " " }))) : c.a.createElement("div", null, function () { var e = g.items.filter((function (e) { return !0 === e.selected })).length, t = c.a.createElement(ir, { show: g.showRemoveModal, numberOfSelectedSavedItems: e, onCancel: O, onRemove: S }); return c.a.createElement("div", null, t) }(), E.name ? c.a.createElement(c.a.Fragment, null) : c.a.createElement("div", { className: "SavedItems-notification", dangerouslySetInnerHTML: { __html: M } }), c.a.createElement("div", { className: "SavedItems-notification" }, Le(t.formatMessage({ id: "SITE_KEY_keepRecordOfSavedItems", defaultMessage: " " }))), C("Top"), function () { if (!g.loading) return g.items && g.items.map((function (e, t) { return "grid" === u ? c.a.createElement(lr, { key: t, index: t, selectEnabled: !0, selected: e.selected, dispatch: h, thumbnailUri: e.thumbnailUri, thumbnailEnabled: e.thumbnailEnabled, title: e.title, metadataFields: e.metadata, collectionAlias: e.alias, itemId: e.id }) : c.a.createElement(or, { key: t, index: t, selectEnabled: !0, selected: e.selected, dispatch: h, thumbnailUri: e.thumbnailUri, thumbnailEnabled: e.thumbnailEnabled, title: e.title, metadataFields: [e.title].concat(Object(mn.a)(e.metadata)), collectionAlias: e.alias, itemId: e.id }) })) }(), C("Bottom")))) }), dr = (a(789), Object(ma.b)({ title: { id: "SITE_KEY_SavedItemsLimit", defaultMessage: " " }, savedItemsTitle: { id: "SITE_KEY_SavedItemsPageTitle", defaultMessage: " " }, confirmButton: { id: "SITE_KEY_ok", defaultMessage: " " } })), ur = function () { var e = Object(n.useContext)(Ea), t = Object(d.a)(e, 2), a = t[0], r = t[1], o = Object(k.a)(), l = Object(n.useCallback)((function () { r({ type: wa, payload: !1 }) }), [r]), i = Ra.renderToString(c.a.createElement("b", null, "200")), s = Ra.renderToString(c.a.createElement("b", null, H.a.decode(o.formatMessage(dr.savedItemsTitle)))), u = H.a.decode(o.formatMessage({ id: "SITE_KEY_MaxSavedItems", defaultMessage: " " }, { MAX_SAVED_ITEMS: i, SAVED_ITEMS_TMX: s })), m = H.a.decode(o.formatMessage({ defaultMessage: " ", id: "SITE_KEY_SavedItemsRemoveSavedInstruction" }, { SAVED_ITEMS_TMX: s })); return c.a.createElement(va.a, { show: a.showMaxItemsExceededDialog, className: "SavedItemsMaxExceededModal-container", size: "lg", "aria-labelledby": H.a.decode(o.formatMessage(dr.title)), onHide: l, autoFocus: !0 }, c.a.createElement(va.a.Header, { closeButton: !0 }, c.a.createElement(va.a.Title, { componentClass: "h1" }, H.a.decode(o.formatMessage(dr.title)))), c.a.createElement(va.a.Body, null, c.a.createElement("p", { dangerouslySetInnerHTML: { __html: u } }), c.a.createElement("br", null), c.a.createElement("p", { dangerouslySetInnerHTML: { __html: m } })), c.a.createElement(va.a.Footer, null, c.a.createElement(W.a, { className: "cdm-btn", bsStyle: "primary", onClick: l }, H.a.decode(o.formatMessage(dr.confirmButton))))) }, mr = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, fetch("/digital/api/saved/shared/".concat(t), Object(p.a)({ method: "GET", headers: { Accept: "application/json", "Accept-Language": localStorage.getItem("cdm_selected_language") } }, g.a)); case 2: return a = e.sent, e.next = 5, a.json(); case 5: return e.abrupt("return", e.sent); case 6: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), fr = "setSharedItems", br = "setLoading", pr = { setSharedItems: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { shared: t.payload, loading: !1 }) }, setLoading: function (e, t) { return Object(p.a)(Object(p.a)({}, e), {}, { loading: t.payload }) } }, gr = function (e, t) { return pr[t.type](e, t) }, hr = (a(790), function (e) { var t = Object(k.a)(), a = Object(x.i)().id, r = dc(), o = Object(d.a)(r, 2), l = o[0], u = o[1], m = function (e) { var t = Object(n.useReducer)(gr, { shared: { items: [], siteName: null, siteUrl: null, uuid: null }, loading: !0 }), a = Object(d.a)(t, 2), c = a[0], r = a[1]; return Object(n.useEffect)((function () { (function () { var t = Object(s.a)(i.a.mark((function t() { var a; return i.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (!e) { t.next = 7; break } return t.next = 3, mr(e); case 3: a = t.sent, r({ type: fr, payload: a }), t.next = 8; break; case 7: r({ type: br, payload: !1 }); case 8: case "end": return t.stop() } }), t) }))); return function () { return t.apply(this, arguments) } })()() }), [e]), [c, r] }(a), f = Object(d.a)(m, 1)[0]; K(T.SHARED_ITEMS_PAGE, f && !f.loading), Object(n.useEffect)((function () { e.setMainClass("cdm-shared-items-page") })); var b = function (e) { return c.a.createElement("div", { className: e }, c.a.createElement(_c, null), c.a.createElement("span", { className: "SharedItems-sharedItems" }, c.a.createElement("h3", { className: "SharedItems-sharedItemsCount" }, f.shared.items.length > 0 ? H.a.decode(t.formatMessage({ defaultMessage: " ", id: "SITE_KEY_NumItemsLabel" }, { num_of_items: f.shared.items.length })) : c.a.createElement(c.a.Fragment, null)))) }; return c.a.createElement(cc.Provider, { value: [l, u] }, c.a.createElement("div", { className: "SharedItems-container shared-box" }, c.a.createElement("h1", { className: "SharedItems-pageTitle", tabIndex: 0, title: H.a.decode(t.formatMessage({ id: "SITE_KEY_SharedItemsPageTitle", defaultMessage: " " })) }, c.a.createElement(J.a, { className: "SharedItems-faTitle star", name: "star" }), H.a.decode(t.formatMessage({ id: "SITE_KEY_SharedItemsPageTitle", defaultMessage: " " }))), c.a.createElement("div", { className: "grayDividerLine SharedItems-divider" }), f.loading ? c.a.createElement(z.a, { className: "SharedItems-alert", bsStyle: "info" }, c.a.createElement(J.a, { name: "info-circle" }), c.a.createElement("span", { "data-id": "FetchingNotification", tabIndex: 0, dangerouslySetInnerHTML: { __html: H.a.decode(t.formatMessage({ id: "SITE_KEY_loadingContent", defaultMessage: " " })) } }), c.a.createElement(J.a, { className: "SharedItems-spinner", name: "refresh", "aria-hidden": "true" })) : c.a.createElement(c.a.Fragment, null), f.loading || null != f.shared.items && 0 !== f.shared.items.length ? c.a.createElement("div", { className: "SharedItems-sharedItemContainer" }, f.loading ? c.a.createElement(c.a.Fragment, null) : [c.a.createElement("div", { key: "1", className: "SharedItems-sharedTitle" }, H.a.decode(t.formatMessage({ id: "SITE_KEY_SharedItemsPageDesc", defaultMessage: " " }))), c.a.createElement("div", { key: "2", className: "SharedItems-buttonContainer row" }, b("SharedItems-displaySelectorAndResultsDesktopTop"), b("SharedItems-displaySelectorAndResultsMobileTop"))], function () { if (null != f.shared.items) return f.shared.items.map((function (e, t) { return "grid" === l ? c.a.createElement(lr, { key: t, index: t, selectEnabled: !1, selected: e.selected, thumbnailUri: e.thumbnailUri, thumbnailEnabled: e.thumbnailEnabled, title: e.title, metadataFields: e.metadata, collectionAlias: e.alias, itemId: e.id }) : c.a.createElement(or, { key: t, index: t, selectEnabled: !1, selected: e.selected, thumbnailUri: e.thumbnailUri, thumbnailEnabled: e.thumbnailEnabled, title: e.title, metadataFields: [e.title].concat(Object(mn.a)(e.metadata)), collectionAlias: e.alias, itemId: e.id }) })) }()) : c.a.createElement("div", { className: "SharedItems-noSavedItems" }, Le(t.formatMessage({ id: "SITE_KEY_NoSavedItems", defaultMessage: " " }))))) }), Er = function (e) { var t = Object(x.h)(), a = Object(n.useContext)(Re), r = Object(n.useContext)(De.a).preview, o = Object(n.useState)(null), l = Object(d.a)(o, 2), i = l[0], s = l[1], u = e.renderFn, m = e.advancedSearch, f = e.collData, b = e.simpleSearch, p = e.savedItemsDispatch, g = e.header, h = e.footer; return Object(n.useEffect)((function () { var e, n = Object(ft.d)(t); if (n && 1 === n.length) { var c = Ye(r, a, n[0]); e = Object(d.a)(c, 1)[0], s(e) } else s(null) }), [t, a, r]), m.isLoading ? c.a.createElement(c.a.Fragment, null) : u(f, b, p, g.headerEnabled, h.footerEnabled, i) }, vr = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, fetch("/digital/api/collections/".concat(t), Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)); case 3: return a = e.sent, e.t0 = a.status, e.next = 7, a.json(); case 7: return e.t1 = e.sent, e.abrupt("return", { status: e.t0, body: e.t1 }); case 11: return e.prev = 11, e.t2 = e.catch(0), e.abrupt("return", e.t2); case 14: case "end": return e.stop() } }), e, null, [[0, 11]]) }))); return function (t) { return e.apply(this, arguments) } }(), Ir = function (e) { var t = e.render, a = e.collection, r = e.siteConfig, o = Object(n.useReducer)(at, { headerEnabled: !0 }), l = Object(d.a)(o, 2), u = l[0], m = l[1], f = Object(n.useReducer)(nt, { footerEnabled: !0 }), g = Object(d.a)(f, 2), h = g[0], v = g[1], I = Object(n.useState)(null), O = Object(d.a)(I, 2), S = O[0], j = O[1], _ = Object(n.useState)(null), y = Object(d.a)(_, 2), C = y[0], x = y[1], M = function () { var e = Object(n.useReducer)(ue, { isLoading: !0, filters: { collections: [] }, collectionFilterChanged: !1, collection: "", searchTermFields: [], queries: [Object(p.a)({}, ee)], dateQuery: Object(p.a)({}, te), hasFilterChanges: !1 }), t = Object(d.a)(e, 2), a = t[0], c = t[1]; return Object(n.useEffect)((function () { var e = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, Z(); case 2: t = e.sent, c({ type: ce, payload: t }); case 4: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); (function () { var t = Object(s.a)(i.a.mark((function t() { return i.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, e(); case 2: c({ type: ae, payload: !1 }); case 3: case "end": return t.stop() } }), t) }))); return function () { return t.apply(this, arguments) } })()() }), []), [a, c] }(), T = Object(d.a)(M, 2), w = T[0], N = T[1], A = function () { var e = Object(k.a)(), t = JSON.parse(localStorage.getItem("savedItems")), a = Object(n.useState)(Array.isArray(t) ? t : []), c = Object(d.a)(a, 1)[0], r = Object(n.useReducer)(Pa, { savedItemIds: c, items: [], allSelected: !1, selectedText: H.a.decode(e.formatMessage({ id: "SITE_KEY_SelectAllSavedItems", defaultMessage: " " })), loading: !!(c && c.length > 0), buttonState: "disabled", showRemoveModal: !1, showCreateLinkModal: !1, showMaxItemsExceededDialog: !1, isRefreshing: !1, authname: "" }), o = Object(d.a)(r, 2); return [o[0], o[1]] }(), F = Object(d.a)(A, 2), L = F[0], P = F[1], R = Object(n.useReducer)(gn, fn), K = Object(d.a)(R, 2), B = K[0], D = K[1], Y = Object(n.useContext)(b), U = r.enableSavedItems; return Object(n.useEffect)((function () { (function () { var e = Object(s.a)(i.a.mark((function e() { var t, n, c, r; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (t = a && 1 === a.split("!").length ? a : null, e.prev = 1, !t) { e.next = 8; break } return e.next = 5, vr(t); case 5: e.t0 = e.sent, e.next = 9; break; case 8: e.t0 = null; case 9: n = e.t0, e.next = 15; break; case 12: e.prev = 12, e.t1 = e.catch(1), console.error(e.t1); case 15: if (e.prev = 15, !t) { e.next = 22; break } return e.next = 19, E(t); case 19: e.t2 = e.sent, e.next = 23; break; case 22: e.t2 = null; case 23: c = e.t2, e.next = 29; break; case 26: e.prev = 26, e.t3 = e.catch(15), console.error(e.t3); case 29: if (e.prev = 29, !t) { e.next = 36; break } return e.next = 33, hn(t); case 33: e.t4 = e.sent, e.next = 37; break; case 36: e.t4 = null; case 37: r = e.t4, e.next = 43; break; case 40: e.prev = 40, e.t5 = e.catch(29), console.error(e.t5); case 43: n = Object(p.a)(Object(p.a)({}, n), {}, { messages: c, collSearchInfo: r }), j(n); case 45: case "end": return e.stop() } }), e, null, [[1, 12], [15, 26], [29, 40]]) }))); return function () { return e.apply(this, arguments) } })()() }), [a]), Object(n.useEffect)((function () { U && Y.name && function () { var e = Object(s.a)(i.a.mark((function e() { var t, a, n; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return P({ type: Na, payload: !0 }), t = JSON.parse(localStorage.getItem("savedItems")) || [], e.next = 4, Sa(t, "SAVE_PERSONAL_LIST", Y.name); case 4: return a = e.sent, P({ type: Fa, payload: a.ids }), P({ type: wa, payload: "warning" === a.status && "maximum items reached" === a.message }), e.next = 9, Ia(a.ids); case 9: n = e.sent, P({ type: ya, payload: { items: n.items.reverse(), authname: Y.name } }); case 11: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }()() }), [U, Y.name, P]), Object(n.useEffect)((function () { (function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (!0 !== L.isRefreshing || !L.savedItemIds) { e.next = 7; break } return e.next = 3, Ia(L.savedItemIds); case 3: t = e.sent, P({ type: ya, payload: { items: t.items.reverse(), authname: Y.name } }), P({ type: _a, payload: { savedItemIds: L.savedItemIds, authname: Y.name, skipPersist: !0 } }), P({ type: Aa, payload: !1 }); case 7: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } })()() }), [Y.name, L.savedItemIds, P, L.isRefreshing]), c.a.createElement(De.a.Provider, { value: r }, c.a.createElement(Re.Provider, { value: S }, c.a.createElement(qt.a.Provider, { value: [C, x] }, c.a.createElement(un.Provider, { value: [B, D] }, c.a.createElement(q.a.Provider, { value: [w, N] }, c.a.createElement(uc.Provider, { value: { filters: w.filters } }, c.a.createElement(Ea.Provider, { value: [L, P] }, c.a.createElement(Ze.Provider, { value: [u, m] }, c.a.createElement(Xe.Provider, { value: [h, v] }, c.a.createElement(Er, { renderFn: t, advancedSearch: w, collData: S, simpleSearch: C, savedItemsDispatch: P, header: u, footer: h })))))))))) }, Or = (a(791), function (e) { var t = Object(k.a)(), a = function (t) { if (t && ("click" === t.type || "keydown" === t.type && t.nativeEvent && 13 === t.nativeEvent.keyCode)) { var a = document.querySelector(e.href); if (!a) return; var n = document.querySelector(".SearchResult"); if (n) return void n.focus(); var c = Array.from(a.querySelectorAll("[tabindex]")).filter((function (e) { return e.tabIndex > -1 })); if (0 === c.length) return; var r = c.reduce((function (e, t) { return t.tabIndex < e.tabIndex ? t : e })); r && r.focus && r.focus() } }, n = e.tabIndex; return c.a.createElement("span", { title: H.a.decode(t.formatMessage({ id: "SITE_cdm_KEY_skip_to_main_content", defaultMessage: " " })), tabIndex: n, className: "SkipToMainContent-skipNav", onClick: a, onKeyDown: a, "data-id": "skip-to-main-content" }, H.a.decode(t.formatMessage({ id: "SITE_cdm_KEY_skip_to_main_content", defaultMessage: " " }))) }), Sr = (a(792), Object(n.memo)((function (e) { var t = e.collection, a = e.siteConfig, r = Object(k.a)(), o = Object(n.useState)("cdm-home-page"), l = Object(d.a)(o, 2), i = l[0], s = l[1]; return Object(n.useEffect)((function () { P(A.appReady()) }), []), c.a.createElement(Ir, { collection: t, siteConfig: a, render: function (e, t, n, o, l, d) { window.onstorage = function (e) { if ("savedItems" === e.key) { var t = e && e.newValue ? JSON.parse(e.newValue) : []; n({ type: xa, payload: { savedItemIds: t } }) } }; var u = c.a.createElement(x.d, null, c.a.createElement(x.b, { exact: !0, path: "/", render: function () { return a.homepage.customLandingPageEnabled ? c.a.createElement(ot, { customHtml: a.homepage.customLandingPage, setMainClass: s }) : c.a.createElement(Yt, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital", render: function () { return a.homepage.customLandingPageEnabled ? c.a.createElement(ot, { customHtml: a.homepage.customLandingPage, setMainClass: s }) : c.a.createElement(Yt, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/login", render: function () { return c.a.createElement(nc, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/about", render: function () { return c.a.createElement(G, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/collection/:collectionAlias/custom/:filename", render: function () { return c.a.createElement(rt, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/collection/:collectionAlias", render: function () { var t; return e && e.body && e.body.customLandingPageEnabled ? t = e.body.customLandingPage ? c.a.createElement(ot, { customHtml: e.body.customLandingPage, setMainClass: s }) : c.a.createElement(We, { setMainClass: s }) : e && e.body && e.body.customUrlEnabled ? window.location.href = e.body.customURL : t = e && e.body ? c.a.createElement(We, { setMainClass: s }) : c.a.createElement(c.a.Fragment, null), t } }), c.a.createElement(x.b, { path: "/digital/collection/:collectionAlias/id/:itemId", render: function () { return c.a.createElement(Qn, { setMainClass: s }) } }), c.a.createElement(x.b, { path: "/digital/collection/:collectionAlias/search", render: function () { return c.a.createElement(Dc, { setMainClass: s }) } }), c.a.createElement(x.b, { path: "/digital/search/advanced", render: function () { return c.a.createElement(Ne, { setMainClass: s }) } }), c.a.createElement(x.b, { path: "/digital/search/collection/:collectionAlias", render: function () { return c.a.createElement(Dc, { setMainClass: s }) } }), c.a.createElement(x.b, { path: "/digital/search", render: function () { return c.a.createElement(Dc, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/saved", render: function () { return a.enableSavedItems ? c.a.createElement(sr, { setMainClass: s }) : c.a.createElement(x.a, { to: "/digital/" }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/saved/:id", render: function () { return c.a.createElement(hr, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/digital/saved/:customLinkText/:id", render: function () { return c.a.createElement(hr, { setMainClass: s }) } }), c.a.createElement(x.b, { path: "/digital/custom/:filename", render: function () { return c.a.createElement(rt, { setMainClass: s }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/helpdocs/collection/:collectionAlias", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/helpdocs", render: function () { return c.a.createElement(x.a, { to: "/digital" }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/about/collection/:collectionAlias", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/about", render: function () { return c.a.createElement(x.a, { to: "/digital/about" }) } }), c.a.createElement(x.b, { path: "/cdm/search/collection/:collectionAlias/*", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/search/").concat(e.match.params[0]) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/search", render: function () { return c.a.createElement(x.a, { to: "/digital/search" }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/search/collection/:collectionAlias", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/search") }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/compoundobject/collection/:collectionAlias/id/:itemId/show/*", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params[0]) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/ref/collection/:collectionAlias/id/:itemId/show/*", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params[0]) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/ref/collection/:collectionAlias/id/:itemId/rec/*", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/compoundobject/collection/:collectionAlias/id/:itemId/rec/*", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/singleitem/collection/:collectionAlias/id/:itemId/rec*", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/ref/collection/:collectionAlias/id/:itemId", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/compoundobject/collection/:collectionAlias/id/:itemId", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/singleitem/collection/:collectionAlias/id/:itemId", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/fullbrowser/collection/:collectionAlias/id/:itemId", render: function (e) { return c.a.createElement(x.a, { to: "/digital/collection/".concat(e.match.params.collectionAlias, "/id/").concat(e.match.params.itemId) }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm/favorites", render: function () { return c.a.createElement(x.a, { to: "/digital" }) } }), c.a.createElement(x.b, { exact: !0, path: "/cdm", render: function () { return c.a.createElement(x.a, { to: "/digital" }) } }), c.a.createElement(x.b, { path: "*", render: function () { return c.a.createElement(ct, { setMainClass: s }) } })), m = H.a.decode(r.formatMessage({ id: "SITE_CONFIG_title", defaultMessage: " " })), f = a.customFiles && a.customFiles.customCssFilePath, b = V(m); return c.a.createElement("div", { className: "CoreLayout-maincontainer ".concat(i) }, f ? c.a.createElement("link", { rel: "stylesheet", href: "/customizations".concat(f) }) : null, c.a.createElement(C.b, { title: b, defaultTitle: b, titleTemplate: "%s - " + b }), c.a.createElement(ur, null), o ? c.a.createElement("div", { className: "CoreLayout-headerContainer cdm-header" }, c.a.createElement(Or, { href: ".cdm-main-content", tabIndex: 3 }), c.a.createElement(jt, null)) : c.a.createElement(c.a.Fragment, null), c.a.createElement("div", { className: "CoreLayout-mainWrapperContainer" }, c.a.createElement("div", { className: "CoreLayout-mainwrapper cdm-main-content" }, d ? c.a.createElement("div", { className: "CollectionLayout-container" }, c.a.createElement("link", { rel: "stylesheet", href: d }), e && e.body && e.body.customFiles && e.body.customFiles.customCssFilePath ? c.a.createElement("link", { rel: "stylesheet", href: He(e.body.customFiles.customCssFilePath) }) : null, u) : u), l ? c.a.createElement(gt, null) : c.a.createElement(c.a.Fragment, null))) } }) }))), jr = function (e) { var t = Object(x.h)(), a = Object(ft.d)(t), r = a ? a.join("!") : null, o = Object(S.useTracking)(); return Object(n.useEffect)((function () { o.trackEvent({ hitType: Ue.PAGEVIEW, page: t.pathname }) }), [o, t]), c.a.createElement(Sr, { siteConfig: e.siteConfig, collection: r }) }, _r = (a(793), function () { var e = Object(k.a)(), t = H.a.decode(e.formatMessage({ id: "SITE_KEY_browserNotSupportedTitle", defaultMessage: " " })), a = H.a.decode(e.formatMessage({ id: "SITE_KEY_browserNotSupportedBody", defaultMessage: " " })), n = H.a.decode(e.formatMessage({ id: "SITE_KEY_downloadEdge", defaultMessage: " " })); return c.a.createElement("div", { className: "IEPage-container" }, c.a.createElement(va.a.Dialog, { className: "IEPage-modal" }, c.a.createElement(va.a.Header, { className: "IEPage-modalHeader" }, c.a.createElement(va.a.Title, null, t)), c.a.createElement(va.a.Body, { className: "IEPage-modalBody" }, a), c.a.createElement(va.a.Footer, { className: "IEPage-modalFooter" }, c.a.createElement(W.a, { bsStyle: "primary", onClick: function () { window.location.href = "https://www.microsoft.com/edge/" } }, n)))) }), yr = a(441), Cr = a(178), kr = a(243), xr = a(442), Mr = a(446), Tr = a(447); a(794); var wr = a(795), Nr = function (e) { Object(xr.a)(a, e); var t = Object(Mr.a)(a); function a() { var e; return Object(yr.a)(this, a), (e = t.call(this))._map = null, e._markers = [], e.renderPopupTemplate = e._renderPopupTemplate.bind(Object(Cr.a)(e)), e } return Object(kr.a)(a, [{ key: "map", get: function () { return this._map } }, { key: "center", get: function () { return this.hasAttribute("center") ? this.getAttribute("center").split(",").map((function (e) { return Number(e) || 0 })) : a.DEFAULTS.map.center } }, { key: "zoom", get: function () { return this.hasAttribute("zoom") ? Number(this.getAttribute("zoom")) : a.DEFAULTS.map.zoom } }, { key: "query", get: function () { return this.hasAttribute("query") ? this.getAttribute("query") : null } }, { key: "height", get: function () { return this.hasAttribute("height") ? this.getAttribute("height") : null } }, { key: "width", get: function () { return this.hasAttribute("width") ? this.getAttribute("width") : null } }], [{ key: "observedAttributes", get: function () { return ["query"] } }]), Object(kr.a)(a, [{ key: "connectedCallback", value: function () { return this.height && (this.style.height = this.height + "px"), this.width && (this.style.width = this.width + "px"), Promise.resolve(this._setupMap(this.ownerDocument)) } }, { key: "disconnectedCallback", value: function () { this.map && this.map.remove && this.map.remove() } }, { key: "attributeChangedCallback", value: function (e, t, a) { return this._reloadMarkersData(a) } }, { key: "_addMarker", value: function (e) { this._icon = this._icon || new wr.icon(a.DEFAULTS.icon); var t = wr.marker([e.latitude, e.longitude], { icon: this._icon, title: e.metadataValue1 }).bindPopup(this.renderPopupTemplate, a.DEFAULTS.popup); return t.data = e, t } }, { key: "_removeMarkers", value: function () { this._markers.forEach((function (e) { return e.remove && e.remove() })), this._markers = [] } }, { key: "_reloadMarkersData", value: function (e) { var t = this; return this._loadData(e || this.query).then((function (e) { if (t._removeMarkers(), t._markers = (e || []).map((function (e) { return t._addMarker(e) })), 0 !== t._markers.length) { var a = new wr.featureGroup(t._markers); t.map.fitBounds(a.getBounds().pad(.5)), t.map.setView(a.getBounds().getCenter()); var n = 0; !function e(a, c) { n && clearTimeout(n), n = setTimeout((function () { for (var n = c; n < c + 10; n++)a[n] && a[n].addTo(t.map); a.length > c + 10 && e(a, c + 10) })) }(t._markers, 0) } })) } }, { key: "_loadData", value: function (e) { return e ? fetch(e, Object(p.a)({ method: "GET", headers: Object(p.a)({}, Object(g.b)()) }, g.a)).then((function (e) { return e.json() })).then((function (e) { return e.mapPinInfoList })) : Promise.resolve([]) } }, { key: "_setupMap", value: function (e) { var t = e.createElement("div"); t.style.width = "100%", t.style.height = "100%", this.appendChild(t); var n = wr.map(t, { zoom: this.zoom, center: this.center }); wr.tileLayer(a.DEFAULTS.tileLayer.urlTemplate, a.DEFAULTS.tileLayer.options).addTo(n), n.on("popupopen", this._onPopupOpen.bind(this)), n.on("popupclose", this._onPopupClose.bind(this)), this._map = n, setTimeout((function () { n.invalidateSize() }), 100) } }, { key: "_renderPopupTemplate", value: function (e) { var t = e.data, n = this.ownerDocument.createElement("div"); n.innerHTML = a.DEFAULTS.popupTemplate(t); var c = n.children[0].cloneNode(!0); return c && (c.onclick = this._onPopupClick.bind(this, t), c.onkeydown = c.onclick), c } }, { key: "_onPopupClick", value: function (e, t) { "click" === t.type || "keydown" === t.type && 13 === t.keyCode ? (t.preventDefault(), t.stopPropagation(), window.location.href = e.url) : "keydown" === t.type && 27 === t.keyCode && this._map.closePopup() } }, { key: "_onPopupOpen", value: function (e) { e.popup && e.popup._contentNode && (Array.from(e.popup._container.querySelectorAll("[data-max-lines]")).forEach((function (e) { e.style.cssText = Ct(e.innerText, kt(e, "font-size").replace(/[^-\d.]/g, ""), kt(e, "line-height").replace(/[^-\d.]/g, ""), e.dataset.maxLines) })), e.popup._container.querySelector(".media-left .media-object").focus()) } }, { key: "_onPopupClose", value: function (e) { if (e.popup && e.popup._contentNode) { var t = e.popup._container, a = parseFloat(t.querySelector("#coord-longitude").getAttribute("data-value")), n = parseFloat(t.querySelector("#coord-latitude").getAttribute("data-value")), c = this._markers.find((function (e) { return n === e.getLatLng().lat && a === e.getLatLng().lng ? e : null })); c && c.getElement && c.getElement() && c.getElement().focus() } } }]), a }(Object(Tr.a)(HTMLElement)); Nr.DEFAULTS = { map: { center: [0, 0], zoom: 0 }, tileLayer: { urlTemplate: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", options: { attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors' } }, popup: { minWidth: 170, maxWidth: 1200, className: "col-md-6 col-sm-8 col-xs-10" }, icon: { iconUrl: a(796), iconRetinaUrl: a(797), shadowUrl: a(798), iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], tooltipAnchor: [16, -28], shadowSize: [41, 41] }, popupTemplate: function (e) { return '\n        <div class="media">\n            <div class="media-left">\n               <img class="media-object" tabIndex="0" src="'.concat(e.thumbnail, '" title="').concat(e.metadataValue1 || "", '"/>\n            </div>\n            <div class="media-body">\n                <h2 class="media-heading" tabIndex="0" data-max-lines=2>\n                    ').concat(e.metadataValue1 || "", '\n                </h2>\n                <p tabIndex="0" data-max-lines=3>').concat(e.metadataValue2 || "", '</p>\n                <p tabIndex="0" data-max-lines=3>').concat(e.metadataValue3 || "", '</p>\n            </div>\n            <div id="coord-longitude" data-value="').concat(e.longitude, '" aria-hidden="true"/>\n            <div id="coord-latitude" data-value="').concat(e.latitude, '" aria-hidden="true"/>\n        </div>\n        ') } }, window.customElements.define("cdm-map", Nr); var Ar = j()({}, { dispatch: function (e) { return function (e) { if (window.googleAnalyticsEnabled) { var t = { hitType: e.hitType, eventAction: e.eventAction, eventCategory: e.eventCategory, eventLabel: e.eventLabel }; if (_ && window.ga("send", t), y) { var a = t; if (e.params) for (var n in e.params) e.params.hasOwnProperty(n) && (a[n] = e.params[n]); var c = e.eventName; c || (c = "".concat(e.eventCategory, "_").concat(e.eventLabel)), "event" === e.hitType && window.gtag("event", c, a) } } }(e) } })((function () { var e = window.__INITIAL_STATE__, t = localStorage.getItem("cdm_selected_language"); e.intl.locale = e.intl.locale.replace("_", "-"); var a = t || e.site_config.language.defaultLocale.replace("_", "-"), r = Object(n.useState)(a), o = Object(d.a)(r, 2), l = o[0], u = o[1], m = Object(n.useState)({ messages: e.intl.messages, isLoading: !1 }), p = Object(d.a)(m, 2), g = p[0], E = p[1], v = Object(n.useCallback)(Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return t = function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, O(); case 2: (t = e.sent).refreshAuthenticationData = v, C(t); case 5: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), e.next = 3, t(); case 3: case "end": return e.stop() } }), e) }))), []), I = Object(n.useState)({ name: e.authentication ? e.authentication.name : "", isWCTAdmin: !!e.authentication && e.authentication.isWCTAdmin, refreshAuthenticationData: v }), S = Object(d.a)(I, 2), j = S[0], C = S[1]; !function (e) { if (window.googleAnalyticsEnabled = e.analytics.googleAnalyticsEnabled, window.googleAnalyticsEnabled) { var t = e.analytics.googleAnalyticsTrackerIds; if (null !== t && void 0 !== t && t.length > 0) t[0].split(",").forEach((function (e) { (e = e.trim()).startsWith("G-") ? (y = !0, window.gtag("config", e)) : e.startsWith("UA-") && (_ = !0, window.ga("create", e, "auto")) })) } }(e.site_config); var k = function (e) { return new Promise((function (t) { localStorage.setItem("cdm_selected_language", e), t(e) })) }; k(a); var x = function () { var e = Object(s.a)(i.a.mark((function e(t) { var a; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, k(t); case 2: a = e.sent, u(a); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }(), M = Object(n.useCallback)(Object(s.a)(i.a.mark((function t() { var a; return i.a.wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, h(e.site_config.preview); case 2: a = t.sent, E({ messages: a, isLoading: !1 }); case 4: case "end": return t.stop() } }), t) }))), [e.site_config.preview]); Object(n.useEffect)((function () { M() }), [M, l]), Object(n.useEffect)((function () { (function () { var e = Object(s.a)(i.a.mark((function e() { var t; return i.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, O(); case 2: (t = e.sent).refreshAuthenticationData = v, C(t); case 5: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } })()() }), [v]), Object(n.useEffect)((function () { return function () { ["gridViewEnabled", "searchResultsPerPage"].forEach((function (e) { return localStorage.removeItem(e) })) } })); return g.isLoading ? c.a.createElement("div", null, "Loading...") : c.a.createElement(f, Object.assign({ locale: l, key: l, changeLanguage: x }, g), window.navigator.userAgent.match(/(MSIE|Trident)/) ? c.a.createElement(_r, null) : c.a.createElement(b.Provider, { value: j }, c.a.createElement(Ae.a, null, c.a.createElement(jr, { siteConfig: e.site_config })))) })); Boolean("localhost" === window.location.hostname || "[::1]" === window.location.hostname || window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)); o.a.render(c.a.createElement(Ar, null), document.getElementById("root")), "serviceWorker" in navigator && navigator.serviceWorker.ready.then((function (e) { e.unregister() })) } }, [[452, 1, 2]]]);
//# sourceMappingURL=main.32f443b7.chunk.js.map